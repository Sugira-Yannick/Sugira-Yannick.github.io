<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Commandes Importantes - Base de Connaissances Système & Réseau</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* [TOUS LES STYLES COMPLETS AVEC LES AMÉLIORATIONS] */
    :root {
      --bg: #ffffff;
      --fg: #333333;
      --accent: #3498db;
      --code-bg: #f5f5f5;
      --note-bg: #e7f5fe;
      --warn-bg: #fff3cd;
      --linux-color: #dd4814;
      --windows-color: #0078d7;
      --cisco-color: #1ba0d7;
      --powershell-color: #5391cc;
      --network-color: #4b6a88;
      --pfsense-color: #212121;
      --admin-color: #6e40aa;
      --device-color: #6c757d;
      --web-color: #e44d26;
      --virt-color: #562d7d;       
      --backup-color: #5cb85c;     
      --monitoring-color: #f0ad4e; 
      --security-color: #d9534f;   
      --docker-color: #2496ed;
      --cloud-color: #ff9900;
      --automation-color: #28a745;
      --database-color: #8e44ad;
      --aichat-color: #00b8d4;
      --lab-color: #e67e22;
      --sites-color: #9b59b6;
      --urgent-color: #e74c3c;
      --diagnostic-color: #3498db;
      --securite-color: #d9534f;
      --production-color: #27ae60;
      --risque-faible: #2ecc71;
      --risque-moyen: #f39c12;
      --risque-eleve: #e74c3c;
    }
    [data-theme="dark"] {
      --bg: #1e1e1e;
      --fg: #f0f0f0;
      --accent: #2980b9;
      --code-bg: #2b2b2b;
      --note-bg: #2c3e50;
      --warn-bg: #664d03;
      --urgent-color: #c0392b;
      --diagnostic-color: #2980b9;
      --securite-color: #c0392b;
      --production-color: #229954;
    }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--fg);
      display: flex;
      line-height: 1.6;
    }
    nav {
      width: 250px;
      background: var(--accent);
      color: white;
      padding: 20px;
      height: 100vh;
      position: sticky;
      top: 0;
      overflow-y: auto;
    }
    nav h2 {
      font-size: 1.2rem;
      margin-bottom: 10px;
    }
    nav a {
      display: block;
      color: white;
      text-decoration: none;
      margin: 5px 0;
      padding: 5px;
      border-radius: 4px;
      transition: background 0.2s;
    }
    nav a:hover {
      background: rgba(255,255,255,0.2);
    }
    .content {
      flex: 1;
      padding: 20px;
      max-width: 1000px;
    }
    h1 {
      color: var(--accent);
      border-bottom: 2px solid var(--accent);
      padding-bottom: 10px;
    }
    h2 {
      color: var(--accent);
      border-bottom: 2px solid;
      padding-bottom: 5px;
      margin-top: 30px;
    }
    h2 i {
      margin-right: 10px;
    }
    h3 {
      color: var(--fg);
      margin-top: 20px;
      font-size: 1.1em;
    }
    h3 i {
      margin-right: 8px;
      width: 20px;
      text-align: center;
    }
    pre {
      background: var(--code-bg);
      padding: 15px;
      border-left: 4px solid var(--accent);
      position: relative;
      white-space: pre-wrap;
      word-wrap: break-word;
      margin: 15px 0;
      border-radius: 4px;
      overflow-x: auto;
    }
    code {
      font-family: Consolas, monospace;
      color: #c7254e;
    }
    .copy-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: var(--code-bg);
      border: 1px solid rgba(0,0,0,0.1);
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.2s;
    }
    .copy-btn:hover {
      background: var(--accent);
      color: white;
    }
    .note, .warning, .usage {
      padding: 15px;
      margin: 15px 0;
      border-left: 4px solid var(--accent);
      border-radius: 4px;
    }
    .note { 
      background: var(--note-bg); 
    }
    .warning { 
      background: var(--warn-bg);
    }
    .usage {
      background: #e8f5e8;
      border-left-color: #28a745;
      color: #333;
    }
    .theme-toggle {
      position: fixed;
      top: 10px;
      right: 20px;
      cursor: pointer;
      font-size: 1.2em;
      background: var(--accent);
      color: white;
      padding: 8px 12px;
      border-radius: 20px;
      z-index: 100;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    @media (max-width: 768px) {
      nav { 
        width: 100%;
        height: auto;
        position: relative;
      }
      body { 
        flex-direction: column; 
      }
      .theme-toggle {
        position: absolute;
        top: 10px;
        right: 10px;
      }
      .quick-nav {
        position: relative !important;
        width: 100% !important;
        margin-bottom: 20px;
      }
    }
    /* Couleurs des icônes par catégorie */
    .linux-icon { color: var(--linux-color); }
    .windows-icon { color: var(--windows-color); }
    .cisco-icon { color: var(--cisco-color); }
    .powershell-icon { color: var(--powershell-color); }
    .network-icon { color: var(--network-color); }
    .pfsense-icon { color: var(--pfsense-color); }
    .admin-icon { color: var(--admin-color); }
    .device-icon { color: var(--device-color); }
    .web-icon { color: var(--web-color); }
    .virt-icon { color: var(--virt-color); }
    .backup-icon { color: var(--backup-color); }
    .monitoring-icon { color: var(--monitoring-color); }
    .security-icon { color: var(--security-color); }
    .docker-icon { color: var(--docker-color); }
    .cloud-icon { color: var(--cloud-color); }
    .automation-icon { color: var(--automation-color); }
    .database-icon { color: var(--database-color); }
    .aichat-icon { color: var(--aichat-color); }
    .lab-icon { color: var(--lab-color); }
    .sites-icon { color: var(--sites-color); }
    
    /* Style pour la recherche */
    #searchInput {
      margin: 10px 0 20px;
      padding: 12px 15px;
      width: 100%;
      font-size: 1em;
      border: 2px solid var(--accent);
      border-radius: 5px;
      background: var(--bg);
      color: var(--fg);
      box-sizing: border-box;
    }
    
    .search-highlight {
      background-color: yellow;
      color: black;
      padding: 0 2px;
      border-radius: 2px;
    }
    
    .section-hidden {
      display: none;
    }
    
    ul {
      padding-left: 20px;
    }
    
    li {
      margin-bottom: 5px;
    }
    
    .usage-item {
      background: #f8f9fa;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border-left: 3px solid #28a745;
    }

    /* NOUVEAUX STYLES POUR LES AMÉLIORATIONS */
    
    /* Tags et badges */
    .tag {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: bold;
      margin: 2px;
    }
    .tag.urgent { background: var(--urgent-color); color: white; }
    .tag.diagnostic { background: var(--diagnostic-color); color: white; }
    .tag.securite { background: var(--securite-color); color: white; }
    .tag.production { background: var(--production-color); color: white; }
    .tag.risque-faible { background: var(--risque-faible); color: white; }
    .tag.risque-moyen { background: var(--risque-moyen); color: white; }
    .tag.risque-eleve { background: var(--risque-eleve); color: white; }
    .tag.configuration { background: #9b59b6; color: white; }
    .tag.reseau { background: #3498db; color: white; }
    .tag.maintenance { background: #f39c12; color: white; }
    .tag.monitoring { background: #e67e22; color: white; }

    /* Cartes de commandes */
    .command-card {
      background: var(--bg);
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .command-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }
    .command-meta .tag {
      font-size: 0.7em;
    }

    /* Boîtes de contexte */
.context-box {
    background: var(--note-bg);
    border-left: 4px solid var(--accent);
    padding: 15px;
    margin: 15px 0;
    border-radius: 4px;
    color: var(--fg);
}

.context-box strong {
    color: var(--accent);
}

    /* Navigation rapide */
    .quick-nav {
      position: fixed;
      top: 80px;
      right: 20px;
      width: 250px;
      background: var(--bg);
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      z-index: 99;
      max-height: 80vh;
      overflow-y: auto;
    }
    .quick-nav h3 {
      margin-top: 0;
      color: var(--accent);
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    .quick-nav button {
      display: block;
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-align: left;
      transition: background 0.2s;
    }
    .quick-nav button:hover {
      background: #2980b9;
    }

    /* Workflows */
    .workflow {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }
    .workflow h3 {
      color: white;
      margin-top: 0;
    }
    .workflow ol {
      padding-left: 20px;
    }
    .workflow li {
      margin: 10px 0;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .workflow li:hover {
      background: rgba(255,255,255,0.2);
    }

    /* Diagrammes */
    .diagram {
      background: #2c3e50;
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      overflow-x: auto;
    }

    /* Filtres */
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    .filter-btn {
      padding: 8px 15px;
      border: 1px solid #ddd;
      background: white;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .filter-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* Mode urgence */
    .mode-toggle {
      position: fixed;
      top: 10px;
      left: 270px;
      background: var(--accent);
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      cursor: pointer;
      z-index: 100;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    /* Cartes de scénarios */
    .scenario-card {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      margin: 15px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .scenario-card:hover {
      transform: translateY(-2px);
    }
    .scenario-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    .scenario-icon {
      font-size: 2em;
      margin-right: 15px;
    }
    .scenario-card { background: var(--bg); }
    
    /* Diagram */
    .diagram { 
    background: var(--code-bg) !important; 
    color: var(--fg) !important; 
}

    /* Styles pour le mode urgence */
    body.mode-urgence .context-box,
    body.mode-urgence .note,
    body.mode-urgence .warning,
    body.mode-urgence .usage {
      display: none;
    }
    body.mode-urgence .command-card {
      padding: 10px;
      margin: 10px 0;
    }
    body.mode-urgence pre {
      margin: 5px 0;
    }
  </style>
</head>
<body>
 
    <nav>
  <h2>Navigation</h2>
  <a href="#linux"><i class="fab fa-linux linux-icon"></i> Linux</a>
  <a href="#windows"><i class="fab fa-windows windows-icon"></i> Windows</a>
  <a href="#cisco"><i class="fas fa-network-wired cisco-icon"></i> Cisco</a>
  <a href="#powershell"><i class="fas fa-terminal powershell-icon"></i> PowerShell</a>
  <a href="#reseau"><i class="fas fa-wifi network-icon"></i> Réseau</a>
  <a href="#pfsense"><i class="fas fa-shield-alt pfsense-icon"></i> pfSense</a>
  <a href="#administration"><i class="fas fa-user-cog admin-icon"></i> Administration</a>
  <a href="#peripheriques"><i class="fas fa-print device-icon"></i> Periphériques</a>
  <a href="#web"><i class="fas fa-globe web-icon"></i> Serveur Web</a>
  <a href="#virtualisation"><i class="fas fa-cloud virt-icon"></i> Virtualisation</a>
  <a href="#backup"><i class="fas fa-save backup-icon"></i> Sauvegarde</a>
  <a href="#monitoring"><i class="fas fa-chart-bar monitoring-icon"></i> Monitoring</a>
  <a href="#securite"><i class="fas fa-shield-alt security-icon"></i> Sécurité</a>
  <a href="#containers"><i class="fab fa-docker docker-icon"></i> Containers</a>
  <a href="#cloud"><i class="fas fa-cloud cloud-icon"></i> Cloud & IaC</a>
  <a href="#automation"><i class="fas fa-robot automation-icon"></i> Automatisation</a>
  <a href="#databases"><i class="fas fa-database database-icon"></i> Bases de Données</a>
  <a href="#aichat"><i class="fas fa-robot aichat-icon"></i> Aichat</a>
  <a href="#lab"><i class="fas fa-flask lab-icon"></i> Logiciels du Labo</a>
  <a href="#sites-internet"><i class="fas fa-external-link-alt sites-icon"></i> Sites de Référence</a>
</nav>

  <div class="content">
    <!-- Nouvelle navigation rapide -->
    <div class="quick-nav">
      <h3>🔧 Scénarios Courants</h3>
      <button onclick="filterScenario('reseau-down')">🌐 Réseau HS</button>
      <button onclick="filterScenario('ssh-blocked')">🔒 SSH bloqué</button>
      <button onclick="filterScenario('disk-full')">💾 Disque plein</button>
      <button onclick="filterScenario('service-crash')">🚨 Service crashé</button>
      <button onclick="filterScenario('dns-issue')">🌍 DNS cassé</button>
      <button onclick="filterScenario('firewall-block')">🛡️ Firewall bloque</button>
      <button onclick="filterScenario('performance-slow')">🐌 Performance lente</button>
      <button onclick="filterScenario('security-breach')">🔐 Incident sécurité</button>
      
      <h3 style="margin-top: 20px;">🎯 Filtres Rapides</h3>
      <button onclick="showAllCommands()">📋 Tout afficher</button>
      <button onclick="filterByRisk('faible')">🟢 Risque faible</button>
      <button onclick="filterByRisk('eleve')">🔴 Risque élevé</button>
      <button onclick="filterByType('diagnostic')">🔍 Diagnostic</button>
      <button onclick="filterByType('reparation')">🔧 Réparation</button>
    </div>

    <!-- Mode toggle -->
    <div class="mode-toggle" onclick="toggleMode()">
      <i class="fas fa-rocket"></i> Mode Urgence
    </div>

    <!-- Barre de recherche améliorée -->
    <input type="text" id="searchInput" placeholder="🔍 Rechercher une commande, un symptôme ou un scénario..." />
    
    <!-- Filtres -->
    <div class="filters">
      <span><strong>Filtrer par :</strong></span>
      <button class="filter-btn active" onclick="toggleFilter('all')">Tout</button>
      <button class="filter-btn" onclick="toggleFilter('linux')">🐧 Linux</button>
      <button class="filter-btn" onclick="toggleFilter('windows')">🪟 Windows</button>
      <button class="filter-btn" onclick="toggleFilter('cisco')">🔌 Cisco</button>
      <button class="filter-btn" onclick="toggleFilter('reseau')">🌐 Réseau</button>
      <button class="filter-btn" onclick="toggleFilter('securite')">🔒 Sécurité</button>
      <button class="filter-btn" onclick="toggleFilter('diagnostic')">🔍 Diagnostic</button>
    </div>

    <span class="theme-toggle" onclick="toggleTheme()"><i class="fas fa-moon"></i></span>
    <h1>Commandes Importantes <span class="tag diagnostic">BASE DE CONNAISSANCES</span></h1>

    <!-- Section Workflows Guidés -->
    <div class="workflow">
      <h3>🔧 Workflows de Diagnostic Rapide</h3>
      <ol>
        <li onclick="scrollToCommand('ip-a')">✅ Vérifier les interfaces réseau</li>
        <li onclick="scrollToCommand('ping-test')">✅ Tester la connectivité Internet</li>
        <li onclick="scrollToCommand('dns-check')">✅ Vérifier le DNS</li>
        <li onclick="scrollToCommand('service-status')">✅ Vérifier les services</li>
        <li onclick="scrollToCommand('disk-space')">✅ Vérifier l'espace disque</li>
      </ol>
    </div>

    <!-- Diagramme de flux -->
    <div class="diagram">
      <h4>📊 Flux de Diagnostic Réseau</h4>
      <pre>
  [Problème réseau] 
       ↓
  [ip a] → Interfaces OK ? → Non → [Vérifier câbles/cartes]
       ↓ Oui
  [ping 8.8.8.8] → Internet OK ? → Non → [ip route show]
       ↓ Oui
  [nslookup] → DNS OK ? → Non → [cat /etc/resolv.conf]
       ↓ Oui
  [Problème applicatif]
      </pre>
    </div>

    <!-- Scénarios courants -->
    <h2>🚨 Scénarios d'Urgence</h2>

    <div class="scenario-card">
      <div class="scenario-header">
        <div class="scenario-icon">🌐</div>
        <div>
          <h3>Réseau Complètement HS</h3>
          <div class="command-meta">
            <span class="tag urgent">URGENT</span>
            <span class="tag risque-faible">RISQUE FAIBLE</span>
            <span class="tag diagnostic">DIAGNOSTIC</span>
          </div>
        </div>
      </div>
      <div class="context-box">
        <strong>🎯 Symptômes :</strong> Pas d'accès Internet, impossible de ping les gateways<br>
        <strong>⚠️ Causes probables :</strong> Carte réseau, câble, configuration IP, firewall<br>
        <strong>🔧 Temps estimé :</strong> 5-15 minutes
      </div>
      <button onclick="filterScenario('reseau-down')" style="background: var(--urgent-color); color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
        Voir les commandes de diagnostic
      </button>
    </div>

    <div class="scenario-card">
      <div class="scenario-header">
        <div class="scenario-icon">🔒</div>
        <div>
          <h3>SSH Bloqué / Refusé</h3>
          <div class="command-meta">
            <span class="tag urgent">URGENT</span>
            <span class="tag risque-moyen">RISQUE MOYEN</span>
            <span class="tag securite">SÉCURITÉ</span>
          </div>
        </div>
      </div>
      <div class="context-box">
        <strong>🎯 Symptômes :</strong> "Connection refused", timeout sur le port 22<br>
        <strong>⚠️ Causes probables :</strong> Service SSH down, firewall, changement de port<br>
        <strong>🔧 Temps estimé :</strong> 3-10 minutes
      </div>
      <button onclick="filterScenario('ssh-blocked')" style="background: var(--securite-color); color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
        Voir les commandes de diagnostic
      </button>
    </div>

    <!-- ============================ -->
    <!-- SECTION LINUX - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="linux"><i class="fab fa-linux linux-icon"></i> Linux</h2>

    <!-- Routage Linux -->
    <h3 id="routage-linux"><i class="fas fa-route"></i> Routage sous Linux</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 secondes</span>
      </div>
      <pre><code># Ajouter une route
ip route add (IP address de destination)/(mask) via (IP local capable d'aller vers le réseau de destination)

# Ajouter une route par défaut
ip route add default via &lt;address-passerelle&gt;

# Rendre une route permanente (Debian/Ubuntu)
echo "192.168.10.0/24 via 192.168.60.5 dev eth0" | sudo tee -a /etc/network/interfaces

# Vérifier la table de routage
ip route show

# Ajouter une adresse IP permanente
ip address add 192.168.1.2/24 dev eth0 sur l'interface concerné dans /etc/network/interfaces
up ip address add 192.168.1.2/24 dev eth0 sur l'interface concerné</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Quand une machine ne peut pas joindre un réseau spécifique<br>
        <strong>⚠️ Attention :</strong> Les routes ajoutées avec ip route sont temporaires (redémarrage)<br>
        <strong>✅ Test de succès :</strong> La commande `ip route show` affiche la nouvelle route<br>
        <strong>🚨 Scénario :</strong> Machine ne pouvant pas accéder à un sous-réseau spécifique
      </div>
    </div>

    <!-- Configuration d'interface Linux -->
    <h3 id="config-interface-linux"><i class="fas fa-network-wired"></i> Configuration d'interface sous Linux</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 5 secondes</span>
      </div>
      <pre><code># Lister les interfaces
ip link show, ip a

# Activer une interface
ip link set &lt;interface&gt; up

# Configurer une adresse IP
ip address add &lt;IP&gt;/&lt;masque&gt; dev &lt;interface&gt;

# Vérifier l'adresse IP
ip address show &lt;interface&gt;</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration manuelle d'une interface réseau<br>
        <strong>⚠️ Attention :</strong> Les changements sont temporaires (redémarrage)<br>
        <strong>✅ Test de succès :</strong> `ip a` montre l'interface avec la bonne IP<br>
        <strong>🚨 Scénario :</strong> Interface sans adresse IP ou configuration incorrecte
      </div>
    </div>

    <!-- NAT sous Linux -->
    <h3 id="nat-linux"><i class="fas fa-exchange-alt"></i> NAT sous Linux</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Désactiver NAT temporairement
iptables -t nat -F POSTROUTING

# Activer NAT
iptables -t nat -A POSTROUTING -s &lt;Network+Mask&gt; -o &lt;Interface&gt; -j MASQUERADE

# Activer le forwarding IP
sysctl -w net.ipv4.ip_forward=1
# Permanent: Edit /etc/sysctl.conf and set net.ipv4.ip_forward=1.

# Vérifier le NAT
sudo iptables -t nat -L POSTROUTING -v -n --line-numbers
iptables -t nat -L -n -v

# Vérifier le port forwarding
cat /proc/sys/net/ipv4/ip_forward

# Afficher les paquets NAT en temps réel
watch -n 1 'sudo iptables -t nat -L POSTROUTING -v -n'</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration d'un routeur Linux ou partage de connexion<br>
        <strong>⚠️ Attention :</strong> Vérifier que le forwarding IP est activé (valeur 1)<br>
        <strong>✅ Test de succès :</strong> Les machines du réseau interne peuvent accéder à Internet<br>
        <strong>🚨 Scénario :</strong> Mise en place d'un firewall/router Linux
      </div>
    </div>

    <div class="note">
        <p><strong>Alternative (for Static IPs):</strong> Use SNAT</p>
        <pre><code>iptables -t nat -A POSTROUTING -s 30.30.30.0/30 -o pnet0 -j SNAT --to-source [PUBLIC_IP]</code></pre>
    </div>

    <!-- NAT pour protocoles spécifiques -->
    <h3 id="nat-protocoles"><i class="fas fa-broadcast-tower"></i> NAT pour protocoles spécifiques</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 5 secondes</span>
      </div>
      <pre><code># Autoriser les paquets RIP (destination)
iptables -t nat -A POSTROUTING -p udp --dport 520 -j ACCEPT

# Autoriser les paquets RIP (source)
iptables -t nat -A POSTROUTING -p udp --sport 520 -j ACCEPT

# Autoriser tous les paquets
iptables -A FORWARD -i pnet0 -j ACCEPT
iptables -A FORWARD -o pnet0 -j ACCEPT</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration avancée du NAT pour protocoles spécifiques<br>
        <strong>⚠️ Attention :</strong> Bien spécifier les ports et protocoles<br>
        <strong>✅ Test de succès :</strong> Les paquets RIP traversent le NAT<br>
        <strong>🚨 Scénario :</strong> Routage dynamique RIP à travers un firewall Linux
      </div>
    </div>

    <div class="warning">
        <p><strong>Common Pitfalls:</strong></p>
        <ul>
            <li>Interface name typo: Ensure pnet0 exists (ip a or ifconfig)</li>
            <li>Missing kernel support: Verify NAT is supported (lsmod | grep iptable_nat)</li>
            <li>Firewall conflicts: Check if other rules block traffic (iptables -L)</li>
        </ul>
    </div>

    <!-- Traceroute -->
    <h3 id="traceroute-linux"><i class="fas fa-project-diagram"></i> Traceroute</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Envoyer seulement 3 paquets par saut
traceroute 8.8.8.8 probe 3

# Trouver le PID du traceroute
show processes | include traceroute

# Terminer le processus
kill &lt;PID&gt;</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Identifier où se situe une panne réseau<br>
        <strong>🔍 Interprétation :</strong> Le dernier saut répondant indique le point de rupture<br>
        <strong>✅ Résultat :</strong> Visualisation complète du chemin réseau<br>
        <strong>🚨 Scénario :</strong> "Je peux ping certaines IP mais pas d'autres"
      </div>
    </div>

    <!-- Traitement de fichiers -->
    <h3 id="traitement-fichiers"><i class="fas fa-file-alt"></i> Traitement de fichiers sous Linux</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag">⏱️ 2 secondes</span>
      </div>
      <pre><code># Ajouter un commentaire à la première ligne
sed -i '1i # Commentaire' /etc/hosts

# Ajouter un texte à la première ligne
sed -i '1iTexteà insérer' /etc/hosts

# Créer un fichier avec 2 lignes
echo -e "Ligne 1\nLigne 3" > fichier.txt

# Ajouter une ligne en position 2
sed -i '2iLigne 2 (ajoutée)' fichier.txt

# Supprimer la deuxième ligne
sed -i '2d' fichier.txt

# Supprimer un texte spécifique
sed -i '/texte à supprimer/d' fichier.txt

# Supprimer un bloc de lignes
sed -i '2,4d' fichier.txt

# Édition interactive avec ed
ed -s fichier.txt <<EOF
2i
Texte ajouté à la ligne 2
.
w
q
EOF

# Méthode manuelle avec head/tail
head -n 1 fichier.txt > tmp
echo "Nouvelle ligne 2" >> tmp
tail -n +2 fichier.txt >> tmp
mv tmp fichier.txt</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Modification rapide de fichiers de configuration<br>
        <strong>⚠️ Attention :</strong> Toujours sauvegarder avant modification avec sed -i<br>
        <strong>✅ Test de succès :</strong> Vérifier le contenu du fichier après modification<br>
        <strong>🚨 Scénario :</strong> Correction rapide de configuration sans éditeur
      </div>
    </div>

    <!-- Maintenance système Linux -->
    <h3 id="maintenance-linux"><i class="fas fa-tools"></i> Maintenance système sous Linux</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag production">PRODUCTION</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Moderniser les dépôts apt
apt modernize-sources

# Reconfigurer GRUB
sudo update-grub

# Nettoyer le système
sudo apt autoremove --purge

# Régénérer initramfs
sudo update-initramfs -u -k all

# Corriger les dépendances
sudo apt install -f

# Vérifier l'espace disque
df -h /boot</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Maintenance périodique du système<br>
        <strong>⚠️ Attention :</strong> Certaines commandes peuvent nécessiter un redémarrage<br>
        <strong>✅ Résultat :</strong> Système nettoyé et optimisé<br>
        <strong>🚨 Scénario :</strong> Maintenance mensuelle ou après mises à jour
      </div>
    </div>

    <!-- Intégration Active Directory -->
    <h3 id="ad-linux"><i class="fas fa-users"></i> Intégration Active Directory</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Joindre un domaine AD
sudo apt install realmd sssd adcli samba-common krb5-user packagekit
sudo realm join --user=Administrateur MONDOMAINE.LOCAL

# Supprimer une machine du domaine AD
sudo realm leave --remove=/home/[username] [domain.name]</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Intégration d'un serveur Linux dans un domaine Windows<br>
        <strong>⚠️ Pré-requis :</strong> Accès réseau au contrôleur de domaine<br>
        <strong>✅ Test de succès :</strong> Connexion avec compte de domaine réussi<br>
        <strong>🚨 Scénario :</strong> "Intégration d'un serveur Linux dans l'AD d'entreprise"
      </div>
    </div>

    <!-- Scanner Virtuel Linux -->
    <h3 id="scanner-linux"><i class="fas fa-scanner"></i> Scanner Virtuel sous Linux</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Utiliser un scanneur virtuel
scanimage -d "net:&lt;IP_Scanner&gt;:test:0" --format=png > fake-scan.png

# Vérifier les périphériques disponibles
scanimage -L</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Test de connectivité avec scanners réseau<br>
        <strong>🔍 Utilisation :</strong> Vérifier que SANE détecte correctement le scanner<br>
        <strong>✅ Test de succès :</strong> scanimage -L liste le scanner réseau<br>
        <strong>🚨 Scénario :</strong> "Le scanner réseau n'est pas détecté"
      </div>
    </div>

    <!-- Diagnostic Réseau Linux -->
    <h3 id="diagnostic-reseau-linux"><i class="fas fa-search"></i> Diagnostic Réseau Linux</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag urgent">URGENT</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Vérification des interfaces réseau
ip a
ip -br addr show

# Vérification de la table de routage
ip route show
ip route get 8.8.8.8

# Test de connectivité de base
ping 192.168.10.1
ping 8.8.8.8
ping google.com

# Test DNS
nslookup google.com
nslookup 0.debian.pool.ntp.org

# Traceroute
traceroute -n 8.8.8.8

# Statistiques des interfaces
ip -s link show

# Connexions réseau actives
ss -tulpn

# Tables ARP
ip neigh show

# Informations matérielles réseau
lshw -class network 2>/dev/null | head -20

# Pilotes réseau
ethtool -i enp0s10 2>/dev/null

# Bandwidth par interface
cat /proc/net/dev

# Qualité du signal Wi-Fi (si applicable)
iwconfig 2>/dev/null | grep -i quality

# Latence réseau
ping -c 3 8.8.8.8

# Script de diagnostic rapide
#!/bin/bash
echo "=== DIAGNOSTIC RÉSEAU RAPIDE ==="
ip -br addr show
ip route show
ping -c 2 8.8.8.8</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Premier diagnostic en cas de problème réseau<br>
        <strong>🔍 Méthodologie :</strong> Suivre l'ordre des commandes du haut vers le bas<br>
        <strong>✅ Résultat :</strong> Identification précise du point de rupture<br>
        <strong>🚨 Scénario :</strong> "Le réseau ne marche plus" - diagnostic complet
      </div>
    </div>

    <!-- Diagnostic Firewall Local -->
    <h3 id="firewall-diagnostic"><i class="fas fa-shield-alt"></i> Diagnostic Firewall Local</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 5 secondes</span>
      </div>
      <pre><code># Vérifier les règles iptables
sudo iptables -L -n -v
sudo iptables -S

# Vérifier nftables
sudo nft list ruleset

# Désactivation temporaire du firewall
sudo iptables -F
sudo iptables -X
sudo iptables -t nat -F
sudo iptables -P INPUT ACCEPT
sudo iptables -P FORWARD ACCEPT
sudo iptables -P OUTPUT ACCEPT
sudo nft flush ruleset

# Test après désactivation firewall
ping -c 3 8.8.8.8

# Règles firewall
sudo iptables -L 2>/dev/null | head -20

# Ports ouverts
sudo netstat -tulpn 2>/dev/null | head -20

# Services réseau écoutants
sudo ss -tulpn | grep LISTEN</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Quand une connexion réseau est bloquée inexplicablement<br>
        <strong>🔍 Méthodologie :</strong> Désactiver temporairement le firewall pour tester<br>
        <strong>⚠️ Attention :</strong> Ne pas laisser le firewall désactivé en production !<br>
        <strong>🚨 Scénario :</strong> "Une application ne peut pas se connecter au réseau"
      </div>
    </div>

    <!-- Gestion NetworkManager -->
    <h3 id="networkmanager"><i class="fas fa-network-wired"></i> Gestion NetworkManager</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 15 secondes</span>
      </div>
      <pre><code># État des connexions NetworkManager
nmcli connection show
nmcli device status

# Vérification détaillée d'une connexion
nmcli connection show "Connexion Ethernet 1"
nmcli connection show enp0s10

# Modification configuration DNS
sudo nmcli connection modify "Connexion Ethernet 1" ipv4.dns "8.8.8.8,1.1.1.1"
sudo nmcli connection modify "Connexion Ethernet 1" ipv4.ignore-auto-dns yes
sudo nmcli connection modify "Connexion Ethernet 1" ipv4.dns-search ""

# Redémarrage connexion
sudo nmcli connection down "Connexion Ethernet 1"
sudo nmcli connection up "Connexion Ethernet 1"

# Suppression et recréation de profil
sudo nmcli connection delete "Connexion Ethernet 1"
sudo nmcli connection add type ethernet ifname enp0s10 con-name enp0s10 \
ipv4.method auto \
ipv4.dns "8.8.8.8,1.1.1.1" \
ipv4.ignore-auto-dns yes \
ipv4.dns-search "" \
connection.autoconnect yes

# Activer la nouvelle connexion
sudo nmcli connection up enp0s10

# Forcer la reconnaissance de l'interface
sudo nmcli device connect enp0s10

# Redémarrer NetworkManager (si nécessaire)
sudo systemctl restart NetworkManager</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Problèmes de configuration réseau persistants<br>
        <strong>🔍 Résolution :</strong> Supprimer et recréer la connexion corrompue<br>
        <strong>✅ Test de succès :</strong> Connexion réseau stable avec DNS fonctionnel<br>
        <strong>🚨 Scénario :</strong> "Problèmes DNS récurrents ou connexion instable"
      </div>
    </div>

    <!-- Configuration Manuelle Interfaces -->
    <h3 id="config-manuelle-interfaces"><i class="fas fa-cogs"></i> Configuration Manuelle Interfaces (sans NetworkManager)</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Arrêt NetworkManager
sudo systemctl stop NetworkManager
sudo systemctl disable NetworkManager

# Installation ifupdown
sudo apt update
sudo apt install ifupdown

# Configuration /etc/network/interfaces
sudo nano /etc/network/interfaces

# Contenu fichier interfaces :
source /etc/network/interfaces.d/*

# Interface loopback
auto lo
iface lo inet loopback

# Interface ethernet en DHCP
auto enp0s10
iface enp0s10 inet dhcp

# OU configuration statique
# auto enp0s10
# iface enp0s10 inet static
#     address 192.168.10.4/24
#     gateway 192.168.10.1
#     dns-nameservers 8.8.8.8 1.1.1.1

# Configuration DNS manuelle
sudo nano /etc/resolv.conf

# Contenu resolv.conf :
nameserver 8.8.8.8
nameserver 1.1.1.1
options timeout:2 attempts:1

# Rendre resolv.conf immuable
sudo chattr +i /etc/resolv.conf

# Activation service networking
sudo systemctl enable networking
sudo systemctl restart networking

# Gestion manuelle interface
sudo ifdown enp0s10
sudo ifup enp0s10</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Serveurs nécessitant une configuration réseau statique fiable<br>
        <strong>⚠️ Attention :</strong> NetworkManager ne gère plus la configuration<br>
        <strong>✅ Avantage :</strong> Configuration stable et prévisible<br>
        <strong>🚨 Scénario :</strong> "Serveur en production nécessitant IP fixe stable"
      </div>
    </div>

    <!-- Résolution Problèmes Spécifiques -->
    <h3 id="resolution-problemes"><i class="fas fa-wrench"></i> Résolution Problèmes Spécifiques</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Suppression route APIPA problématique
sudo ip route del 169.254.0.0/16 dev enp0s10

# Nettoyage interface en cas de conflit
sudo ip link set enp0s10 down
sudo ip addr flush dev enp0s10
sudo ip route flush dev enp0s10

# Renouvellement DHCP
sudo dhclient -r enp0s10
sudo dhclient enp0s10

# Configuration IP manuelle temporaire
sudo ip addr add 192.168.10.20/24 dev enp0s10
sudo ip route add default via 192.168.10.1

# Supprimer une IP secondaire
sudo ip addr del 192.168.30.8/24 dev enp0s10

# Appliquer Netplan
sudo netplan generate && sudo netplan apply

# Configurer IP fixe avec NetworkManager
sudo nmcli connection modify 'enp0s10' ipv4.method manual ipv4.addresses 192.168.30.6/24 ipv4.gateway 192.168.30.1 ipv4.dns '8.8.8.8,8.8.4.4'

# Configurer IP fixe avec Netplan
sudo cat > /etc/netplan/01-network.yaml << 'EOF'
network:
  version: 2
  renderer: networkd
  ethernets:
    enp0s10:
      dhcp4: false
      addresses: [192.168.30.6/24]
      gateway4: 192.168.30.1
      nameservers:
        addresses: [8.8.8.8, 8.8.4.4]
EOF

# Script de correction IP double
#!/bin/bash
INTERFACE=${1:-enp0s10}
MAIN_IP=${2:-192.168.30.6}
sudo ip addr flush dev $INTERFACE
sudo ip addr add $MAIN_IP/24 dev $INTERFACE
sudo systemctl restart systemd-networkd</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Problèmes réseau complexes ou configurations corrompues<br>
        <strong>🔍 Diagnostic :</strong> Commencer par `ip a` pour voir l'état actuel<br>
        <strong>⚠️ Attention :</strong> Certaines commandes peuvent couper la connexion temporairement<br>
        <strong>🚨 Scénario :</strong> "Interface avec multiples IP ou configuration réseau corrompue"
      </div>
    </div>

    <!-- Réinitialisation Complète -->
    <h3 id="reinitialisation-reseau"><i class="fas fa-redo"></i> Réinitialisation Complète</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Arrêt complet services réseau
sudo systemctl stop NetworkManager
sudo systemctl stop networking
sudo systemctl stop systemd-networkd

# Nettoyer les configurations existantes
sudo rm -rf /var/lib/NetworkManager/*

# Nettoyer l'interface manuellement
sudo ip link set enp0s10 down
sudo ip addr flush dev enp0s10
sudo ip route flush dev enp0s10

# Redémarrer les services
sudo systemctl start NetworkManager
sudo systemctl enable NetworkManager

# Laisser NetworkManager détecter automatiquement
sudo nmcli device connect enp0s10

# Configuration DNS manuelle
echo "nameserver 8.8.8.8" | sudo tee /etc/resolv.conf
echo "nameserver 1.1.1.1" | sudo tee -a /etc/resolv.conf

# Rendre le DNS permanent
sudo chattr +i /etc/resolv.conf
# Pour débloquer plus tard : sudo chattr -i /etc/resolv.conf</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Quand rien d'autre ne fonctionne - dernier recours<br>
        <strong>⚠️ Impact :</strong> Perte temporaire de connectivité réseau<br>
        <strong>✅ Résultat :</strong> Configuration réseau complètement réinitialisée<br>
        <strong>🚨 Scénario :</strong> "Problèmes réseau persistants après toutes les tentatives"
      </div>
    </div>

    <!-- Diagnostic Avancé -->
    <h3 id="diagnostic-avance"><i class="fas fa-search"></i> Diagnostic Avancé</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Capture paquets sortants
sudo tcpdump -i enp0s10 host 192.168.10.4

# Vérification processus réseau
ps aux | grep -E "(dhclient|NetworkManager)"

# Logs système
sudo journalctl -u NetworkManager -f
sudo journalctl -u networking -f

# Vérification fichiers configuration
ls -la /etc/network/interfaces.d/
cat /etc/resolv.conf

# Traceroute pour voir où ça bloque
traceroute -n 8.8.8.8

# Vérifier les processus réseau
ss -tuln

# Vérifier les logs système
sudo journalctl -u NetworkManager -f

# Vérifier les logs du noyau
dmesg | grep -i network

# Test HTTP/HTTPS
curl -I http://google.com
curl -I https://google.com

# Test connectivité intermédiaire
ping 192.168.10.1  # Switch L3
ping 192.168.1.1   # pfSense

# Vérification tables ARP
arp -n

# Test ports spécifiques
nc -vz 192.168.10.1 22
nc -vz 192.168.1.1 443

# Baux DHCP
cat /var/lib/dhcp/dhclient.*.leases 2>/dev/null | grep "fixed-address" | head -5

# Vérifier la configuration Netplan
cat /etc/netplan/*.yaml 2>/dev/null

# Serveurs DNS utilisés
systemd-resolve --status 2>/dev/null

# Interfaces virtuelles
ip link show type bridge 2>/dev/null

# VLANs
ip link show | grep "@"

# Sauvegarder configuration réseau
sudo cp /etc/netplan/*.yaml ~/backup_network/ 2>/dev/null || true
sudo cp /etc/network/interfaces ~/backup_network/ 2>/dev/null || true
sudo nmcli connection show > ~/backup_network/nmcli_connections.txt 2>/dev/null || true

# Réseaux Docker
docker network ls 2>/dev/null | head -10</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic approfondi de problèmes complexes<br>
        <strong>🔍 Méthodologie :</strong> Analyser couche par couche (physique → application)<br>
        <strong>✅ Résultat :</strong> Identification précise de l'origine du problème<br>
        <strong>🚨 Scénario :</strong> "Problème réseau intermittent ou complexe nécessitant analyse approfondie"
      </div>
    </div>

    <!-- Vérification réseau Linux -->
    <h3 id="verification-reseau-linux"><i class="fab fa-linux linux-icon"></i> Vérification réseau sous Linux</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Vérifier un port distant
nc -vz IP_DU_SERVEUR 631

# Connecter des conteneurs Docker à un bridge
docker network connect bridge guacamole
docker network connect bridge guacamole_db
docker network connect bridge guacd</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Vérification de connectivité vers des services spécifiques<br>
        <strong>🔍 Utilisation :</strong> Tester si un port est accessible depuis la machine<br>
        <strong>✅ Test de succès :</strong> "Connection succeeded" ou "succeeded"<br>
        <strong>🚨 Scénario :</strong> "Un service ne répond pas sur le réseau"
      </div>
    </div>

    <!-- Partages réseau Linux -->
    <h2><i class="fab fa-linux linux-icon"></i> Partages réseau sous Linux</h2>

    <!-- Montage NFS -->
    <h3 id="nfs-linux"><i class="fas fa-share-alt"></i> Montage de partage NFS</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Installer les paquets NFS
sudo apt install nfs-common

# Vérifier les partages disponibles sur le serveur
showmount -e &lt;IP Serveur NFS&gt;

# Créer un point de montage sur la machine locale
mkdir -p /mnt/truenas_backup

# Monter le partage
mount -t nfs 192.168.100.10:/mnt/tank/vmbackups /mnt/truenas_backup

# Vérifier le montage
df -h
mount | grep nfs

# Tester l'accès
ls /mnt/truenas_backup

# Monter automatiquement au démarrage
nano /etc/fstab
# Ajouter: 192.168.100.10:/mnt/tank/vmbackups  /mnt/truenas_backup  nfs  rw,soft,nolock  0  0

# Démonter le partage local
umount /mnt/truenas_backup

# Alternative avec autofs
sudo apt install autofs
# Éditer /etc/auto.master: /mnt/truenas  /etc/auto.truenas  --timeout=60
# Créer /etc/auto.truenas: backup  -fstype=nfs,rw,soft,nolock  192.168.100.10:/mnt/tank/vmbackups
sudo systemctl restart autofs
ls /mnt/truenas/backup</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Accès à des partages NFS (TrueNAS, serveurs Linux)<br>
        <strong>⚠️ Pré-requis :</strong> Serveur NFS accessible et partage configuré<br>
        <strong>✅ Test de succès :</strong> `df -h` montre le partage monté<br>
        <strong>🚨 Scénario :</strong> "Accès à un partage TrueNAS depuis un serveur Linux"
      </div>
    </div>

    <!-- Montage SMB -->
    <h3 id="smb-linux"><i class="fas fa-share-alt"></i> Montage de partage SMB</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Connecter au serveur SMB et afficher les partages
smbclient -L &lt;IP Serveur SMB&gt; -U &lt;Utilisateur d'accès SMB Partage&gt;

# Monter un partage SMB
sudo mount -t cifs -o username=&lt;Nom Utilisateur&gt;,password=&lt;Mot de passe utilisateur&gt;,vers=3.0,uid=$(id -u),gid=$(id -g),nosharesock //IP_Serveur_SMB/Nom_Partage /mnt/truenas_storage</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Accès à des partages Windows ou SMB<br>
        <strong>⚠️ Sécurité :</strong> Éviter de mettre le mot de passe en clair dans les scripts<br>
        <strong>✅ Test de succès :</strong> Accès en lecture/écriture au partage monté<br>
        <strong>🚨 Scénario :</strong> "Accès à un partage Windows depuis Linux"
      </div>
    </div>

    <!-- SSH et SFTP Linux -->
    <h2><i class="fab fa-linux linux-icon"></i> SSH et SFTP sous Linux</h2>

    <!-- Gestion clés SSH -->
    <h3 id="ssh-keys"><i class="fas fa-key"></i> Gestion des clés SSH</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Supprimer une clé du known_hosts
ssh-keygen -f '/root/.ssh/known_hosts' -R 'IP_Host'

# Générer une nouvelle clé SSH
ssh-keygen -t rsa -b 4096</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Problèmes de connexion SSH dûs à des changements d'hôtes<br>
        <strong>⚠️ Attention :</strong> Supprime l'entrée pour l'hôte spécifié de known_hosts<br>
        <strong>✅ Résultat :</strong> Résolution des erreurs "Host key verification failed"<br>
        <strong>🚨 Scénario :</strong> "Erreur Host key changed lors de la connexion SSH"
      </div>
    </div>

    <!-- Serveur SFTP -->
    <h3 id="sftp-server"><i class="fas fa-server"></i> Serveur SFTP</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Installation du serveur SFTP sur Debian
sudo apt update 
sudo apt install vsftpd
sudo systemctl enable vsftpd
sudo systemctl start vsftpd

# Configuration de base
sudo nano /etc/vsftpd.conf
# Ajouter:
listen=YES
anonymous_enable=NO
local_enable=YES
write_enable=YES
chroot_local_user=YES
user_sub_token=$USER
local_root=/home/$USER/ftp
pasv_min_port=40000
pasv_max_port=50000

# Créer un utilisateur et les répertoires
sudo adduser ftpuser
mkdir -p /home/ftpuser/ftp/files
chmod 550 /home/ftpuser/ftp
sudo systemctl restart vsftpd

# Tester la connexion FTP
ftp adresse_ip_serveur</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Mise en place d'un serveur de transfert de fichiers sécurisé<br>
        <strong>⚠️ Sécurité :</strong> Configurer correctement les permissions et le chroot<br>
        <strong>✅ Test de succès :</strong> Connexion FTP réussie depuis un client<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un serveur de fichiers accessible par FTP"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION WINDOWS - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="windows"><i class="fab fa-windows windows-icon"></i> Windows</h2>

    <!-- Routage Windows -->
    <h3 id="routage-windows"><i class="fas fa-route"></i> Routage sous Windows (Permanent)</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 3 secondes</span>
      </div>
      <pre><code># Ajouter une route permanente
route add -p (IP addres de destination) MASK (ex:255.255.255.0) (IP local capable d'aller vers le réseau de destination)

# Afficher la table de routage
route print

# Supprimer une route
route delete (IP destination)</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Accès à des sous-réseaux spécifiques depuis Windows<br>
        <strong>⚠️ Attention :</strong> L'option -p rend la route permanente (redémarrage)<br>
        <strong>✅ Test de succès :</strong> La route apparaît dans `route print`<br>
        <strong>🚨 Scénario :</strong> "Windows ne peut pas joindre un réseau VLAN spécifique"
      </div>
    </div>

    <!-- NAT sous Windows -->
    <h3 id="nat-windows"><i class="fas fa-exchange-alt"></i> NAT sous Windows</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Activer le routage IP
Set-NetIPInterface -InterfaceAlias "Ethernet" -Forwarding Enabled

# Configurer le NAT pour un réseau
New-NetNat -Name "SwitchAccess" -InternalIPInterfaceAddressPrefix "192.168.10.0/24"

# Vérifier le NAT
Get-NetNat
get-NetNatStaticMappingetFirewallRule -DisplayName "Allow_Linux_Subnet" -RemoteAddress 192.168.60.4 -Action Allow
Get-NetNatTransitionConfiguration

# Proxy SSH via Windows
ssh -J user@&lt;IP_Windows&gt; user@&lt;IP_Machine_Adminstrée&gt;

# Tester l'accès SSH
Test-NetConnection 10.10.2.2 -Port 22</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration d'un serveur Windows comme routeur<br>
        <strong>⚠️ Pré-requis :</strong> Rôle "Routing" installé sur Windows Server<br>
        <strong>✅ Test de succès :</strong> Machines du réseau interne accèdent à Internet<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un routeur Windows pour un lab"
      </div>
    </div>

    <!-- Réparation réseau Windows -->
    <h3 id="reparation-reseau-windows"><i class="fas fa-tools"></i> Réparation réseau Windows</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Réparer la pile OSI - problème de connexion internet
netsh int ip reset              # Réinitialiser les interfaces réseau
netsh winsock reset             # Réinitialiser Windows Sockets
ipconfig /release               # Libérer l'adresse IP 
ipconfig /renew                 # Redemander l'adresse IP

# Trouver l'identifiant du client
ipconfig /all                   # Regarder "ID physique" ou "Adresse physique"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Problèmes réseau inexplicables sous Windows<br>
        <strong>🔍 Effet :</strong> Réinitialise complètement la stack réseau Windows<br>
        <strong>⚠️ Attention :</strong> Nécessite un redémarrage pour être totalement efficace<br>
        <strong>🚨 Scénario :</strong> "Windows ne se connecte plus au réseau sans raison apparente"
      </div>
    </div>

    <!-- Partages réseau Windows -->
    <h2><i class="fab fa-windows windows-icon"></i> Partages réseau sous Windows</h2>

    <!-- Montage NFS Windows -->
    <h3 id="nfs-windows"><i class="fas fa-share-alt"></i> Montage de partage NFS</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Activer le client NFS sous Windows
# Sur Windows 10/11 Pro/Enterprise :
# - Ouvrez "Paramètres" → "Applications" → "Fonctionnalités facultatives"
# - Cherchez "Services pour NFS" et installez "Client pour NFS"

# Monter le partage NFS via l'invite de commandes (admin)
mount -o anon 192.168.100.10:/mnt/tank/vmbackups Z:

# Options avancées avec authentification
mount -o user=mon_user,password=mon_mdp 192.168.100.10:/mnt/tank/vmbackups Z:

# Démonter
umount Z:</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Accès à des partages NFS depuis Windows<br>
        <strong>⚠️ Pré-requis :</strong> Fonctionnalité "Client pour NFS" installée<br>
        <strong>✅ Test de succès :</strong> Le lecteur Z: montre le contenu du partage<br>
        <strong>🚨 Scénario :</strong> "Accès à un partage TrueNAS depuis Windows"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION CISCO - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="cisco"><i class="fas fa-network-wired cisco-icon"></i> Cisco</h2>

    <!-- RIP Cisco -->
    <h3 id="rip-cisco"><i class="fas fa-route"></i> RIP Cisco</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 secondes</span>
      </div>
      <pre><code># Afficher les routes RIP
show ip route rip

# Afficher les voisins RIP
show ip rip neighbors

# Désactiver RIP sur toutes les interfaces sauf celles nécessaires
passive-interface default

# Activer RIP sur une interface spécifique
int &lt;Interface&gt;
no passive-interface

# Debug RIP
debug ip rip

# Afficher la configuration RIP
show run | section router rip

# Effacer la table de routage
clear ip route *

# Afficher la base de données RIP
show ip rip database

# Modifier la métrique RIP
int &lt;Interface&gt;
ip rip metric 1

# Désactiver RIP sur une interface
int &lt;Interface&gt;
no ip rip send

# Forcer les broadcasts RIP v2
int &lt;Interface&gt;
ip rip v2-broadcast

# Désactiver le debug
undebug all</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic et configuration du protocole RIP<br>
        <strong>🔍 Monitoring :</strong> `show ip route rip` pour voir les routes apprises<br>
        <strong>⚠️ Attention :</strong> Debug RIP peut générer beaucoup de logs en production<br>
        <strong>🚨 Scénario :</strong> "Les routes RIP ne sont pas propagées correctement"
      </div>
    </div>

    <!-- Multicast Cisco -->
    <h3 id="multicast-cisco"><i class="fas fa-broadcast-tower"></i> Multicast Cisco</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Activer le multicast
configure terminal => ip multicast-routing

# Activer PIM
int &lt;Interface&gt;
ip pim sparse-mode

# Utiliser IGMPv2
ip igmp version 2

# Afficher la table multicast
show ip mroute

# Lister les groupes joints
show ip igmp groups

# Debug IGMP
debug ip igmp

# Lister les interfaces PIM-actives
show ip pim interface

# Vérifier la RPF
show ip rpf 224.0.0.9

# Partager les réseaux locaux connectés
redistribute connected</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration de multicast pour vidéo/audio<br>
        <strong>🔍 Vérification :</strong> `show ip mroute` pour voir les états multicast<br>
        <strong>⚠️ Complexité :</strong> Protocol avancé nécessitant bonne compréhension<br>
        <strong>🚨 Scénario :</strong> "Mise en place de diffusion vidéo multicast"
      </div>
    </div>

    <!-- Configuration SFTP Cisco -->
    <h3 id="sftp-cisco"><i class="fas fa-network-wired cisco-icon"></i> Configuration SFTP Cisco</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Limiter l'accès SSH à une IP spécifique
access-list 10 permit 192.168.1.100
line vty 0 4
 access-class 10 in
exit

# Configurer SFTP
ip ssh server algorithm sftp
ip scp server enable

# Lister les répertoires disponibles
dir flash:
dir usbflash0:
dir nvram:

# Commandes SFTP
sftp admin@&lt;IP&gt;
sftp> ls
sftp> cd flash:
sftp> get running-config
sftp> put mon_fichier.txt</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Transfert sécurisé de fichiers vers/depuis un équipement Cisco<br>
        <strong>⚠️ Sécurité :</strong> Restreindre l'accès SSH aux IP autorisées<br>
        <strong>✅ Avantage :</strong> Alternative sécurisée à TFTP<br>
        <strong>🚨 Scénario :</strong> "Sauvegarde sécurisée de la configuration d'un switch Cisco"
      </div>
    </div>

    <!-- Configuration DHCP Cisco -->
    <h3 id="dhcp-cisco"><i class="fas fa-network-wired cisco-icon"></i> Configuration DHCP Cisco</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Exclure les adresses qui ne doivent pas être distribuées
ip dhcp excluded-address &lt;IP Début&gt; &lt;IP FIN&gt;

# Réserver une adresse IP pour un hôte précis
ip dhcp pool HOST-PC1
host 192.168.10.50 255.255.255.0
client-identifier 0100.1A2B.3C4D.5E  # 01 + MAC address
client-name PC-SERVEUR
default-router 192.168.10.1
dns-server 8.8.8.8 10.10.1.2
domain-name home.lab

# Alternative avec MAC address directement
ip dhcp pool HOST-PC2
hardware-address aaaa.bbbb.cccc
client-name PC-SERVEUR
default-router 192.168.1.1
dns-server 8.8.8.8 8.8.4.4

# Gestion des pools DHCP
clear ip dhcp binding 192.168.x.x        # Supprimer une adresse attribuée
show ip dhcp pool                        # Afficher les adresses attribuées
show ip source binding                   # Afficher les bindings statiques</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration d'un serveur DHCP sur routeur Cisco<br>
        <strong>⚠️ Format important :</strong> client-identifier nécessite "01" + MAC en hexa<br>
        <strong>✅ Test de succès :</strong> Client reçoit l'IP réservée<br>
        <strong>🚨 Scénario :</strong> "Réservation d'IP pour serveurs dans un réseau"
      </div>
    </div>

    <div class="note">
        <p><strong>Format important pour client-identifier :</strong></p>
        <ul>
            <li>Préfixe "01" pour le type Ethernet</li>
            <li>MAC address en format groupe de 4 chiffres hexa</li>
            <li>Exemple : MAC aa:bb:cc:dd:ee:ff → 01aabb.ccddee.ff</li>
        </ul>
    </div>

    <!-- Configuration SNMP Cisco -->
    <h3 id="snmp-cisco"><i class="fas fa-chart-bar"></i> Configuration SNMP Cisco</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Activation SNMP sur Cisco IOS
enable
configure terminal
snmp-server community public RO
snmp-server community private RW
snmp-server host [IP-du-manager] traps version 2c public
snmp-server enable traps
exit
write memory</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration du monitoring SNMP pour GLPI/Zabbix<br>
        <strong>🔍 Vérification :</strong> Test SNMP depuis le serveur de monitoring<br>
        <strong>⚠️ Sécurité :</strong> Changer les communautés public/private en production<br>
        <strong>🚨 Scénario :</strong> "Intégration d'un switch Cisco dans GLPI"
      </div>
    </div>

    <!-- Tables MAC et ARP Cisco -->
    <h3 id="mac-arp-cisco"><i class="fas fa-network-wired cisco-icon"></i> Tables MAC et ARP Cisco</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 5 secondes</span>
      </div>
      <pre><code># Tables ARP
show ip arp                              # Afficher la table ARP complète
show ip arp interface vlan 10           # Filtrer par interface
show ip arp &lt;IP&gt;                        # Rechercher une IP spécifique

# Tables MAC
show mac address-table                   # Afficher toutes les MAC addresses apprises
show mac address-table dynamic           # Afficher les MAC addresses en temps réel
show mac address-table interface gigabitethernet 1/0/5   # Filtrer par interface
show mac address-table vlan 10           # Filtrer par VLAN
show mac address-table address aaaa.bbbb.cccc   # Rechercher une MAC spécifique

# Gestion des entrées
clear mac address-table dynamic interface gigabitethernet 1/0/5   # Vider une entrée MAC

# Monitoring
show interfaces counters                 # Voir les compteurs par interface
show mac address-table dynamic | include Gi1/0/5   # Monitoring en temps réel</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic de connectivité réseau au niveau switch<br>
        <strong>🔍 Utilisation :</strong> Identifier sur quel port une machine est connectée<br>
        <strong>✅ Résultat :</strong> Localisation précise des équipements sur le réseau<br>
        <strong>🚨 Scénario :</strong> "Trouver sur quel port est connectée une machine spécifique"
      </div>
    </div>

    <!-- Commandes Cisco diverses -->
    <h3 id="cisco-divers"><i class="fas fa-network-wired cisco-icon"></i> Commandes Cisco diverses</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Afficher les interfaces VLAN
show ip int bri | include vlan

# Afficher les détails des VLANs
show vlan brief

# Afficher la table ARP
show arp

# Afficher les listes d'accès
show access-lists

# Vérifier la connectivité physique
show cdp neighbors

# Filtrer la table ARP
show arp | inculde &lt;IP&gt;

# Afficher le switch root
show spanning-tree root

# Afficher une route spécifique
show ip route 224.0.0.0/24

# Configurer un tunnel
int Tunnel0
tunnel source &lt;Interface&gt;
tunnel destination &lt;IP de l'autre équipement ou Tunnel sur l'autre&gt; 
keepalive
ip address &lt;IP&gt; &lt;MASK&gt;
no ip split-horizon
ip rip advertise &lt;Network&gt;
no shut</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Commandes générales pour diagnostic et configuration<br>
        <strong>🔍 Utilisation :</strong> Vérification rapide de l'état des interfaces et VLANs<br>
        <strong>✅ Résultat :</strong> Vue d'ensemble de l'état du switch/routeur<br>
        <strong>🚨 Scénario :</strong> "Diagnostic général d'un équipement Cisco"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION POWERSHELL - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="powershell"><i class="fas fa-terminal powershell-icon"></i> PowerShell</h2>

    <!-- Administration Windows Server -->
    <h3 id="admin-windows-server"><i class="fas fa-server"></i> Administration Windows Server avec PowerShell</h3>

    <!-- Installation et configuration -->
    <h4 id="ps-install-config"><i class="fas fa-download"></i> 1. Installation et configuration initiale</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag production">PRODUCTION</span>
        <span class="tag">⏱️ 10 minutes</span>
      </div>
      <pre><code># Vérifier la version de Windows
Get-ComputerInfo | Select-Object WindowsProductName, WindowsVersion, OsHardwareAbstractionLayer

# Activer le rôle de serveur (ex: AD DS)
Install-WindowsFeature AD-Domain-Services -IncludeManagementTools

# Configurer un nouveau contrôleur de domaine
Install-ADDSForest -DomainName "corp.example.com" -DomainNetbiosName "CORP" -InstallDns

# Redémarrer après installation
Restart-Computer -Force</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Installation initiale d'un serveur Windows<br>
        <strong>⚠️ Attention :</strong> Redémarrage nécessaire après installation AD DS<br>
        <strong>✅ Test de succès :</strong> Serveur rejoint le domaine et services démarrés<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un nouveau contrôleur de domaine"
      </div>
    </div>

    <!-- Gestion utilisateurs et groupes AD -->
    <h4 id="ps-ad-users"><i class="fas fa-users"></i> 2. Gestion des utilisateurs et groupes AD</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Créer un nouvel utilisateur
New-ADUser -Name "Jean Dupont" -GivenName "Jean" -Surname "Dupont" `
            -SamAccountName "jdupont" -UserPrincipalName "jdupont@corp.example.com" `
            -Path "OU=Utilisateurs,DC=corp,DC=example,DC=com" -AccountPassword (ConvertTo-SecureString "P@ssw0rd" -AsPlainText -Force) `
            -Enabled $true

# Modifier un utilisateur
Set-ADUser -Identity jdupont -Office "Paris" -Department "IT" -Title "Administrateur Système"

# Créer un groupe et ajouter des membres
New-ADGroup -Name "Admins IT" -GroupScope Global -Path "OU=Groupes,DC=corp,DC=example,DC=com"
Add-ADGroupMember -Identity "Admins IT" -Members jdupont

# Lister tous les utilisateurs d'une OU
Get-ADUser -Filter * -SearchBase "OU=Utilisateurs,DC=corp,DC=example,DC=com" | Select Name,SamAccountName</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion automatisée des utilisateurs Active Directory<br>
        <strong>⚠️ Sécurité :</strong> Éviter les mots de passe en clair dans les scripts<br>
        <strong>✅ Avantage :</strong> Automatisation de la création de comptes en masse<br>
        <strong>🚨 Scénario :</strong> "Création de 50 comptes utilisateurs pour un nouveau service"
      </div>
    </div>

    <!-- Gestion stratégies de groupe -->
    <h4 id="ps-gpo"><i class="fas fa-cogs"></i> 3. Gestion des stratégies de groupe (GPO)</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Créer une nouvelle GPO
New-GPO -Name "Verrouillage Station" -Comment "Stratégie de sécurité de base"

# Lier une GPO à une OU
New-GPLink -Name "Verrouillage Station" -Target "OU=Utilisateurs,DC=corp,DC=example,DC=com"

# Modifier une GPO
Set-GPRegistryValue -Name "Verrouillage Station" -Key "HKLM\Software\Microsoft\Windows\CurrentVersion\Policies\System" `
                    -ValueName "DisableTaskMgr" -Type DWord -Value 1

# Forcer la mise à jour des GPO sur un client
Invoke-GPUpdate -Computer "CLIENT01" -Force</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Automatisation de la gestion des GPO<br>
        <strong>⚠️ Test :</strong> Toujours tester les GPO sur un OU de test d'abord<br>
        <strong>✅ Avantage :</strong> Déploiement cohérent des politiques de sécurité<br>
        <strong>🚨 Scénario :</strong> "Déploiement de politiques de sécurité sur tous les postes"
      </div>
    </div>

    <!-- Gestion du stockage -->
    <h4 id="ps-storage"><i class="fas fa-database"></i> 4. Gestion du stockage</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Lister les disques disponibles
Get-Disk

# Initialiser un nouveau disque
Initialize-Disk -Number 1 -PartitionStyle GPT

# Créer une partition
New-Partition -DiskNumber 1 -UseMaximumSize -DriveLetter D

# Formater le volume
Format-Volume -DriveLetter D -FileSystem NTFS -NewFileSystemLabel "Données" -Confirm:$false

# Configurer un quota de disque
New-FsrmQuota -Path "D:\Partage" -Size 5GB -Description "Limite 5GB par utilisateur"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des disques et partitions Windows<br>
        <strong>⚠️ Attention :</strong> Le formatage efface toutes les données<br>
        <strong>✅ Avantage :</strong> Automatisation de l'ajout de stockage<br>
        <strong>🚨 Scénario :</strong> "Ajout d'un nouveau disque à un serveur de fichiers"
      </div>
    </div>

    <!-- Surveillance et maintenance -->
    <h4 id="ps-monitoring"><i class="fas fa-chart-line"></i> 5. Surveillance et maintenance</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Vérifier l'espace disque
Get-Volume | Select DriveLetter,FileSystemLabel,SizeRemaining,Size

# Analyser les événements système
Get-EventLog -LogName System -Newest 50 | Where-Object {$_.EntryType -eq "Error"}

# Planifier une tâche
$action = New-ScheduledTaskAction -Execute "powershell.exe" -Argument "-File D:\scripts\cleanup.ps1"
$trigger = New-ScheduledTaskTrigger -Daily -At 2am
Register-ScheduledTask -TaskName "Nettoyage nocturne" -Action $action -Trigger $trigger -User "SYSTEM"

# Vérifier les services critiques
Get-Service | Where-Object {$_.Status -ne "Running" -and $_.StartType -eq "Automatic"}</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Monitoring quotidien des serveurs Windows<br>
        <strong>🔍 Routine :</strong> À exécuter régulièrement pour la maintenance proactive<br>
        <strong>✅ Avantage :</strong> Détection précoce des problèmes<br>
        <strong>🚨 Scénario :</strong> "Vérification quotidienne de l'état des serveurs"
      </div>
    </div>

    <!-- Administration DHCP et DNS -->
    <h3 id="ps-dhcp-dns"><i class="fas fa-terminal powershell-icon"></i> Administration DHCP et DNS sous Windows Server</h3>

    <!-- Installation rôles -->
    <h4 id="ps-roles-install"><i class="fas fa-network-wired"></i> 1. Installation des rôles DHCP et DNS</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag production">PRODUCTION</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Installer les rôles DHCP et DNS
Install-WindowsFeature DHCP,DNS -IncludeManagementTools

# Configurer le serveur DHCP après installation
Add-DhcpServerInDC -DnsName "dc1.corp.example.com" -IPAddress 192.168.1.1

# Redémarrer si nécessaire
Restart-Computer -Force</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Installation des services réseau sur Windows Server<br>
        <strong>⚠️ Attention :</strong> Redémarrage possible après installation<br>
        <strong>✅ Test de succès :</strong> Services DHCP et DNS démarrés et fonctionnels<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un serveur avec services réseau"
      </div>
    </div>

    <!-- Configuration DHCP -->
    <h4 id="ps-dhcp-config"><i class="fas fa-dhcp"></i> 2. Configuration DHCP de base</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Créer une étendue DHCP
Add-DhcpServerv4Scope -Name "Réseau Principal" `
                      -StartRange 192.168.1.100 -EndRange 192.168.1.200 `
                      -SubnetMask 255.255.255.0 -State Active

# Configurer les options de l'étendue
Set-DhcpServerv4OptionValue -ScopeId 192.168.1.0 `
                           -DnsServer 192.168.1.1, 192.168.1.2 `
                           -Router 192.168.1.1 `
                           -DnsDomain "corp.example.com"

# Activer les adresses MAC réservées
Add-DhcpServerv4Reservation -ScopeId 192.168.1.0 `
                           -IPAddress 192.168.1.50 `
                           -ClientId "01-23-45-67-89-AB" `
                           -Description "Serveur d'impression"

# Configurer les plages d'exclusion
Add-DhcpServerv4ExclusionRange -ScopeId 192.168.1.0 `
                              -StartRange 192.168.1.1 `
                              -EndRange 192.168.1.15</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration initiale d'un serveur DHCP<br>
        <strong>⚠️ Planification :</strong> Bien définir les plages d'IP avant configuration<br>
        <strong>✅ Test de succès :</strong> Client reçoit une IP de la plage configurée<br>
        <strong>🚨 Scénario :</strong> "Mise en service d'un nouveau serveur DHCP"
      </div>
    </div>

    <!-- Gestion avancée DHCP -->
    <h4 id="ps-dhcp-advanced"><i class="fas fa-tasks"></i> 3. Gestion avancée DHCP</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Afficher toutes les étendues DHCP
Get-DhcpServerv4Scope

# Afficher les baux actifs
Get-DhcpServerv4Lease -ScopeId 192.168.1.0

# Supprimer un bail spécifique
Remove-DhcpServerv4Lease -IPAddress 192.168.1.105

# Sauvegarder la configuration DHCP
Backup-DhcpServer -Path "C:\DHCP_Backup\" -Force

# Restaurer la configuration DHCP
Restore-DhcpServer -Path "C:\DHCP_Backup\" -Force

# Migrer un serveur DHCP
Export-DhcpServer -File "C:\DHCP_Export.xml" -Leases
Import-DhcpServer -File "C:\DHCP_Export.xml" -Leases</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Maintenance et gestion courante du DHCP<br>
        <strong>🔍 Routine :</strong> Sauvegarder régulièrement la configuration<br>
        <strong>✅ Bonne pratique :</strong> Avoir des sauvegardes avant modifications<br>
        <strong>🚨 Scénario :</strong> "Migration d'un serveur DHCP vers un nouveau serveur"
      </div>
    </div>

    <!-- Configuration DNS -->
    <h4 id="ps-dns-config"><i class="fas fa-globe"></i> 4. Configuration DNS de base</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Créer une zone DNS principale
Add-DnsServerPrimaryZone -Name "corp.example.com" `
                        -ZoneFile "corp.example.com.dns" `
                        -DynamicUpdate Secure

# Créer une zone DNS inverse
Add-DnsServerPrimaryZone -NetworkId "192.168.1.0/24" `
                        -ZoneFile "1.168.192.in-addr.arpa.dns"

# Ajouter un enregistrement A
Add-DnsServerResourceRecordA -Name "serveur1" `
                           -ZoneName "corp.example.com" `
                           -IPv4Address "192.168.1.10" `
                           -CreatePtr

# Ajouter un enregistrement CNAME
Add-DnsServerResourceRecordCName -Name "www" `
                               -HostNameAlias "serveur1.corp.example.com" `
                               -ZoneName "corp.example.com"

# Ajouter un enregistrement MX
Add-DnsServerResourceRecordMX -Preference 10 `
                             -Name "@" `
                             -MailExchange "mail.corp.example.com" `
                             -ZoneName "corp.example.com"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration initiale d'un serveur DNS<br>
        <strong>⚠️ Planification :</strong> Bien structurer la zone DNS avant création<br>
        <strong>✅ Test de succès :</strong> Résolution DNS fonctionnelle pour les enregistrements<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un serveur DNS interne d'entreprise"
      </div>
    </div>

    <!-- Gestion avancée DNS -->
    <h4 id="ps-dns-advanced"><i class="fas fa-cog"></i> 5. Gestion avancée DNS</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Activer le nettoyage automatique
Set-DnsServerScavenging -ScavengingState $true `
                       -RefreshInterval 7.00:00:00 `
                       -NoRefreshInterval 7.00:00:00 `
                       -ApplyOnAllZones

# Forcer le nettoyage immédiat
Start-DnsServerScavenging -Force

# Configurer le transfert de zone
Set-DnsServerForwarder -IPAddress "8.8.8.8","8.8.4.4" -PassThru

# Configurer la réplication DNS entre contrôleurs de domaine
Set-DnsServerDirectoryPartition -Name "DomainDnsZones.corp.example.com" `
                               -ReplicationScope "Domain"

# Exporter la configuration DNS
Export-DnsServerZone -Name "corp.example.com" -FileName "C:\DNS_Backup\corp.example.com.dns"

# Importer une zone DNS
Import-DnsServerZone -Name "corp.example.com" -FileName "C:\DNS_Backup\corp.example.com.dns"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Maintenance et optimisation du serveur DNS<br>
        <strong>🔍 Important :</strong> Le nettoyage automatique prévient la pollution DNS<br>
        <strong>✅ Bonne pratique :</strong> Sauvegarder les zones avant modifications majeures<br>
        <strong>🚨 Scénario :</strong> "Nettoyage d'une zone DNS polluée par des enregistrements obsolètes"
      </div>
    </div>

    <!-- Surveillance et dépannage -->
    <h4 id="ps-dns-monitoring"><i class="fas fa-search"></i> 6. Surveillance et dépannage</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Vérifier l'état du service DHCP
Get-Service -Name DHCPServer | Select-Object Name,Status,StartType

# Analyser les événements DHCP
Get-EventLog -LogName "System" -Source "DHCPServer" -Newest 50

# Tester la résolution DNS
Resolve-DnsName -Name "serveur1.corp.example.com" -Type A

# Effectuer une requête DNS détaillée
nslookup
> server 192.168.1.1
> set type=MX
> corp.example.com
> exit

# Vérifier la réplication DNS
Repadmin /showrepl
Repadmin /syncall /AdeP

# Capturer le trafic DHCP/DNS
netsh trace start scenario=NetConnection capture=yes tracefile=C:\traces\network.etl
netsh trace stop</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic de problèmes DHCP/DNS<br>
        <strong>🔍 Méthodologie :</strong> Vérifier services → logs → résolution → réplication<br>
        <strong>✅ Résultat :</strong> Identification précise de l'origine du problème<br>
        <strong>🚨 Scénario :</strong> "Les clients ne reçoivent pas d'IP ou ne résolvent pas les noms"
      </div>
    </div>

    <!-- Sécurité DHCP et DNS -->
    <h4 id="ps-dhcp-dns-security"><i class="fas fa-shield-alt"></i> 7. Sécurité DHCP et DNS</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Configurer les options de sécurité DHCP
Set-DhcpServerv4DnsSetting -DynamicUpdates "Always" `
                          -DeleteDnsRRonLeaseExpiry $true `
                          -UpdateDnsRRForOlderClients $true

# Activer DNSSEC pour une zone
Set-DnsServerZoneSigning -Name "corp.example.com" -Sign

# Configurer le filtrage DNS
Add-DnsServerQueryResolutionPolicy -Name "BlockMaliciousDomains" `
                                 -Action DENY `
                                 -FQDN "EQ,*.malicious.com" `
                                 -PassThru

# Restreindre les mises à jour DNS dynamiques
Set-DnsServerPrimaryZone -Name "corp.example.com" `
                        -DynamicUpdate Secure</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Renforcement de la sécurité des services réseau<br>
        <strong>⚠️ Test :</strong> Tester soigneusement avant déploiement en production<br>
        <strong>✅ Avantage :</strong> Protection contre les attaques et abus<br>
        <strong>🚨 Scénario :</strong> "Sécurisation des services DHCP/DNS contre les attaques"
      </div>
    </div>

    <!-- Scripts utiles -->
    <h4 id="ps-scripts"><i class="fas fa-code"></i> 8. Scripts utiles</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Script pour vérifier les baux DHCP expirés
$ExpiredLeases = Get-DhcpServerv4Lease -ScopeId 192.168.1.0 | Where-Object {$_.LeaseExpiryTime -lt (Get-Date)}
$ExpiredLeases | Export-Csv -Path "C:\Reports\ExpiredLeases.csv" -NoTypeInformation

# Script pour auditer les enregistrements DNS
$DNSRecords = Get-DnsServerResourceRecord -ZoneName "corp.example.com" -RRType "A"
$DNSRecords | Select-Object HostName,RecordType,Timestamp | Out-GridView

# Script pour migrer des plages DHCP
$OldScope = Get-DhcpServerv4Scope -ScopeId 192.168.0.0
Add-DhcpServerv4Scope -Name $OldScope.Name `
                     -StartRange 192.168.1.100 `
                     -EndRange 192.168.1.200 `
                     -SubnetMask $OldScope.SubnetMask
Get-DhcpServerv4OptionValue -ScopeId $OldScope.ScopeId | ForEach-Object {
    Set-DhcpServerv4OptionValue -ScopeId 192.168.1.0 -OptionId $_.OptionId -Value $_.Value
}</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Automatisation des tâches de maintenance courantes<br>
        <strong>🔍 Utilisation :</strong> Planifier l'exécution régulière de ces scripts<br>
        <strong>✅ Avantage :</strong> Gain de temps et cohérence des opérations<br>
        <strong>🚨 Scénario :</strong> "Audit mensuel des services réseau"
      </div>
    </div>

    <!-- SECTION ADMINISTRATION LINUX SERVER -->
    <h2 id="administration"><i class="fab fa-linux linux-icon"></i> Administration Linux Server</h2>

    <!-- Gestion utilisateurs et groupes -->
    <h3 id="admin-linux-users"><i class="fas fa-users"></i> 1. Gestion des utilisateurs et groupes</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Créer un nouvel utilisateur
sudo useradd -m -s /bin/bash jdupont
sudo passwd jdupont

# Modifier un utilisateur
sudo usermod -aG sudo jdupont  # Ajouter aux sudoers
sudo usermod -d /new/home/jdupont jdupont  # Changer le répertoire home

# Créer un groupe
sudo groupadd admins_it

# Ajouter un utilisateur à un groupe
sudo usermod -aG admins_it jdupont

# Lister tous les utilisateurs
cut -d: -f1 /etc/passwd

# Vérifier les sudoers
sudo grep -Po '^sudo.+:\K.*$' /etc/group

# Trouver l'identifiant du client (MAC address)
ip link show                    # Regarder "link/ether"
cat /sys/class/net/eth0/address</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des comptes utilisateurs sur serveur Linux<br>
        <strong>⚠️ Sécurité :</strong> Vérifier les privilèges accordés aux utilisateurs<br>
        <strong>✅ Bonne pratique :</strong> Utiliser des groupes pour la gestion des permissions<br>
        <strong>🚨 Scénario :</strong> "Création de comptes pour une nouvelle équipe"
      </div>
    </div>

    <!-- Gestion des permissions -->
    <h3 id="admin-linux-permissions"><i class="fas fa-lock"></i> 2. Gestion des permissions</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Changer le propriétaire d'un fichier
sudo chown jdupont:admins_it /chemin/du/fichier

# Changer les permissions (chmod en octal)
sudo chmod 750 /chemin/du/fichier  # rwx pour owner, r-x pour group, --- pour others

# Changer les permissions (chmod symbolique)
sudo chmod u=rwx,g=rx,o= /chemin/du/fichier

# Définir le bit SUID
sudo chmod u+s /chemin/du/fichier

# Définir le sticky bit sur un répertoire
sudo chmod +t /chemin/du/repertoire</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration des permissions de fichiers et répertoires<br>
        <strong>⚠️ Sécurité :</strong> SUID peut être dangereux si mal utilisé<br>
        <strong>✅ Bonne pratique :</strong> Principe du moindre privilège<br>
        <strong>🚨 Scénario :</strong> "Sécurisation d'un répertoire partagé entre utilisateurs"
      </div>
    </div>

    <!-- Gestion des paquets -->
    <h3 id="admin-linux-packages"><i class="fas fa-box-open"></i> 3. Gestion des paquets</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag production">PRODUCTION</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Debian/Ubuntu
sudo apt update && sudo apt upgrade  # Mettre à jour tous les paquets
sudo apt install apache2            # Installer un paquet
sudo apt remove apache2             # Désinstaller un paquet
sudo apt autoremove                 # Nettoyer les paquets inutiles

# RHEL/CentOS
sudo yum update                     # Mettre à jour tous les paquets
sudo yum install httpd              # Installer un paquet
sudo yum remove httpd               # Désinstaller un paquet
sudo yum clean all                  # Nettoyer le cache</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Maintenance des paquets logiciels<br>
        <strong>⚠️ Production :</strong> Tester les mises à jour en environnement de test d'abord<br>
        <strong>✅ Routine :</strong> Mettre à jour régulièrement pour la sécurité<br>
        <strong>🚨 Scénario :</strong> "Mise à jour de sécurité mensuelle des serveurs"
      </div>
    </div>

    <!-- Gestion des services -->
    <h3 id="admin-linux-services"><i class="fas fa-cogs"></i> 4. Gestion des services</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag production">PRODUCTION</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Systemd (récent)
sudo systemctl start apache2        # Démarrer un service
sudo systemctl stop apache2         # Arrêter un service
sudo systemctl restart apache2      # Redémarrer un service
sudo systemctl enable apache2       # Activer au démarrage
sudo systemctl status apache2       # Vérifier l'état

# SysVinit (ancien)
sudo service apache2 start          # Démarrer un service
sudo service apache2 stop           # Arrêter un service
sudo service apache2 restart        # Redémarrer un service
sudo update-rc.d apache2 defaults   # Activer au démarrage</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des services système<br>
        <strong>🔍 Diagnostic :</strong> `systemctl status` pour voir les erreurs<br>
        <strong>✅ Bonne pratique :</strong> Tester le service après redémarrage<br>
        <strong>🚨 Scénario :</strong> "Redémarrage d'un service après modification de configuration"
      </div>
    </div>

    <!-- Surveillance et maintenance -->
    <h3 id="admin-linux-monitoring"><i class="fas fa-chart-line"></i> 5. Surveillance et maintenance</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Espace disque
df -h                              # Afficher l'espace disque
du -sh /chemin                     # Taille d'un répertoire

# Mémoire
free -m                            # Utilisation mémoire
top                                # Moniteur d'activité
htop                               # Version améliorée de top

# Processus
ps aux                             # Lister tous les processus
pstree                             # Arbre des processus
kill -9 PID                        # Tuer un processus

# Journaux système
sudo journalctl -xe                # Afficher les logs systemd
sudo tail -f /var/log/syslog       # Suivre les logs en temps réel
sudo grep "error" /var/log/syslog  # Filtrer les erreurs</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Surveillance quotidienne de l'état du système<br>
        <strong>🔍 Routine :</strong> Vérifier régulièrement espace disque et mémoire<br>
        <strong>✅ Alertes :</strong> Configurer des alertes pour espace disque critique<br>
        <strong>🚨 Scénario :</strong> "Investigation de problèmes de performance"
      </div>
    </div>

    <!-- Sécurité et réseau -->
    <h3 id="admin-linux-security"><i class="fas fa-shield-alt"></i> 6. Sécurité et réseau</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Pare-feu (UFW - Ubuntu)
sudo ufw enable                    # Activer le pare-feu
sudo ufw allow 22/tcp              # Autoriser le port SSH
sudo ufw deny 23/tcp               # Bloquer le port Telnet
sudo ufw status verbose            # Vérifier les règles

# Pare-feu (firewalld - RHEL/CentOS)
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --reload

# SSH
sudo ssh-keygen -t rsa -b 4096     # Générer une paire de clés
sudo nano /etc/ssh/sshd_config     # Configurer le serveur SSH
sudo systemctl restart sshd        # Redémarrer SSH après modification

# Analyse de sécurité
sudo lynis audit system            # Audit de sécurité
sudo chkrootkit                   # Vérifier les rootkits
sudo rkhunter --checkall          # Analyse complète du système</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Renforcement de la sécurité du serveur<br>
        <strong>⚠️ Test :</strong> Tester les règles firewall avant déploiement<br>
        <strong>✅ Bonne pratique :</strong> Désactiver l'authentification par mot de passe SSH<br>
        <strong>🚨 Scénario :</strong> "Sécurisation d'un nouveau serveur exposé sur Internet"
      </div>
    </div>

    <!-- Sauvegarde et restauration -->
    <h3 id="admin-linux-backup"><i class="fas fa-save"></i> 7. Sauvegarde et restauration</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag production">PRODUCTION</span>
        <span class="tag">⏱️ Variable</span>
      </div>
      <pre><code># Sauvegarde avec tar
sudo tar -czvf backup-$(date +%F).tar.gz /dossier/a/sauvegarder

# Sauvegarde incrémentielle avec rsync
sudo rsync -av --delete --link-dest=/previous/backup /source /destination/backup-$(date +%F)

# Sauvegarde MySQL
sudo mysqldump -u root -p --all-databases > full_backup.sql

# Sauvegarde PostgreSQL
sudo pg_dumpall -U postgres > full_backup.sql

# Planifier des sauvegardes avec cron
(crontab -l 2>/dev/null; echo "0 2 * * * /chemin/vers/script_backup.sh") | crontab -</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Mise en place de stratégies de sauvegarde<br>
        <strong>⚠️ Important :</strong> Tester régulièrement la restauration des sauvegardes<br>
        <strong>✅ Stratégie :</strong> Règle 3-2-1 (3 copies, 2 supports, 1 hors-site)<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un plan de sauvegarde automatisé"
      </div>
    </div>

    <!-- Scripting avancé -->
    <h3 id="admin-linux-scripting"><i class="fas fa-code"></i> 8. Scripting avancé</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag automation">AUTOMATISATION</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code>#!/bin/bash
# Exemple de script de surveillance

# Variables
THRESHOLD=90
EMAIL="admin@example.com"

# Vérification espace disque
DISK_USAGE=$(df / | awk '{print $5}' | tail -1 | cut -d'%' -f1)

if [ $DISK_USAGE -gt $THRESHOLD ]; then
    echo "Alerte : Espace disque critique sur $(hostname)" | mail -s "Alerte disque" $EMAIL
fi

# Vérification mémoire
MEM_FREE=$(free -m | awk '/Mem:/ {print $4}')
if [ $MEM_FREE -lt 100 ]; then
    echo "Alerte : Mémoire faible sur $(hostname)" | mail -s "Alerte mémoire" $EMAIL
fi</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Automatisation des tâches d'administration<br>
        <strong>⚠️ Test :</strong> Tester les scripts en environnement de test d'abord<br>
        <strong>✅ Avantage :</strong> Gain de temps et réduction d'erreurs humaines<br>
        <strong>🚨 Scénario :</strong> "Création de scripts de monitoring personnalisés"
      </div>
    </div>

    <!-- Administration GLPI -->
    <h3 id="admin-linux-glpi"><i class="fas fa-tools"></i> 9. Administration GLPI</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 10 minutes</span>
      </div>
      <pre><code># Vérification configuration base de données GLPI
cat /var/www/html/glpi/config/config_db.php

# Ou avec un format plus lisible
grep -E "(dbhost|dbuser|dbpassword|dbdefault)" /var/www/html/glpi/config/config_db.php

# Version détaillée
php -r '
    include "/var/www/html/glpi/config/config_db.php";
    echo "Hôte: " . $DB->dbhost . "\n";
    echo "Base: " . $DB->dbdefault . "\n";
    echo "Utilisateur: " . $DB->dbuser . "\n";
    echo "Mot de passe: " . $DB->dbpassword . "\n";
'

# Connexion MySQL et exploration
mysql -u root -p -e "SHOW DATABASES;"
mysql -u root -p -e "USE glpi_db; SHOW TABLES;"

# Voir les utilisateurs MySQL
mysql -u root -p -e "SELECT user, host FROM mysql.user;"

# Voir les privilèges de l'utilisateur GLPI
mysql -u root -p -e "SHOW GRANTS FOR 'glpi_admin'@'localhost';"

# Console GLPI
cd /var/www/html/glpi
php bin/console glpi:system:status
php bin/console glpi:database:check

# Donner droits super-admin
mysql -u glpi_admin -p'34PenetrationTest' -h localhost glpi_db -e "
UPDATE glpi_profiles_users 
SET profiles_id = 4 
WHERE users_id = (SELECT id FROM glpi_users WHERE name = 'glpi_admin');"

# Si l'utilisateur n'a aucun profil, l'ajouter :
mysql -u glpi_admin -p'34PenetrationTest' -h localhost glpi_db -e "
INSERT INTO glpi_profiles_users (users_id, profiles_id, entities_id, is_recursive, is_dynamic) 
VALUES (
  (SELECT id FROM glpi_users WHERE name = 'glpi_admin'), 
  4, 0, 1, 0
);"

# Vérification :
mysql -u glpi_admin -p'34PenetrationTest' -h localhost glpi_db -e "
SELECT u.name, p.name as profile 
FROM glpi_users u 
JOIN glpi_profiles_users pu ON u.id = pu.users_id 
JOIN glpi_profiles p ON pu.profiles_id = p.id 
WHERE u.name = 'glpi_admin';"

# Chercher les fichiers de configuration
sudo find / -name "config_db.php" 2>/dev/null

# Commandes MySQL GLPI
mysql -u root -p glpi_db << 'EOF'
-- Désactiver vérification versions
UPDATE glpi_configs SET value = '0' WHERE name = 'founded_new_version';
UPDATE glpi_configs SET value = '0' WHERE name = 'checkversion';

-- Réactiver vérification versions
UPDATE glpi_configs SET value = '1' WHERE name = 'checkversion';
UPDATE glpi_configs SET value = '' WHERE name = 'founded_new_version';

-- Vérification configuration
SELECT name, value FROM glpi_configs WHERE name IN ('founded_new_version', 'checkversion');

-- Créer configuration manquante
INSERT INTO glpi_configs (name, value, context) 
VALUES ('checkversion', '1', 'core')
ON DUPLICATE KEY UPDATE value = '1';
EOF

# Fuseaux horaires GLPI
# Activation fuseaux horaires
cd /var/www/html/glpi
php bin/console database:enable_timezones

# Vérification
php bin/console database:check_timezones

# Configuration MySQL pour fuseaux horaires
mysql -u root -p << 'EOF'
GRANT SELECT ON mysql.time_zone_name TO 'glpi_admin'@'localhost';
GRANT SELECT ON mysql.time_zone TO 'glpi_admin'@'localhost';
GRANT SELECT ON mysql.time_zone_leap_second TO 'glpi_admin'@'localhost';
GRANT SELECT ON mysql.time_zone_transition TO 'glpi_admin'@'localhost';
GRANT SELECT ON mysql.time_zone_transition_type TO 'glpi_admin'@'localhost';
FLUSH PRIVILEGES;
EOF

# Chargement données fuseaux horaires
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql

# Agent GLPI Windows
# Arrêt service GLPI Agent (Windows)
echo "# Sur Windows (CMD admin) :"
echo "net stop 'GLPI Agent'"
echo "timeout /t 30"
echo "net start 'GLPI Agent'"

# Configuration agent GLPI (fichier agent.cfg)
cat > "C:\Program Files\GLPI-Agent\agent.cfg" << 'EOF'
# Désactiver scans réseau
modules = inventory,deploy,collect
no-task = netdiscovery,netinventory

[netdiscovery]
enabled = 0

[netinventory]
enabled = 0

[network]
delay = 0
no-task = 1
EOF

# Réinitialisation GLPI
# Réinitialisation via console
cd /var/www/html/glpi
php bin/console glpi:system:clear_cache
php bin/console glpi:database:configure \
    --db-host=localhost \
    --db-name=glpi_db \
    --db-user=glpi_admin \
    --db-password=34PenetrationTest \
    --reconfigure

# Réinstallation sans perte données
php bin/console glpi:database:install \
    --db-host=localhost \
    --db-name=glpi_db \
    --db-user=glpi_admin \
    --db-password=34PenetrationTest \
    --force

# Sauvegardes GLPI
# Sauvegarde base données
BACKUP_DIR="/root/glpi_backup_$(date +%Y%m%d_%H%M%S)"
mkdir -p $BACKUP_DIR
mysqldump -u root -p glpi_db > "$BACKUP_DIR/glpi_db_complete.sql"
mysqldump -u root -p --no-create-info glpi_db > "$BACKUP_DIR/glpi_db_data_only.sql"
mysqldump -u root -p --no-data glpi_db > "$BACKUP_DIR/glpi_db_structure_only.sql"

# Sauvegarde fichiers configuration
cp /var/www/html/glpi/config/config_db.php "$BACKUP_DIR/"
cp /var/www/html/glpi/config/local_define.php "$BACKUP_DIR/" 2>/dev/null || true

# Sauvegarde fichiers GLPI
tar -czf "$BACKUP_DIR/glpi_files.tar.gz" -C /var/www/html/glpi/files . 2>/dev/null || true

# Vérifications GLPI
# Statut services
systemctl status snmpd
systemctl status apache2
systemctl status mysql

# Test GLPI
curl -I http://localhost/glpi
php bin/console glpi:system:status

# Logs
tail -f /var/log/syslog | grep snmp
tail -f /var/log/apache2/error.log</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Administration et dépannage de GLPI<br>
        <strong>⚠️ Sauvegarde :</strong> Toujours sauvegarder avant modifications<br>
        <strong>✅ Monitoring :</strong> Vérifier régulièrement l'état des services<br>
        <strong>🚨 Scénario :</strong> "Problèmes d'accès ou de performance avec GLPI"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION RÉSEAU - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="reseau"><i class="fas fa-wifi network-icon"></i> Réseau</h2>

    <!-- Commandes Réseau PowerShell -->
    <h3 id="reseau-powershell"><i class="fas fa-network-wired network-icon"></i> Commandes Réseau PowerShell (Windows)</h3>

    <!-- Configuration réseau de base PowerShell -->
    <h4 id="ps-network-basic"><i class="fas fa-ethernet"></i> 1. Configuration réseau de base</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Lister toutes les interfaces réseau
Get-NetAdapter | Select Name, InterfaceDescription, Status

# Activer/Désactiver une interface
Enable-NetAdapter -Name "Ethernet" -Confirm:$false
Disable-NetAdapter -Name "Wi-Fi" -Confirm:$false

# Configurer une adresse IP statique
New-NetIPAddress -InterfaceAlias "Ethernet" -IPAddress 192.168.1.100 `
                -PrefixLength 24 -DefaultGateway 192.168.1.1

# Configurer les serveurs DNS
Set-DnsClientServerAddress -InterfaceAlias "Ethernet" `
                        -ServerAddresses ("8.8.8.8", "8.8.4.4")</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration réseau sous Windows via PowerShell<br>
        <strong>⚠️ Test :</strong> Vérifier la connectivité après modifications<br>
        <strong>✅ Avantage :</strong> Automatisation possible via scripts<br>
        <strong>🚨 Scénario :</strong> "Configuration automatisée de postes Windows"
      </div>
    </div>

    <!-- Diagnostic réseau PowerShell -->
    <h4 id="ps-network-diagnostic"><i class="fas fa-search"></i> 2. Diagnostic réseau</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Test de connectivité
Test-NetConnection -ComputerName google.com -Port 80

# Traceroute amélioré
Test-NetConnection -ComputerName google.com -TraceRoute

# Analyse des ports ouverts
Get-NetTCPConnection -State Listen | Sort-Object LocalPort | Format-Table

# Vérifier la configuration IP détaillée
Get-NetIPConfiguration -Detailed

# Capturer des paquets (nécessite Npcap)
# Installer d'abord : choco install npcap
New-NetEventSession -Name "CaptureSession" -CaptureMode SaveToFile -LocalFilePath "C:\capture.etl"
Add-NetEventPacketCaptureProvider -SessionName "CaptureSession"
Start-NetEventSession -Name "CaptureSession"
Stop-NetEventSession -Name "CaptureSession"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic réseau avancé sous Windows<br>
        <strong>🔍 Puissant :</strong> Alternative aux outils traditionnels<br>
        <strong>✅ Intégration :</strong> Parfait pour l'automatisation<br>
        <strong>🚨 Scénario :</strong> "Diagnostic complet de connectivité Windows"
      </div>
    </div>

    <!-- Pare-feu avancé PowerShell -->
    <h4 id="ps-firewall"><i class="fas fa-shield-alt"></i> 3. Pare-feu avancé</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Lister toutes les règles
Get-NetFirewallRule | Where-Object {$_.Enabled -eq "True"} | Format-Table Name,DisplayName

# Créer une nouvelle règle
New-NetFirewallRule -Name "AllowWeb" -DisplayName "HTTP/HTTPS Access" `
                   -Direction Inbound -Protocol TCP -LocalPort 80,443 `
                   -Action Allow

# Bloquer une plage IP
New-NetFirewallRule -Name "BlockMalicious" -DisplayName "Block Malicious IPs" `
                   -Direction Inbound -RemoteAddress 192.168.100.0/24 `
                   -Action Block</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion avancée du firewall Windows<br>
        <strong>⚠️ Précision :</strong> Les règles sont très granulaires<br>
        <strong>✅ Automatisation :</strong> Déploiement de politiques de sécurité<br>
        <strong>🚨 Scénario :</strong> "Ouverture spécifique de ports pour une application"
      </div>
    </div>

    <!-- Routage avancé PowerShell -->
    <h4 id="ps-routing"><i class="fas fa-route"></i> 4. Routage avancé</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Afficher la table de routage
Get-NetRoute -AddressFamily IPv4 | Format-Table

# Ajouter une route statique
New-NetRoute -DestinationPrefix "10.0.0.0/24" -InterfaceAlias "Ethernet" `
             -NextHop 192.168.1.1 -RouteMetric 100

# Configurer le NAT (exige le rôle RRAS)
Install-WindowsFeature RemoteAccess -IncludeManagementTools
Install-RemoteAccess -VpnType RoutingOnly
Add-NetNatStaticMapping -NatName "CorpNAT" -Protocol TCP -ExternalIPAddress 203.0.113.25 `
                       -InternalIPAddress 192.168.1.50 -InternalPort 3389 -ExternalPort 3389</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration de routage avancé sous Windows<br>
        <strong>⚠️ Complexité :</strong> NAT nécessite rôle RRAS installé<br>
        <strong>✅ Puissance :</strong> Gestion complète du routage Windows<br>
        <strong>🚨 Scénario :</strong> "Configuration d'un serveur Windows comme routeur"
      </div>
    </div>

    <!-- VPN et connectivité distante PowerShell -->
    <h4 id="ps-vpn"><i class="fas fa-lock"></i> 5. VPN et connectivité distante</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Configurer un VPN (PowerShell 5.1+)
Add-VpnConnection -Name "CorporateVPN" -ServerAddress "vpn.corp.example.com" `
                 -TunnelType L2tp -L2tpPsk "SharedSecret123" -Force -RememberCredential

# Se connecter à un VPN
rasdial "CorporateVPN" username password

# Vérifier les connexions VPN
Get-VpnConnection</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration automatisée de connexions VPN<br>
        <strong>⚠️ Sécurité :</strong> Protéger les secrets de configuration<br>
        <strong>✅ Déploiement :</strong> Automatisation du déploiement VPN<br>
        <strong>🚨 Scénario :</strong> "Déploiement de configuration VPN sur un parc"
      </div>
    </div>

    <!-- Commandes Réseau Linux -->
    <h3 id="reseau-linux"><i class="fas fa-network-wired network-icon"></i> Commandes Réseau Linux (CLI)</h3>

    <!-- Configuration réseau de base Linux -->
    <h4 id="linux-network-basic"><i class="fas fa-ethernet"></i> 1. Configuration réseau de base</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Lister les interfaces
ip link show
nmcli device status

# Activer/Désactiver une interface
sudo ip link set eth0 up
sudo ip link set eth0 down

# Configurer une adresse IP temporaire
sudo ip addr add 192.168.1.100/24 dev eth0

# Configurer une adresse IP permanente (Ubuntu/Debian)
sudo nano /etc/netplan/01-netcfg.yaml
# Exemple de configuration:
network:
  version: 2
  ethernets:
    eth0:
      addresses: [192.168.1.100/24]
      gateway4: 192.168.1.1
      nameservers:
        addresses: [8.8.8.8, 8.8.4.4]
sudo netplan apply

# Vérification des interfaces
ip a
ip -br addr show
ip link show

# Tables de routage
ip route show
ip route get 8.8.8.8</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration réseau sous Linux<br>
        <strong>🔍 Méthodes :</strong> Plusieurs approches selon la distribution<br>
        <strong>✅ Permanent :</strong> Netplan pour configurations durables<br>
        <strong>🚨 Scénario :</strong> "Configuration d'un serveur Linux avec IP fixe"
      </div>
    </div>

    <!-- Diagnostic réseau Linux -->
    <h4 id="linux-network-diagnostic"><i class="fas fa-search"></i> 2. Diagnostic réseau</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Test de connectivité
ping -c 4 google.com
ping6 -c 4 ipv6.google.com

# Traceroute (installer avec: sudo apt install traceroute)
traceroute -n google.com

# Vérifier les ports ouverts
ss -tulnp
netstat -tulnp  # Alternative

# Analyse des paquets
sudo tcpdump -i eth0 -n 'port 80'
sudo tshark -i eth0 -f "tcp port 22"  # Version avancée (Wireshark CLI)

# Test de débit (installer speedtest-cli)
speedtest-cli --bytes

# Connexions réseau actives
ss -tulpn
netstat -tulpn</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic complet réseau sous Linux<br>
        <strong>🔍 Outils :</strong> Large gamme d'outils disponibles<br>
        <strong>✅ Puissance :</strong> Analyse très détaillée possible<br>
        <strong>🚨 Scénario :</strong> "Investigation de problèmes de connectivité complexes"
      </div>
    </div>

    <!-- Monitoring SNMP Linux -->
    <h4 id="linux-snmp"><i class="fas fa-chart-bar"></i> 3. Monitoring SNMP</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Installation SNMP sur Linux
sudo apt-get update
sudo apt-get install snmpd snmp

# Configuration SNMPD
sudo cat > /etc/snmp/snmpd.conf << 'EOF'
agentAddress udp:161
rocommunity public 0.0.0.0/0
rwcommunity private 0.0.0.0/0
sysLocation "EVE-NG Lab"
sysContact "admin@eve-ng.net"
EOF

# Redémarrage service SNMP
sudo systemctl restart snmpd
sudo systemctl enable snmpd

# Test SNMP
snmpwalk -v2c -c public localhost system
snmpwalk -v2c -c public [IP-EVE-NG] system

# Configuration SNMP détaillée pour GLPI
sudo cat > /etc/snmp/snmpd.conf << 'EOF'
# EVE-NG SNMP Minimal Config
agentAddress udp:161

# Communities avec restrictions réseau
rocommunity public 127.0.0.1
rocommunity public 192.168.0.0/16
rocommunity public 10.0.0.0/8

# Informations système
sysLocation "EVE-NG Lab"
sysContact "admin@eve-ng.net"
sysName "eve-ng"

# Options de sécurité
com2sec notConfigUser  default       public
group   notConfigGroup v1           notConfigUser
group   notConfigGroup v2c           notConfigUser
view    systemview    included   .1.3.6.1.2.1.1
view    systemview    included   .1.3.6.1.2.1.25.1.1
access  notConfigGroup ""      any       noauth    exact  systemview none none
EOF

# Purge SNMP
# Arrêt service
sudo systemctl stop snmpd

# Réinitialisation configuration
sudo rm -f /etc/snmp/snmpd.conf

# Nouvelle configuration propre
sudo cat > /etc/snmp/snmpd.conf << 'EOF'
# SNMPd minimal configuration for EVE-NG
rocommunity public 127.0.0.1
rocommunity public 192.168.0.0/16
sysLocation "EVE-NG Laboratory"
sysContact "admin@eve-ng.net"
EOF

# Redémarrage
sudo systemctl start snmpd

# Diagnostic réseau SNMP
# Test connectivité
ping -c 3 192.168.30.6
telnet 192.168.30.6 161

# Vérification ports ouverts
netstat -tulpn | grep 161
ss -tulpn | grep 161

# Test firewall
sudo ufw status
sudo ufw allow from 192.168.30.0/24 to any port 161</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration du monitoring SNMP<br>
        <strong>⚠️ Sécurité :</strong> Restreindre les communautés par réseau<br>
        <strong>✅ Intégration :</strong> Compatible GLPI, Zabbix, etc.<br>
        <strong>🚨 Scénario :</strong> "Mise en place du monitoring SNMP pour GLPI"
      </div>
    </div>

    <!-- Gestion NetworkManager Linux -->
    <h4 id="linux-networkmanager"><i class="fas fa-network-wired"></i> 4. Gestion NetworkManager</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># État des connexions NetworkManager
nmcli connection show
nmcli device status

# Vérification détaillée d'une connexion
nmcli connection show "Connexion Ethernet 1"
nmcli connection show enp0s10

# Modification configuration DNS
sudo nmcli connection modify "Connexion Ethernet 1" ipv4.dns "8.8.8.8,1.1.1.1"
sudo nmcli connection modify "Connexion Ethernet 1" ipv4.ignore-auto-dns yes

# Redémarrage connexion
sudo nmcli connection down "Connexion Ethernet 1"
sudo nmcli connection up "Connexion Ethernet 1"

# Suppression et recréation de profil
sudo nmcli connection delete "Connexion Ethernet 1"
sudo nmcli connection add type ethernet ifname enp0s10 con-name enp0s10 \
    ipv4.method auto \
    ipv4.ignore-auto-dns yes \
    ipv4.dns "8.8.8.8,1.1.1.1"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion réseau moderne sous Linux<br>
        <strong>🔍 Avantage :</strong> Interface cohérente across distributions<br>
        <strong>✅ Scriptable :</strong> Parfait pour l'automatisation<br>
        <strong>🚨 Scénario :</strong> "Correction de problèmes DNS persistants"
      </div>
    </div>

    <!-- Pare-feu avancé Linux -->
    <h4 id="linux-firewall"><i class="fas fa-shield-alt"></i> 5. Pare-feu avancé (iptables/nftables)</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Lister les règles iptables
sudo iptables -L -v -n --line-numbers
sudo iptables -S

# Autoriser le trafic HTTP/HTTPS
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# Bloquer une IP
sudo iptables -A INPUT -s 192.168.100.23 -j DROP

# Sauvegarder les règles (Debian/Ubuntu)
sudo iptables-save > /etc/iptables.rules

# Désactivation temporaire du firewall
sudo iptables -F
sudo iptables -X
sudo iptables -t nat -F
sudo iptables -P INPUT ACCEPT
sudo iptables -P FORWARD ACCEPT
sudo iptables -P OUTPUT ACCEPT
sudo nft flush ruleset

# nftables (nouvelle génération)
sudo nft add table inet filter
sudo nft add chain inet filter input { type filter hook input priority 0 \; }
sudo nft add rule inet filter input tcp dport 22 accept

# Vérification nftables
sudo nft list ruleset</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration avancée du firewall Linux<br>
        <strong>⚠️ Test :</strong> Toujours tester les règles avant sauvegarde<br>
        <strong>✅ Transition :</strong> nftables est le successeur d'iptables<br>
        <strong>🚨 Scénario :</strong> "Sécurisation d'un serveur exposé sur Internet"
      </div>
    </div>

    <!-- Routage avancé Linux -->
    <h4 id="linux-routing"><i class="fas fa-route"></i> 6. Routage avancé</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Afficher la table de routage
ip route show
route -n  # Alternative

# Ajouter une route statique
sudo ip route add 10.0.0.0/24 via 192.168.1.1 dev eth0

# Configurer le NAT
sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
sudo sysctl -w net.ipv4.ip_forward=1

# Configurer le NAT permanent
echo "net.ipv4.ip_forward=1" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration de routage sous Linux<br>
        <strong>⚠️ Forwarding :</strong> N'oubliez pas d'activer ip_forward<br>
        <strong>✅ Performance :</strong> Linux excelle comme routeur<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un routeur Linux pour un lab"
      </div>
    </div>

    <!-- VPN et tunnels Linux -->
    <h4 id="linux-vpn"><i class="fas fa-lock"></i> 7. VPN et tunnels</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># OpenVPN (client)
sudo openvpn --config client.ovpn

# WireGuard (client)
sudo wg-quick up wg0

# Créer un tunnel SSH
ssh -N -L 8080:localhost:80 user@remote-server
ssh -N -R 2222:localhost:22 user@remote-server  # Reverse tunnel

# Tunnel GRE (entre deux serveurs)
sudo ip tunnel add gre1 mode gre remote 203.0.113.2 local 198.51.100.1 ttl 255
sudo ip link set gre1 up
sudo ip addr add 10.0.0.1/30 dev gre1</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration de tunnels et VPN<br>
        <strong>🔍 Flexibilité :</strong> Large choix de solutions<br>
        <strong>✅ Sécurité :</strong> Chiffrement des communications<br>
        <strong>🚨 Scénario :</strong> "Connexion sécurisée entre deux sites"
      </div>
    </div>

    <!-- Outils réseau avancés Linux -->
    <h4 id="linux-network-tools"><i class="fas fa-tools"></i> 8. Outils réseau avancés</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Analyse de bande passante (nload)
sudo nload eth0

# Monitorer les connexions (iftop)
sudo iftop -i eth0

# Scanner réseau (nmap)
sudo nmap -sS -p 1-1024 192.168.1.0/24

# Benchmark HTTP (httperf)
httperf --server example.com --port 80 --uri / --num-conn 100

# Test de résilience (mtr)
mtr -n --report google.com</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic réseau avancé<br>
        <strong>🔍 Spécialisé :</strong> Chaque outil a sa spécialité<br>
        <strong>✅ Performance :</strong> Analyse détaillée des performances<br>
        <strong>🚨 Scénario :</strong> "Investigation de problèmes de performance réseau"
      </div>
    </div>

    <!-- Analyse de paquets TShark -->
    <h4 id="linux-tshark"><i class="fas fa-search"></i> 9. Analyse de paquets avec TShark</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Installation
sudo apt install tshark                       # Sur Debian/Ubuntu

# Capture en direct
tshark -D                                     # Lister les interfaces disponibles
tshark -i eth0                                # Capturer sur une interface spécifique
tshark -i eth0 -w capture.pcap                # Capturer et enregistrer dans un fichier
tshark -i eth0 -Y "http"                      # Filtrer le trafic (HTTP seulement)
tshark -i eth0 -c 100                         # Capturer seulement 100 paquets
tshark -i eth0 -f "port 80" -Y "http.request" # Afficher en temps réel avec filtrage

# Analyse de fichiers de capture
tshark -r capture.pcap                        # Lire un fichier .pcap
tshark -r capture.pcap -Y "dns"               # Filtrer les paquets (DNS seulement)
tshark -r capture.pcap -qz io,phs             # Afficher les statistiques</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Analyse approfondie du trafic réseau<br>
        <strong>🔍 Puissance :</strong> Version CLI de Wireshark<br>
        <strong>✅ Scriptable :</strong> Parfait pour l'automatisation<br>
        <strong>🚨 Scénario :</strong> "Debug de problèmes de communication réseau"
      </div>
    </div>

    <!-- Scripts réseau utiles -->
    <h4 id="linux-network-scripts"><i class="fas fa-code"></i> 10. Scripts réseau utiles</h4>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code>#!/bin/bash
# Script de surveillance réseau
INTERFACE="eth0"
MAX_UTIL=90

# Vérifier l'utilisation de la bande passante
CURRENT_RX=$(ifconfig $INTERFACE | grep "RX packets" | awk '{print $5}')
CURRENT_TX=$(ifconfig $INTERFACE | grep "TX packets" | awk '{print $5}')
sleep 1
NEW_RX=$(ifconfig $INTERFACE | grep "RX packets" | awk '{print $5}')
NEW_TX=$(ifconfig $INTERFACE | grep "TX packets" | awk '{print $5}')

RX_UTIL=$(( ($NEW_RX - $CURRENT_RX) / 1024 ))
TX_UTIL=$(( ($NEW_TX - $CURRENT_TX) / 1024 ))

if [ $RX_UTIL -gt $MAX_UTIL ] || [ $TX_UTIL -gt $MAX_UTIL ]; then
    echo "Alerte: Utilisation élevée du réseau - RX: ${RX_UTIL}KB/s TX: ${TX_UTIL}KB/s" | mail -s "Alerte réseau" admin@example.com
fi</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Surveillance automatisée du réseau<br>
        <strong>🔍 Customisation :</strong> Adaptable aux besoins spécifiques<br>
        <strong>✅ Proactif :</strong> Détection précoce des problèmes<br>
        <strong>🚨 Scénario :</strong> "Monitoring de l'utilisation réseau d'un serveur critique"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION PFSENSE - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="pfsense"><i class="fas fa-shield-alt pfsense-icon"></i> pfSense</h2>

    <!-- Gestion générale pfSense -->
    <h3 id="pfsense-general"><i class="fas fa-shield-alt"></i> Gestion du firewall pfSense</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Gestion du firewall
pftcl -d && pfctl -e

# Vérifier les règles firewall pour le port RIP
pfctl -sr | grep 520

# Redémarrer le service RIP
/etc/rc.d/ripd restart

# Gestion de l'historique
history
fc -l
history | grep rip
cat ~/.history

# Configurer l'historique persistant
echo 'export HISTFILE=~/.persistent_history' >> ~/.shrc
echo 'export HISTSIZE=10000' >> ~/.shrc
touch ~/.persistent_history

# Raccourcis historiques
!!  # Répète la dernière commande
!ssh  # Rappelle la dernière commande commençant par ssh

# Gestion des règles pfSense
nano /etc/pf.conf
# Ajouter avant les règles de blocage:
pass in quick proto udp from any to any port = 520  # Autoriser RIP

# Recharger les règles
pfctl -f /etc/pf.conf</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Administration avancée de pfSense en CLI<br>
        <strong>⚠️ Attention :</strong> Modifications directes du fichier pf.conf<br>
        <strong>✅ Avantage :</strong> Contrôle granulaire du firewall<br>
        <strong>🚨 Scénario :</strong> "Debug de règles firewall complexes"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION SERVEUR WEB - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="web"><i class="fas fa-globe web-icon"></i> Serveur Web Apache</h2>

    <!-- Installation Apache -->
    <h3 id="apache-install"><i class="fas fa-server"></i> 1. Installation de base</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag web">WEB</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Installer Apache
sudo apt update && sudo apt upgrade -y
sudo apt install apache2 -y
sudo systemctl enable --now apache2

# Vérifier le statut
sudo systemctl status apache2</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Installation d'un serveur web Apache<br>
        <strong>⚠️ Sécurité :</strong> Mettre à jour avant installation<br>
        <strong>✅ Test :</strong> Vérifier que le service démarre correctement<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un nouveau serveur web"
      </div>
    </div>

    <!-- Structure fichiers Apache -->
    <h3 id="apache-structure"><i class="fas fa-folder-open"></i> 2. Structure des fichiers</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag web">WEB</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Créer un nouveau site
sudo mkdir -p /var/www/monsite/html
sudo chown -R www-data:www-data /var/www/monsite
sudo chmod -R 755 /var/www/monsite</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Préparation de l'arborescence d'un site<br>
        <strong>⚠️ Permissions :</strong> Important pour la sécurité<br>
        <strong>✅ Organisation :</strong> Structure claire pour multiples sites<br>
        <strong>🚨 Scénario :</strong> "Création d'un nouvel hôte virtuel"
      </div>
    </div>

    <!-- Configuration VirtualHost Apache -->
    <h3 id="apache-virtualhost"><i class="fas fa-cog"></i> 3. Configuration VirtualHost</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag web">WEB</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Exemple de configuration
&lt;VirtualHost *:80&gt;
    ServerName monsite.local
    ServerAlias www.monsite.local
    DocumentRoot /var/www/monsite/html
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
    
    &lt;Directory /var/www/monsite/html&gt;
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;

# Activer le site
sudo a2ensite monsite.conf
sudo systemctl reload apache2</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration d'hôtes virtuels Apache<br>
        <strong>⚠️ Test :</strong> Vérifier la syntaxe avant activation<br>
        <strong>✅ Sécurité :</strong> Options -Indexes pour cacher l'arborescence<br>
        <strong>🚨 Scénario :</strong> "Hébergement de multiple sites sur un serveur"
      </div>
    </div>

    <!-- Configuration PHP Apache -->
    <h3 id="apache-php"><i class="fas fa-code"></i> 4. Configuration PHP</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag web">WEB</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Installer PHP
sudo apt install php libapache2-mod-php php-mysql -y
sudo systemctl restart apache2

# Tester PHP
echo "<?php phpinfo(); ?>" | sudo tee /var/www/monsite/html/info.php</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Ajout du support PHP à Apache<br>
        <strong>⚠️ Sécurité :</strong> Retirer phpinfo() en production<br>
        <strong>✅ Test :</strong> Vérifier que PHP est interprété correctement<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'une application PHP"
      </div>
    </div>

    <!-- Sécurisation Apache -->
    <h3 id="apache-security"><i class="fas fa-lock"></i> 5. Sécurisation</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Activer le module security
sudo a2enmod security2
sudo systemctl restart apache2

# Configurer SSL avec Let's Encrypt
sudo apt install certbot python3-certbot-apache -y
sudo certbot --apache -d monsite.local -d www.monsite.local
sudo certbot renew --dry-run</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Renforcement de la sécurité Apache<br>
        <strong>⚠️ Certificats :</strong> Let's Encrypt nécessite un nom de domaine valide<br>
        <strong>✅ Automatisation :</strong> Renouvellement automatique des certificats<br>
        <strong>🚨 Scénario :</strong> "Sécurisation d'un site web avec HTTPS"
      </div>
    </div>

    <div class="note">
        <p><strong>Résumé des Commandes Clés</strong></p>
        <ul>
            <li>Installer Apache: <code>sudo apt install apache2 -y</code></li>
            <li>Activer un site: <code>sudo a2ensite nom.conf</code></li>
            <li>Désactiver le site par défaut: <code>sudo a2dissite 000-default.conf</code></li>
            <li>Tester la configuration: <code>sudo apache2ctl configtest</code></li>
            <li>Redémarrer Apache: <code>sudo systemctl restart apache2</code></li>
            <li>Vérifier les logs: <code>sudo tail -f /var/log/apache2/error.log</code></li>
        </ul>
    </div>


    <!-- ============================ -->
    <!-- SECTION PÉRIPHÉRIQUES - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="peripheriques"><i class="fas fa-print device-icon"></i> Gestion des Périphériques Externes</h2>

    <!-- Windows - Imprimantes -->
    <h3 id="peripheriques-windows-printers"><i class="fab fa-windows windows-icon"></i> 1. Windows (PowerShell) - Imprimantes</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag device">PÉRIPHÉRIQUES</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Lister toutes les imprimantes
Get-Printer | Format-Table Name, DriverName, PortName, Shared, Published

# Ajouter une imprimante locale
Add-Printer -Name "HP_LaserJet" -DriverName "HP LaserJet P3015 Series PCL6" -PortName "USB001"

# Ajouter une imprimante réseau
Add-Printer -ConnectionName "\\print-server\HP_Color_LaserJet"

# Configurer une imprimante partagée
Set-Printer -Name "HP_LaserJet" -Shared $true -ShareName "HP_LaserJet_Shared" -Published $true

# Supprimer une imprimante
Remove-Printer -Name "Old_Printer"

# Gérer les travaux d'impression
Get-PrintJob -PrinterName "HP_LaserJet" | Where-Object {$_.JobStatus -eq "Error"} | Remove-PrintJob
Restart-PrintJob -PrinterName "HP_LaserJet" -ID 5

# Installer un pilote d'imprimante
pnputil.exe -i -a "C:\Drivers\HP\*.inf"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des imprimantes sous Windows<br>
        <strong>⚠️ Pilotes :</strong> S'assurer d'avoir les bons pilotes<br>
        <strong>✅ Automatisation :</strong> Déploiement massif possible<br>
        <strong>🚨 Scénario :</strong> "Déploiement d'imprimantes sur un parc Windows"
      </div>
    </div>

    <!-- Windows - Périphériques USB et autres -->
    <h3 id="peripheriques-windows-usb"><i class="fab fa-windows windows-icon"></i> 2. Windows (PowerShell) - Périphériques USB et autres</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag device">PÉRIPHÉRIQUES</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Lister tous les périphériques connectés
Get-PnpDevice | Where-Object {$_.Present} | Format-Table FriendlyName, Status, InstanceId

# Désactiver un périphérique USB
Disable-PnpDevice -InstanceId "USB\VID_0781&PID_5583\AA0123456789" -Confirm:$false

# Activer un périphérique
Enable-PnpDevice -InstanceId "USB\VID_0781&PID_5583\AA0123456789" -Confirm:$false

# Gérer les moniteurs
# (Nécessite l'installation de DisplaySwitch.exe via Windows SDK)
DisplaySwitch.exe /internal  # Utiliser uniquement l'écran intégré
DisplaySwitch.exe /external  # Utiliser uniquement l'écran externe
DisplaySwitch.exe /extend    # Étendre l'affichage
DisplaySwitch.exe /clone     # Dupliquer l'affichage

# Gérer les périphériques audio
Get-AudioDevice -List | Where-Object {$_.Type -eq "Playback"} | Format-Table Name, ID
Set-AudioDevice -ID "{0.0.0.00000000}.{a12b3c4d-5e67-8f90-1234-567890abcdef}"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des périphériques Windows<br>
        <strong>⚠️ Hardware :</strong> Manipulation directe du matériel<br>
        <strong>✅ Dépannage :</strong> Résolution de conflits matériels<br>
        <strong>🚨 Scénario :</strong> "Désactivation d'un périphérique USB problématique"
      </div>
    </div>

    <!-- Windows - Scanners -->
    <h3 id="peripheriques-windows-scanners"><i class="fab fa-windows windows-icon"></i> 3. Windows (PowerShell) - Scanners</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag device">PÉRIPHÉRIQUES</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Lister les scanners disponibles (nécessite WIA)
$deviceManager = New-Object -ComObject WIA.DeviceManager
$deviceManager.DeviceInfos | Where-Object {$_.Type -eq 1} | Select-Object Properties

# Scanner un document (script avancé)
$device = $deviceManager.DeviceInfos.Item(1).Connect()
$scanner = $device.Items.Item(1)
$image = $scanner.Transfer()
$image.SaveFile("C:\Scans\document_$(Get-Date -Format 'yyyyMMddHHmmss').jpg")</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des scanners sous Windows<br>
        <strong>⚠️ Compatibilité :</strong> WIA peut ne pas supporter tous les scanners<br>
        <strong>✅ Automatisation :</strong> Numérisation automatisée possible<br>
        <strong>🚨 Scénario :</strong> "Numérisation automatisée de documents"
      </div>
    </div>

    <!-- Linux - Imprimantes -->
    <h3 id="peripheriques-linux-printers"><i class="fab fa-linux linux-icon"></i> 4. Linux (CLI) - Imprimantes</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag device">PÉRIPHÉRIQUES</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Lister les imprimantes
lpstat -p -d

# Installer une imprimante CUPS (Common Unix Printing System)
sudo lpadmin -p HP_LaserJet -E -v socket://192.168.1.10 -m drv:///HP/hp-laserjet.ppd.gz

# Définir l'imprimante par défaut
sudo lpoptions -d HP_LaserJet

# Soumettre un travail d'impression
lpr -P HP_LaserJet document.pdf

# Annuler un travail d'impression
lprm -P HP_LaserJet 15

# Gérer les files d'attente
lpq -P HP_LaserJet

# Configurer une imprimante réseau Samba
sudo lpadmin -p "Office_Printer" -E -v "smb://user:password@print-server/HP_Color" -m everywhere</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des imprimantes sous Linux<br>
        <strong>⚠️ CUPS :</strong> Service CUPS doit être installé et démarré<br>
        <strong>✅ Réseau :</strong> Support des imprimantes réseau étendu<br>
        <strong>🚨 Scénario :</strong> "Configuration d'une imprimante réseau sous Linux"
      </div>
    </div>

    <!-- Linux - Périphériques USB et autres -->
    <h3 id="peripheriques-linux-usb"><i class="fab fa-linux linux-icon"></i> 5. Linux (CLI) - Périphériques USB et autres</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag device">PÉRIPHÉRIQUES</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Lister tous les périphériques USB
lsusb
lsusb -v  # Version détaillée

# Identifier un périphérique spécifique
udevadm info -a -n /dev/sdb | grep -i "idVendor\|idProduct"

# Monter un périphérique USB
sudo mkdir /mnt/usbdrive
sudo mount /dev/sdb1 /mnt/usbdrive -o uid=1000,gid=1000

# Démontrer un périphérique USB
sudo umount /mnt/usbdrive

# Gérer les moniteurs avec xrandr
xrandr  # Lister les affichages disponibles
xrandr --output HDMI-1 --auto --right-of eDP-1  # Configurer multi-écrans
xrandr --output HDMI-1 --off  # Désactiver un écran

# Configurer les périphériques audio
pactl list short sinks  # Lister les périphériques de sortie
pactl set-default-sink alsa_output.pci-0000_00_1b.0.analog-stereo  # Définir la sortie par défaut</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des périphériques sous Linux<br>
        <strong>⚠️ Permissions :</strong> Attention aux droits sur les périphériques<br>
        <strong>✅ Contrôle :</strong> Contrôle granulaire du matériel<br>
        <strong>🚨 Scénario :</strong> "Configuration d'un setup multi-écrans"
      </div>
    </div>

    <!-- Linux - Scanners -->
    <h3 id="peripheriques-linux-scanners"><i class="fab fa-linux linux-icon"></i> 6. Linux (CLI) - Scanners</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag device">PÉRIPHÉRIQUES</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Installer SANE (Scanner Access Now Easy)
sudo apt install sane sane-utils xsane

# Lister les scanners disponibles
scanimage -L

# Scanner un document (format PNG)
scanimage --format=png --output-file scan.png --resolution 300dpi --mode Color

# Scanner en PDF (nécessite imagemagick)
scanimage --format=tiff --resolution 300dpi | convert - scan.pdf

# Configurer un scanner réseau
sudo nano /etc/sane.d/net.conf
# Ajouter l'adresse IP du serveur de scanner: 192.168.1.20</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion des scanners sous Linux<br>
        <strong>⚠️ Compatibilité :</strong> Vérifier la compatibilité SANE du scanner<br>
        <strong>✅ Qualité :</strong> Contrôle précis des paramètres de scan<br>
        <strong>🚨 Scénario :</strong> "Configuration d'un scanner réseau sous Linux"
      </div>
    </div>

    <!-- Scripts avancés -->
    <h3 id="peripheriques-scripts"><i class="fas fa-code"></i> 7. Scripts avancés</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag automation">AUTOMATISATION</span>
        <span class="tag device">PÉRIPHÉRIQUES</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code>#!/bin/bash
# Script Linux de surveillance USB
while true; do
    USB_DEVICES=$(lsusb | wc -l)
    if [ $USB_DEVICES -gt 2 ]; then
        echo "Alerte : Nouveau périphérique USB détecté $(date)" >> /var/log/usb_monitor.log
        lsusb >> /var/log/usb_monitor.log
    fi
    sleep 5
done

<#
# Script PowerShell pour déployer des imprimantes
$Printers = Import-Csv "C:\deploy\printers.csv"
foreach ($printer in $Printers) {
    if ($printer.Type -eq "Network") {
        Add-Printer -ConnectionName $printer.Path
    } else {
        Add-Printer -Name $printer.Name -DriverName $printer.Driver -PortName $printer.Port
    }
    if ($printer.Shared -eq $true) {
        Set-Printer -Name $printer.Name -Shared $true -ShareName $printer.ShareName
    }
}
#></code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Automatisation de la gestion des périphériques<br>
        <strong>⚠️ Sécurité :</strong> Surveillance USB peut être intrusive<br>
        <strong>✅ Efficacité :</strong> Déploiement massif automatisé<br>
        <strong>🚨 Scénario :</strong> "Déploiement automatisé d'imprimantes sur un parc"
      </div>
    </div>

    <!-- Dépannage -->
    <h3 id="peripheriques-troubleshooting"><i class="fas fa-tools"></i> 8. Dépannage</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag device">PÉRIPHÉRIQUES</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Windows - Vérifier les erreurs de périphérique
Get-WinEvent -LogName System | Where-Object {$_.ProviderName -match "USB|Print"} | 
    Select-Object TimeCreated, Message | Format-Table -AutoSize

# Linux - Journal des périphériques
sudo journalctl -b | grep -i "usb\|print\|scanner"
sudo dmesg | grep -i "new device"

# Réinitialiser le sous-système USB (Linux)
echo 0 | sudo tee /sys/bus/usb/devices/usb1/authorized
echo 1 | sudo tee /sys/bus/usb/devices/usb1/authorized

# Réinstaller un pilote (Windows)
pnputil.exe /delete-driver oem0.inf /uninstall
pnputil.exe /add-driver "C:\Drivers\new_driver.inf" /install</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic de problèmes matériels<br>
        <strong>⚠️ Hardware :</strong> Manipulation directe du matériel<br>
        <strong>✅ Résolution :</strong> Méthodes pour résoudre les conflits<br>
        <strong>🚨 Scénario :</strong> "Périphérique USB non reconnu"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION TCPDUMP -->
    <!-- ============================ -->

    <h2><i class="fas fa-network-wired network-icon"></i> Tcpdump - Capture de paquets</h2>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Capturer les paquets UDP RIP
tcpdump -i any or &lt;Interface&gt; port 250(ou autres selon la situation) -vv -n

# Capturer les paquets avec une adresse IP spécifique
tcpdump -i eth0 -nn 'host 224.0.0.9'

# Vérifier le trafic NAT
sudo tcpdump -i &lt;interface_host_local&gt; host NAT &lt;IP_WINDOWS&gt;</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Analyse avancée du trafic réseau<br>
        <strong>⚠️ Pré-requis :</strong> Droits root/sudo nécessaires<br>
        <strong>✅ Avantages :</strong> Analyse en temps réel, filtrage puissant<br>
        <strong>🚨 Scénario :</strong> "Debug de problèmes réseau complexes"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION PING AVANCÉ -->
    <!-- ============================ -->

    <h2><i class="fas fa-network-wired network-icon"></i> Ping Avancé</h2>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 5 secondes</span>
      </div>
      <pre><code># Ping depuis une IP source spécifique
ping -S &lt;IP source&gt; -c 3 &lt;IP Destination&gt;</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Test de connectivité depuis une IP spécifique<br>
        <strong>⚠️ Interface :</strong> L'IP source doit être configurée sur une interface<br>
        <strong>✅ Avantages :</strong> Test de routage spécifique<br>
        <strong>🚨 Scénario :</strong> "Vérification du routage depuis un sous-réseau spécifique"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION TABLE DE ROUTAGE -->
    <!-- ============================ -->

    <h2><i class="fas fa-network-wired network-icon"></i> Table de routage</h2>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag reseau">RÉSEAU</span>
        <span class="tag">⏱️ 2 secondes</span>
      </div>
      <pre><code># Afficher la table de routage (Linux et Windows)
netstat -rn</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Consultation rapide de la table de routage<br>
        <strong>⚠️ Alternative :</strong> Sur Linux moderne, préférer `ip route`<br>
        <strong>✅ Compatibilité :</strong> Fonctionne sur Linux et Windows<br>
        <strong>🚨 Scénario :</strong> "Vérification rapide des routes sur n'importe quel système"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION ANALYSE DES LOGS -->
    <!-- ============================ -->

    <h2><i class="fas fa-search linux-icon"></i> Analyse des logs sous Linux</h2>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Afficher les logs RIP
grep RIP /var/log/system.log

# Afficher les logs RIP en temps réel
tail -f /var/log/system.log | grep ripd

# Vérifier le service RIP
ps aux | grep ripd</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Diagnostic des services et protocoles réseau<br>
        <strong>⚠️ Fichiers :</strong> Les chemins de logs peuvent varier selon la distribution<br>
        <strong>✅ Avantages :</strong> Debug précis des problèmes de services<br>
        <strong>🚨 Scénario :</strong> "Problèmes avec le protocole RIP"
      </div>
    </div>



    <!-- ============================ -->
    <!-- SECTION VIRTUALISATION - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="virtualisation"><i class="fas fa-cloud virt-icon"></i> Virtualisation</h2>

    <!-- KVM/QEMU -->
    <h3 id="virtualisation-kvm"><i class="fas fa-server"></i> 1. KVM/QEMU</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag virt">VIRTUALISATION</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Installer KVM sur Ubuntu
sudo apt install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils virt-manager

# Vérifier que la virtualisation est activée
kvm-ok</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Mise en place de virtualisation KVM<br>
        <strong>⚠️ Pré-requis :</strong> Support VT-x/AMD-V dans le CPU<br>
        <strong>✅ Performance :</strong> Virtualisation native performante<br>
        <strong>🚨 Scénario :</strong> "Création d'un serveur de virtualisation Linux"
      </div>
    </div>

    <div class="note">
        <p><strong>Note :</strong> Après installation, ajoutez votre utilisateur au groupe libvirt :</p>
        <pre><code>sudo usermod -aG libvirt $USER</code></pre>
    </div>

    <!-- VMware ESXi -->
    <h3 id="virtualisation-esxi"><i class="fab fa-vmware"></i> 2. VMware ESXi</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag virt">VIRTUALISATION</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Connexion et informations de base
ssh root@adresse_ip_esxi                       # Se connecter à ESXi via SSH
vmware -v                                      # Afficher la version d'ESXi
esxcli system hostname get                     # Afficher les informations sur l'hôte
esxcli system version get 

# Gestion des VMs
vim-cmd vmsvc/getallvms                       # Lister toutes les VMs
vim-cmd vmsvc/power.on XX                     # Démarrer une VM (remplacez `XX` par l'ID de la VM)
vim-cmd vmsvc/power.off XX                    # Arrêter une VM
vim-cmd vmsvc/power.reset XX                  # Redémarrer une VM
vim-cmd vmsvc/power.getstate XX               # Voir l'état d'une VM

# Gestion du stockage
esxcli storage filesystem list                # Lister les datastores
df -h                                         # Voir l'espace disque disponible
ls -lh /vmfs/volumes/                         # Lister les volumes

# Transfert de fichiers
scp &lt;Repertoire_source_fichier&gt; root@&lt;IP-Machine-ESXI&gt;:/Volumes-Reprtoire_Destionation_Machine-ESXI
# Exemple: scp debian.iso root@192.168.100.10:/vmfs/volumes/ISO/

# Gestion réseau
esxcli network nic list                       # Lister les interfaces réseau
esxcli network vswitch standard list          # Voir les vSwitches
vmkping google.com                            # Tester la connectivité réseau

# Administration système
reboot                                        # Redémarrer l'hôte
poweroff                                      # Éteindre l'hôte</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Administration d'un hyperviseur ESXi<br>
        <strong>⚠️ Production :</strong> ESXi est un hyperviseur enterprise<br>
        <strong>✅ Performance :</strong> Optimisé pour la virtualisation<br>
        <strong>🚨 Scénario :</strong> "Gestion d'une infrastructure VMware"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION SAUVEGARDE - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->
 

    <h2 id="backup"><i class="fas fa-save backup-icon"></i> Sauvegarde et Restauration</h2>

    <!-- Sauvegarde bases de données -->
    <h3 id="backup-databases"><i class="fas fa-database"></i> 1. Bases de données</h3>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag backup">SAUVEGARDE</span>
        <span class="tag">⏱️ Variable</span>
      </div>
      <pre><code># MySQL dump complet
mysqldump -u root -p --all-databases > backup_complet_$(date +%Y%m%d).sql

# Sauvegarde d'une base spécifique
mysqldump -u root -p ma_base_de_donnees > backup_ma_base_$(date +%Y%m%d).sql

# Sauvegarde PostgreSQL complète
sudo pg_dumpall -U postgres > postgres_backup_$(date +%Y%m%d).sql

# Sauvegarde d'une base PostgreSQL spécifique
pg_dump -U postgres ma_base > postgres_ma_base_$(date +%Y%m%d).sql

# Compression immédiate
mysqldump -u root -p --all-databases | gzip > backup_$(date +%Y%m%d).sql.gz

# Sauvegarde avec timestamp
mysqldump -u root -p --all-databases > backup_$(date +"%Y%m%d_%H%M%S").sql</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Sauvegarde des bases de données critiques<br>
        <strong>⚠️ Taille :</strong> Les sauvegardes complètes peuvent être volumineuses<br>
        <strong>✅ Test :</strong> Toujours tester la restauration des sauvegardes<br>
        <strong>🚨 Scénario :</strong> "Sauvegarde avant mise à jour majeure de base de données"
      </div>
    </div>

    <!-- Sauvegarde fichiers avec tar -->
    <h3 id="backup-tar"><i class="fas fa-archive"></i> 2. Sauvegarde avec tar</h3>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag backup">SAUVEGARDE</span>
        <span class="tag">⏱️ Variable</span>
      </div>
      <pre><code># Sauvegarde avec tar
sudo tar -czvf backup-$(date +%F).tar.gz /dossier/a/sauvegarder

# Sauvegarde avec exclusion de fichiers
tar -czvf backup-$(date +%F).tar.gz --exclude='*.tmp' --exclude='cache/*' /dossier

# Sauvegarde incrémentielle basée sur la date
tar -czvf backup-$(date +%Y%m%d).tar.gz /dossier/important

# Liste le contenu d'une archive
tar -tzf backup-2023-12-01.tar.gz

# Extraction d'archive
tar -xzvf backup-2023-12-01.tar.gz -C /dossier/restauration</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Sauvegarde d'arborescences de fichiers<br>
        <strong>⚠️ Compression :</strong> L'option -z compresse avec gzip<br>
        <strong>✅ Avantages :</strong> Préservation des permissions, compression<br>
        <strong>🚨 Scénario :</strong> "Sauvegarde de la configuration système"
      </div>
    </div>

    <!-- Sauvegarde incrémentielle rsync -->
    <h3 id="backup-rsync"><i class="fas fa-sync-alt"></i> 3. Sauvegarde incrémentielle avec rsync</h3>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag maintenance">MAINTENANCE</span>
        <span class="tag backup">SAUVEGARDE</span>
        <span class="tag">⏱️ Rapide</span>
      </div>
      <pre><code># Sauvegarde incrémentielle avec liens durs
sudo rsync -av --delete --link-dest=/previous/backup /source /destination/backup-$(date +%F)

# Sauvegarde simple
rsync -av /source/ /destination/backup-$(date +%Y%m%d)/

# Sauvegarde avec exclusion
rsync -av --exclude='*.tmp' --exclude='cache/' /source/ /destination/

# Sauvegarde via SSH
rsync -av -e ssh /dossier/local/ utilisateur@serveur:/dossier/backup/

# Synchronisation bidirectionnelle
rsync -av /source/ /destination/ --update</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Sauvegardes fréquentes et efficaces<br>
        <strong>⚠️ Suppression :</strong> --delete peut être dangereux<br>
        <strong>✅ Avantages :</strong> Seuls les fichiers modifiés sont copiés<br>
        <strong>🚨 Scénario :</strong> "Sauvegarde quotidienne des données utilisateurs"
      </div>
    </div>

    <!-- Planification des sauvegardes -->
    <h3 id="backup-automation"><i class="fas fa-robot"></i> 4. Automatisation des sauvegardes</h3>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag automation">AUTOMATISATION</span>
        <span class="tag backup">SAUVEGARDE</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Planifier des sauvegardes avec cron
(crontab -l 2>/dev/null; echo "0 2 * * * /chemin/vers/script_backup.sh") | crontab -

# Exemple de crontab
# Tous les jours à 2h du matin
0 2 * * * /root/scripts/backup_daily.sh

# Tous les dimanches à 3h
0 3 * * 0 /root/scripts/backup_weekly.sh

# Tous les 1er du mois à 4h
0 4 1 * * /root/scripts/backup_monthly.sh

# Script de sauvegarde automatique exemple
#!/bin/bash
BACKUP_DIR="/backup/$(date +%Y%m%d)"
mkdir -p $BACKUP_DIR
mysqldump -u root -p --all-databases > $BACKUP_DIR/mysql_backup.sql
tar -czf $BACKUP_DIR/config_backup.tar.gz /etc/</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Mise en place de sauvegardes automatisées<br>
        <strong>⚠️ Sécurité :</strong> Stocker les mots de passe de manière sécurisée<br>
        <strong>✅ Avantages :</strong> Sauvegardes régulières sans intervention<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'une stratégie de sauvegarde automatique"
      </div>
    </div>

    <!-- Stratégies de sauvegarde -->
    <h3 id="backup-strategies"><i class="fas fa-chess-board"></i> 5. Stratégies de sauvegarde</h3>
    
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag planning">PLANIFICATION</span>
        <span class="tag backup">SAUVEGARDE</span>
        <span class="tag">⏱️ Planification</span>
      </div>
      <pre><code># Règle 3-2-1
# 3 copies des données
# 2 supports différents
# 1 copie hors-site

# Script de rotation des sauvegardes
#!/bin/bash
BACKUP_DIR="/backup"
# Supprimer les sauvegardes de plus de 30 jours
find $BACKUP_DIR -name "backup_*" -mtime +30 -delete

# Vérification intégrité des sauvegardes
md5sum backup_file.tar.gz > backup_file.tar.gz.md5
md5sum -c backup_file.tar.gz.md5

# Sauvegarde différentielle exemple
tar -czf backup_full_$(date +%Y%m%d).tar.gz /data
tar -czf backup_diff_$(date +%Y%m%d).tar.gz -N "2023-12-01" /data</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Planification d'une stratégie de sauvegarde robuste<br>
        <strong>⚠️ Test :</strong> Tester régulièrement la restauration<br>
        <strong>✅ Bonne pratique :</strong> Règle 3-2-1 pour la résilience<br>
        <strong>🚨 Scénario :</strong> "Élaboration d'un plan de reprise d'activité"
      </div>
    </div>

    <div class="warning">
        <p><strong>⚠️ ATTENTION CRITIQUE :</strong> Stockez toujours les sauvegardes dans un emplacement sécurisé et chiffré. Testez régulièrement les restaurations !</p>
    </div>

    <!-- Workflow de sauvegarde -->
    <div class="workflow">
      <h3>💾 Workflow de Sauvegarde Recommandé</h3>
      <ol>
        <li onclick="scrollToCommand('backup-databases')">1. Sauvegarder les bases de données critiques</li>
        <li onclick="scrollToCommand('backup-tar')">2. Archiver les configurations système</li>
        <li onclick="scrollToCommand('backup-rsync')">3. Synchroniser les données utilisateurs</li>
        <li onclick="scrollToCommand('backup-automation')">4. Automatiser les sauvegardes récurrentes</li>
        <li onclick="scrollToCommand('backup-strategies')">5. Implémenter une stratégie 3-2-1</li>
      </ol>
    </div>

    <!-- ============================ -->
    <!-- SECTION MONITORING - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="monitoring"><i class="fas fa-chart-bar monitoring-icon"></i> Monitoring</h2>

    <!-- Outils de base monitoring -->
    <h3 id="monitoring-basic"><i class="fas fa-server"></i> 1. Outils de base</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 30 secondes</span>
      </div>
      <pre><code># Vérification de l'état du système (Linux)
top
htop
glances  # Version améliorée avec plus de métriques

# Surveillance des disques
iotop -o  # Affiche les E/S disque en temps réel
iftop     # Surveillance du trafic réseau

# Installer NetData (monitoring complet)
bash <(curl -Ss https://my-netdata.io/kickstart.sh)</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Monitoring basique des systèmes<br>
        <strong>🔍 Temps réel :</strong> Outils pour surveillance immédiate<br>
        <strong>✅ Visuel :</strong> NetData offre une interface web complète<br>
        <strong>🚨 Scénario :</strong> "Diagnostic rapide de performance système"
      </div>
    </div>

    <!-- Solutions professionnelles monitoring -->
    <h3 id="monitoring-pro"><i class="fas fa-network-wired"></i> 2. Solutions professionnelles</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 15 minutes</span>
      </div>
      <pre><code># Prometheus (collecte de métriques)
# Installation:
wget https://github.com/prometheus/prometheus/releases/download/v2.30.3/prometheus-2.30.3.linux-amd64.tar.gz
tar xvfz prometheus-*.tar.gz
cd prometheus-*
./prometheus --config.file=prometheus.yml

# Grafana (visualisation)
sudo apt-get install -y grafana
sudo systemctl start grafana-server
sudo systemctl enable grafana-server</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Mise en place de monitoring d'entreprise<br>
        <strong>⚠️ Complexité :</strong> Solution avancée nécessitant configuration<br>
        <strong>✅ Puissance :</strong> Monitoring scalable et personnalisable<br>
        <strong>🚨 Scénario :</strong> "Monitoring d'une infrastructure complète"
      </div>
    </div>

    <!-- Alerting monitoring -->
    <h3 id="monitoring-alerting"><i class="fas fa-bell"></i> 3. Alerting</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Configurer Alertmanager avec Prometheus
global:
  resolve_timeout: 5m
route:
  group_by: ['alertname']
  receiver: 'email-notifications'
receivers:
- name: 'email-notifications'
  email_configs:
  - to: 'admin@example.com'
    from: 'alertmanager@example.com'
    smarthost: 'smtp.example.com:587'
    auth_username: 'user'
    auth_password: 'password'</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration d'alertes de monitoring<br>
        <strong>⚠️ Testing :</strong> Tester les alertes avant déploiement<br>
        <strong>✅ Proactif :</strong> Détection précoce des problèmes<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'alertes pour services critiques"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION SÉCURITÉ - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="securite"><i class="fas fa-shield-alt security-icon"></i> Sécurité</h2>

    <!-- Audit et analyse sécurité -->
    <h3 id="security-audit"><i class="fas fa-search"></i> 1. Audit et analyse</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 10 minutes</span>
      </div>
      <pre><code># Scan de vulnérabilités avec OpenVAS
sudo apt install openvas
sudo gvm-setup
sudo gvm-start

# Analyse avec Lynis (audit de sécurité)
sudo lynis audit system

# Vérification des ports ouverts
nmap -sS -p- -T4 192.168.1.1  # Scan TCP SYN
nmap -sU -p- -T4 192.168.1.1  # Scan UDP</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Audit de sécurité des systèmes<br>
        <strong>⚠️ Autorisation :</strong> S'assurer d'avoir l'autorisation de scanner<br>
        <strong>✅ Complet :</strong> Analyse approfondie des vulnérabilités<br>
        <strong>🚨 Scénario :</strong> "Audit de sécurité périodique"
      </div>
    </div>

    <!-- Hardening sécurité -->
    <h3 id="security-hardening"><i class="fas fa-lock"></i> 2. Hardening</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 15 minutes</span>
      </div>
      <pre><code># CIS Benchmark (Windows)
Install-Module -Name CISBenchmark -Force
Get-CISBenchmark -Level 1 | Invoke-CISBenchmark

# Hardening Linux avec Bastille
sudo apt install bastille
sudo bastille -c

# Désactivation des services inutiles (Linux)
sudo systemctl list-unit-files --state=enabled
sudo systemctl disable [service_name]</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Renforcement de la sécurité des systèmes<br>
        <strong>⚠️ Test :</strong> Tester en environnement de test d'abord<br>
        <strong>✅ Conformité :</strong> Respect des standards de sécurité<br>
        <strong>🚨 Scénario :</strong> "Sécurisation d'un serveur exposé sur Internet"
      </div>
    </div>

    <!-- Forensic sécurité -->
    <h3 id="security-forensic"><i class="fas fa-user-secret"></i> 3. Forensic</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag diagnostic">DIAGNOSTIC</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Analyse des processus suspects
ps aux | grep -E '(crypt|miner|attack)'

# Recherche de fichiers modifiés récemment
find / -type f -mtime -1 -print

# Capture de trafic suspect
tcpdump -i eth0 -w capture.pcap 'port not 22 and port not 80 and port not 443'</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Investigation d'incidents de sécurité<br>
        <strong>⚠️ Preuve :</strong> Conserver la chaîne de preuve<br>
        <strong>✅ Analyse :</strong> Méthodologie d'investigation<br>
        <strong>🚨 Scénario :</strong> "Investigation d'une possible intrusion"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION CONTAINERS - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="containers"><i class="fab fa-docker docker-icon"></i> Containers</h2>

    <!-- Docker -->
    <h3 id="containers-docker"><i class="fas fa-box"></i> 1. Docker</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag docker">CONTAINERS</span>
        <span class="tag">⏱️ 2 minutes</span>
      </div>
      <pre><code># Gestion des containers
docker ps -a                          # Lister tous les containers
docker stats                          # Statistiques en temps réel
docker inspect [container_id]         # Détails d'un container

# Gestion des images
docker images                         # Lister les images
docker image prune                    # Nettoyer les images inutilisées

# Réseau Docker
docker network ls                     # Lister les réseaux
docker network inspect bridge         # Inspecter un réseau

# Installation de Neko Navigateur avec Docker
docker run -d \
  --name neko \                               # Nom du projet dans docker
  -e NEKO_PASSWORD=34PenetrationTest \        # Mot de passe utilisateur Neko
  -e NEKO_PASSWORD_ADMIN=34PenetrationTest \  # Mot de passe Admin
  -p 8090:8080 \                           # Port d'accès à neko
  -p 52000-52100:52000-52100/udp \
  --shm-size=2gb \
  --cap-add=SYS_ADMIN \
  --device /dev/snd \
  --security-opt seccomp=unconfined \
  --rm \
  m1k1o/neko:firefox                       # Démarrer neko avec le navigateur firefox</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion de containers Docker<br>
        <strong>⚠️ Sécurité :</strong> Attention aux privilèges accordés<br>
        <strong>✅ Isolation :</strong> Environnements séparés et contrôlés<br>
        <strong>🚨 Scénario :</strong> "Déploiement d'applications conteneurisées"
      </div>
    </div>

    <!-- Docker Compose -->
    <h3 id="containers-compose"><i class="fas fa-project-diagram"></i> 2. Docker Compose</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag docker">CONTAINERS</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Déployer une stack
docker-compose -f stack.yml up -d

# Surveiller les logs
docker-compose logs -f --tail=100

# Scale de services
docker-compose up -d --scale web=3 --scale worker=5</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Orchestration d'applications multi-conteneurs<br>
        <strong>⚠️ Dépendances :</strong> Gère automatiquement les dépendances<br>
        <strong>✅ Simplicité :</strong> Déploiement cohérent et reproductible<br>
        <strong>🚨 Scénario :</strong> "Déploiement d'une application avec base de données"
      </div>
    </div>

    <!-- Kubernetes -->
    <h3 id="containers-kubernetes"><i class="fas fa-cloud"></i> 3. Kubernetes</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag docker">CONTAINERS</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Commandes kubectl de base
kubectl get pods -A                   # Lister tous les pods
kubectl describe node [node_name]     # Détails d'un noeud
kubectl logs [pod_name]               # Voir les logs d'un pod

# Surveillance
kubectl top nodes                     # Utilisation ressources des noeuds
kubectl top pods                      # Utilisation ressources des pods

# Déploiement
kubectl apply -f deployment.yml       # Déployer une configuration
kubectl rollout status deployment/[deployment_name]</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Orchestration de containers en production<br>
        <strong>⚠️ Complexité :</strong> Courbe d'apprentissage importante<br>
        <strong>✅ Scalabilité :</strong> Gestion automatique de la charge<br>
        <strong>🚨 Scénario :</strong> "Orchestration d'applications microservices"
      </div>
    </div>

    <div class="note">
        <p><strong>Bonnes pratiques Docker :</strong></p>
        <ul>
            <li>Utiliser des images officielles et vérifiées</li>
            <li>Limiter les privilèges des containers (--cap-drop)</li>
            <li>Scanner régulièrement les images avec Docker Bench Security</li>
        </ul>
    </div>

    <!-- ============================ -->
    <!-- SECTION CLOUD & IaC - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="cloud"><i class="fas fa-cloud cloud-icon"></i> Cloud & Infrastructure as Code</h2>

    <!-- AWS CLI -->
    <h3 id="cloud-aws"><i class="fab fa-aws"></i> 1. AWS CLI</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag cloud">CLOUD</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Configuration AWS CLI
aws configure
aws configure set region eu-west-1

# Gestion EC2
aws ec2 describe-instances
aws ec2 start-instances --instance-ids i-1234567890abcdef0
aws ec2 create-image --instance-id i-1234567890abcdef0 --name "Backup-$(date +%Y%m%d)"

# Gestion S3
aws s3 ls
aws s3 cp fichier.txt s3://mon-bucket/
aws s3 sync ./local-folder s3://mon-bucket/backup/

# Gestion IAM
aws iam list-users
aws iam create-user --user-name new-user
aws iam attach-user-policy --user-name new-user --policy-arn arn:aws:iam::aws:policy/AdministratorAccess

# CloudFormation
aws cloudformation create-stack --stack-name my-stack --template-body file://template.yaml
aws cloudformation describe-stacks --stack-name my-stack</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion d'infrastructure AWS<br>
        <strong>⚠️ Coût :</strong> Surveiller l'utilisation pour éviter les surprises<br>
        <strong>✅ Automatisation :</strong> Gestion complète via CLI<br>
        <strong>🚨 Scénario :</strong> "Gestion d'une infrastructure cloud AWS"
      </div>
    </div>

    <!-- Azure CLI -->
    <h3 id="cloud-azure"><i class="fab fa-microsoft"></i> 2. Azure CLI</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag cloud">CLOUD</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Connexion Azure
az login
az account list --output table

# Gestion VM
az vm list --output table
az vm start --name MyVM --resource-group MyResourceGroup
az vm create --resource-group MyRG --name MyVM --image UbuntuLTS --admin-username azureuser

# Gestion Stockage
az storage account list --resource-group MyRG
az storage blob upload --account-name mystorage --container-name mycontainer --name blob.txt --file ./blob.txt

# Azure Resource Manager
az group create --name MyRG --location "West Europe"
az deployment group create --resource-group MyRG --template-file template.json</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion d'infrastructure Azure<br>
        <strong>⚠️ Abonnement :</strong> Vérifier le contexte d'abonnement<br>
        <strong>✅ Cohérence :</strong> Interface unifiée pour tous les services<br>
        <strong>🚨 Scénario :</strong> "Déploiement d'infrastructure sur Azure"
      </div>
    </div>

    <!-- Terraform -->
    <h3 id="cloud-terraform"><i class="fas fa-code"></i> 3. Terraform</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag cloud">CLOUD</span>
        <span class="tag">⏱️ 10 minutes</span>
      </div>
      <pre><code># Initialisation
terraform init
terraform init -upgrade

# Planification
terraform plan -out plan.tfplan
terraform plan -var "instance_type=t3.medium"

# Application
terraform apply
terraform apply -auto-approve
terraform apply plan.tfplan

# État et inspection
terraform state list
terraform state show aws_instance.web
terraform output

# Destruction contrôlée
terraform plan -destroy
terraform destroy -target=aws_instance.web

# Workspaces
terraform workspace new dev
terraform workspace select prod
terraform workspace list</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Infrastructure as Code multi-cloud<br>
        <strong>⚠️ État :</strong> Gérer soigneusement le state file<br>
        <strong>✅ Reproductibilité :</strong> Environnements identiques et versionnés<br>
        <strong>🚨 Scénario :</strong> "Déploiement d'infrastructure reproductible"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION AUTOMATISATION - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="automation"><i class="fas fa-robot automation-icon"></i> Automatisation & Orchestration</h2>

    <!-- Ansible -->
    <h3 id="automation-ansible"><i class="fas fa-cogs"></i> 1. Ansible</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag automation">AUTOMATISATION</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Test de connexion
ansible all -m ping -i inventory.ini

# Playbook simple
ansible-playbook -i inventory.ini playbook.yml
ansible-playbook playbook.yml --limit webservers
ansible-playbook playbook.yml --tags "nginx,ssl"

# Ad-hoc commands
ansible webservers -m apt -a "name=nginx state=latest" -b
ansible dbservers -m systemd -a "name=mysql state=started" -b
ansible all -m copy -a "src=config.txt dest=/etc/backup/"

# Vault pour secrets
ansible-vault create secret.yml
ansible-vault edit secret.yml
ansible-playbook playbook.yml --ask-vault-pass

# Galaxy roles
ansible-galaxy role install geerlingguy.nginx
ansible-galaxy collection install community.general</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Automatisation de configuration<br>
        <strong>⚠️ Idempotence :</strong> Les playbooks doivent être idempotents<br>
        <strong>✅ Agentless :</strong> Aucun agent à installer sur les cibles<br>
        <strong>🚨 Scénario :</strong> "Configuration automatisée d'un parc de serveurs"
      </div>
    </div>

    <!-- Jenkins -->
    <h3 id="automation-jenkins"><i class="fab fa-jenkins"></i> 2. Jenkins & CI/CD</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag automation">AUTOMATISATION</span>
        <span class="tag">⏱️ 10 minutes</span>
      </div>
      <pre><code># Pipeline Jenkins déclaratif
pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                sh 'mvn clean compile'
            }
        }
        stage('Test') {
            steps {
                sh 'mvn test'
            }
        }
        stage('Deploy') {
            steps {
                sh 'ansible-playbook deploy.yml'
            }
        }
    }
}

# Scripts Groovy pour administration
println(Jenkins.instance.pluginManager.plugins)
Jenkins.instance.nodes.each { node ->
    println("${node.displayName}: ${node.computer.online}")
}</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Mise en place de pipelines CI/CD<br>
        <strong>⚠️ Complexité :</strong> Courbe d'apprentissage pour les pipelines<br>
        <strong>✅ Automatisation :</strong> Intégration et déploiement continus<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un pipeline de déploiement"
      </div>
    </div>

    <!-- API & Webhooks -->
    <h3 id="automation-api"><i class="fas fa-network-wired"></i> 3. API & Webhooks</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag automation">AUTOMATISATION</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Curl pour tests API
curl -X GET "https://api.example.com/v1/servers" -H "Authorization: Bearer $TOKEN"
curl -X POST "https://api.example.com/v1/deploy" -H "Content-Type: application/json" -d '{"version":"1.2.3"}'

# Webhook avec Python Flask
from flask import Flask, request
import subprocess

app = Flask(__name__)

@app.route('/webhook/deploy', methods=['POST'])
def deploy_webhook():
    if request.headers.get('X-GitHub-Event') == 'push':
        subprocess.run(['/opt/scripts/deploy.sh'])
        return 'Deployment triggered', 200
    return 'Ignored', 202</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Intégration et automatisation via APIs<br>
        <strong>⚠️ Sécurité :</strong> Authentifier et autoriser les appels API<br>
        <strong>✅ Flexibilité :</strong> Intégration avec écosystème étendu<br>
        <strong>🚨 Scénario :</strong> "Automatisation via webhooks Git"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION BASES DE DONNÉES - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="databases"><i class="fas fa-database database-icon"></i> Bases de Données Avancées</h2>

    <!-- PostgreSQL Avancé -->
    <h3 id="db-postgresql"><i class="fas fa-database"></i> 1. PostgreSQL Avancé</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag database">BASE DE DONNÉES</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Maintenance et performances
VACUUM (VERBOSE, ANALYZE) table_name;
REINDEX DATABASE database_name;
ANALYZE table_name;

# Surveillance avancée
SELECT * FROM pg_stat_activity WHERE state = 'active';
SELECT schemaname, tablename, n_dead_tup FROM pg_stat_all_tables ORDER BY n_dead_tup DESC;

# Backup avancé
pg_basebackup -D /backup/primary -h primary-host -U replicator -P -v
pg_dump -Fc database_name > backup.dump  # Format custom compressé

# Réplication
SELECT * FROM pg_replication_slots;
SELECT client_addr, state, sync_state FROM pg_stat_replication;

# Partitioning
CREATE TABLE measurement (
    city_id int not null,
    logdate date not null,
    peaktemp int
) PARTITION BY RANGE (logdate);</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Administration avancée PostgreSQL<br>
        <strong>⚠️ Performance :</strong> VACUUM peut impacter les performances<br>
        <strong>✅ Optimisation :</strong> Maintenance régulière nécessaire<br>
        <strong>🚨 Scénario :</strong> "Optimisation d'une base PostgreSQL en production"
      </div>
    </div>

    <!-- MySQL/MariaDB Avancé -->
    <h3 id="db-mysql"><i class="fas fa-database"></i> 2. MySQL/MariaDB Avancé</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag database">BASE DE DONNÉES</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Optimisation et tuning
SHOW ENGINE INNODB STATUS;
SHOW PROCESSLIST;
EXPLAIN ANALYZE SELECT * FROM large_table WHERE condition;

# Backup et réplication
mysqldump --single-transaction --routines --triggers database_name > backup.sql
mysqlpump --users --routines --events > full_backup.sql

# Réplication MySQL
SHOW MASTER STATUS;
SHOW SLAVE STATUS\G
CHANGE MASTER TO MASTER_HOST='master', MASTER_USER='repl', MASTER_PASSWORD='password';

# Performance Schema
SELECT * FROM performance_schema.events_statements_summary_by_digest ORDER BY sum_timer_wait DESC LIMIT 10;</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Administration avancée MySQL/MariaDB<br>
        <strong>⚠️ Réplication :</strong> Configurer soigneusement la réplication<br>
        <strong>✅ Monitoring :</strong> Performance Schema pour analyse détaillée<br>
        <strong>🚨 Scénario :</strong> "Configuration de la réplication MySQL"
      </div>
    </div>

    <!-- MongoDB -->
    <h3 id="db-mongodb"><i class="fas fa-bolt"></i> 3. MongoDB</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag database">BASE DE DONNÉES</span>
        <span class="tag">⏱️ 3 minutes</span>
      </div>
      <pre><code># Opérations basiques
use mydb
db.collection.find({status: "active"}).sort({created_at: -1}).limit(10)
db.collection.createIndex({username: 1}, {unique: true})

# Agrégations
db.orders.aggregate([
    {$match: {status: "completed"}},
    {$group: {_id: "$customer_id", total: {$sum: "$amount"}}},
    {$sort: {total: -1}}
])

# Backup et restauration
mongodump --uri="mongodb://localhost:27017/mydb" --out=/backup/
mongorestore --uri="mongodb://localhost:27017/mydb" /backup/mydb/

# Performance
db.collection.explain().find({query: "condition"})
db.currentOp({"secs_running": {"$gte": 60}})</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Administration de bases MongoDB<br>
        <strong>⚠️ Indexation :</strong> Crucial pour les performances<br>
        <strong>✅ Flexibilité :</strong> Schéma dynamique et agrégations puissantes<br>
        <strong>🚨 Scénario :</strong> "Gestion d'une base de données NoSQL"
      </div>
    </div>
    
        <!-- ============================ -->
    <!-- SECTION LABO - LOGICIELS DU LABORATOIRE -->
    <!-- ============================ -->

    <h2 id="lab"><i class="fas fa-flask lab-icon"></i> Logiciels du Laboratoire</h2>

    <!-- Introduction -->
    <div class="context-box">
      <strong>🎯 Objectif :</strong> Cette section recense tous les logiciels utilisés dans l'environnement de laboratoire<br>
      <strong>📁 Catégories :</strong> Virtualisation, Monitoring, Sécurité, Containers, Outils réseau<br>
      <strong>🔧 Usage :</strong> Référence rapide pour l'installation, configuration et dépannage
    </div>

    <!-- Émulation & Virtualisation Réseau -->
    <h3 id="lab-emulation"><i class="fas fa-network-wired"></i> 1. Émulation & Virtualisation Réseau</h3>

    <!-- EVE-NG -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag virt">VIRTUALISATION</span>
        <span class="tag">⏱️ 15 minutes</span>
      </div>
      <pre><code># Installation EVE-NG
wget -O - http://www.eve-ng.net/keys/eve-ng.gpg.key | sudo apt-key add -
echo "deb http://www.eve-ng.net/repo xenial main" | sudo tee /etc/apt/sources.list.d/eve-ng.list
sudo apt update && sudo apt install eve-ng

# Gestion des images
/opt/unetlab/addons/qemu/
chown -R root:root /opt/unetlab/addons/qemu/
/opt/unetlab/wrappers/unl_wrapper -a fixpermissions

# Accès web
https://[IP-EVE-NG]
# Identifiants par défaut : admin / eve

# Redémarrage des services
/opt/unetlab/wrappers/unl_wrapper -a restart</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Simulation de réseaux complexes multi-fournisseurs<br>
        <strong>⚠️ Pré-requis :</strong> CPU avec virtualisation activée, 8GB RAM minimum<br>
        <strong>✅ Avantages :</strong> Support Cisco/Juniper/autres, communauté active<br>
        <strong>🚨 Scénario :</strong> "Préparation de labos pour certification CCNP"
      </div>
    </div>

    <!-- GNS3 -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag virt">VIRTUALISATION</span>
        <span class="tag">⏱️ 10 minutes</span>
      </div>
      <pre><code># Installation GNS3
sudo add-apt-repository ppa:gns3/ppa
sudo apt update
sudo apt install gns3-gui gns3-server

# Version All-in-One (Windows)
# Télécharger depuis : https://www.gns3.com/software/download

# Configuration serveur
gns3server
# Accès : http://localhost:3080

# Intégration VMware/VirtualBox
# Dans GNS3: Edit → Preferences → VirtualBox/VMware</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Prototypage de topologies réseau avec intégration Docker<br>
        <strong>⚠️ Performance :</strong> Peut être gourmand en ressources<br>
        <strong>✅ Avantages :</strong> Interface intuitive, multi-plateforme<br>
        <strong>🚨 Scénario :</strong> "Test de configuration réseau avant déploiement réel"
      </div>
    </div>

    <!-- Hyperviseurs & Virtualisation -->
    <h3 id="lab-hyperviseurs"><i class="fas fa-server"></i> 2. Hyperviseurs & Virtualisation</h3>

    <!-- VMware ESXi -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag virt">VIRTUALISATION</span>
        <span class="tag production">PRODUCTION</span>
        <span class="tag">⏱️ 30 minutes</span>
      </div>
      <pre><code># Installation via ISO
# Télécharger l'ISO depuis : https://customerconnect.vmware.com/

# Commandes ESXI utiles
esxcli system version get
esxcli network ip interface list
vim-cmd vmsvc/getallvms
vim-cmd vmsvc/power.on 1

# Configuration réseau
esxcli network ip interface ipv4 set -i vmk0 -t static -g 192.168.1.1 -I 192.168.1.10 -N 255.255.255.0

# Gestion stockage
esxcli storage filesystem list
esxcli storage nfs list</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Virtualisation d'entreprise pour infrastructures critiques<br>
        <strong>⚠️ Licence :</strong> Version free avec limitations<br>
        <strong>✅ Avantages :</strong> Performance, vCenter, fonctionnalités enterprise<br>
        <strong>🚨 Scénario :</strong> "Virtualisation de serveurs de production"
      </div>
    </div>

    <!-- Proxmox VE -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag virt">VIRTUALISATION</span>
        <span class="tag production">PRODUCTION</span>
        <span class="tag">⏱️ 20 minutes</span>
      </div>
      <pre><code># Installation via ISO
# Télécharger : https://www.proxmox.com/en/downloads

# Commandes Proxmox
pvesh get /nodes
qm list
qm start 100
vzdump 100 --storage backup-storage --mode snapshot

# Création VM via CLI
qm create 200 --name "ubuntu-server" --memory 2048 --cores 2 --net0 virtio,bridge=vmbr0

# Gestion cluster
pvecm create CLUSTER_NAME
pvecm add NODE_IP</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Alternative open-source à VMware, laboratoires<br>
        <strong>⚠️ Cluster :</strong> Configuration réseau critique pour le clustering<br>
        <strong>✅ Avantages :</strong> Gratuit, interface web, sauvegardes intégrées<br>
        <strong>🚨 Scénario :</strong> "Mise en place d'un environnement de test virtualisé"
      </div>
    </div>

    <!-- Accès Distant & Bureau -->
    <h3 id="lab-acces-distant"><i class="fas fa-desktop"></i> 3. Accès Distant & Bureau</h3>

    <!-- Apache Guacamole -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag web">WEB</span>
        <span class="tag">⏱️ 15 minutes</span>
      </div>
      <pre><code># Docker Compose Guacamole
version: '3'
services:
  guacamole:
    image: guacamole/guacamole
    ports: ["8080:8080"]
    environment:
      - GUACD_HOSTNAME=guacd
      - MYSQL_HOSTNAME=mysql
  guacd:
    image: guacamole/guacd
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: guacamole_db
      MYSQL_USER: guacamole_user
      MYSQL_PASSWORD: guacamole_password

# Initialisation base
docker run --rm guacamole/guacamole /opt/guacamole/bin/initdb.sh --mysql > initdb.sql
docker exec -i mysql mysql -u root -prootpassword guacamole_db < initdb.sql</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Centralisation des accès RDP/SSH/VNC<br>
        <strong>⚠️ Sécurité :</strong> Configurer SSL et authentification forte<br>
        <strong>✅ Avantages :</strong> Clientless, authentification centralisée, MFA<br>
        <strong>🚨 Scénario :</strong> "Accès unifié à tous les serveurs du labo"
      </div>
    </div>

    <!-- Neko -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag docker">CONTAINERS</span>
        <span class="tag">⏱️ 5 minutes</span>
      </div>
      <pre><code># Installation Neko avec Docker
docker run -d \
  --name=neko \
  --restart=unless-stopped \
  -e NEKO_PASSWORD=monMotDePasse \
  -e NEKO_PASSWORD_ADMIN=monMotDePasseAdmin \
  -p 8080:8080 \
  -p 52000-52100:52000-52100/udp \
  --shm-size=2gb \
  m1k1o/neko:firefox

# Accès : http://localhost:8080
# Identifiants : neko / monMotDePasse
# Admin : admin / monMotDePasseAdmin

# Version Chrome
docker run -d \
  --name=neko-chrome \
  -e NEKO_PASSWORD=password \
  -p 8081:8080 \
  m1k1o/neko:chromium</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Navigateur distant partagé pour démonstrations<br>
        <strong>⚠️ Performance :</strong> Nécessite une bonne connexion pour le streaming<br>
        <strong>✅ Avantages :</strong> Temps réel, partage de session, multi-navigateurs<br>
        <strong>🚨 Scénario :</strong> "Démonstration d'applications web en temps réel"
      </div>
    </div>

    <!-- Monitoring & Observabilité -->
    <h3 id="lab-monitoring"><i class="fas fa-chart-line"></i> 4. Monitoring & Observabilité</h3>

    <!-- Grafana -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 10 minutes</span>
      </div>
      <pre><code># Installation Docker
docker run -d -p 3000:3000 --name grafana grafana/grafana

# Installation native Ubuntu
sudo apt-get install -y adduser libfontconfig1
wget https://dl.grafana.com/oss/release/grafana_10.0.0_amd64.deb
sudo dpkg -i grafana_10.0.0_amd64.deb
sudo systemctl enable grafana-server
sudo systemctl start grafana-server

# Configuration datasource
apiVersion: 1
datasources:
  - name: Prometheus
    type: prometheus
    url: http://prometheus:9090
    access: proxy

# Accès : http://localhost:3000
# Identifiants par défaut : admin / admin</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Visualisation de métriques et création de dashboards<br>
        <strong>⚠️ Sécurité :</strong> Changer le mot de passe admin immédiatement<br>
        <strong>✅ Avantages :</strong> Multi-sources, communauté, plugins<br>
        <strong>🚨 Scénario :</strong> "Création de tableaux de bord pour surveillance infrastructure"
      </div>
    </div>

    <!-- Prometheus -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 15 minutes</span>
      </div>
      <pre><code># Installation Prometheus
wget https://github.com/prometheus/prometheus/releases/download/v2.45.0/prometheus-2.45.0.linux-amd64.tar.gz
tar xvfz prometheus-*.tar.gz
cd prometheus-*
./prometheus --config.file=prometheus.yml

# Configuration de base
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
  - job_name: 'node_exporter'
    static_configs:
      - targets: ['localhost:9100']

# Node Exporter (métriques système)
docker run -d -p 9100:9100 --name node-exporter prom/node-exporter</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Collecte de métriques time-series<br>
        <strong>⚠️ Stockage :</strong> Prévoir assez d'espace pour les métriques<br>
        <strong>✅ Avantages :</strong> Pull model, requêtes puissantes, intégration Kubernetes<br>
        <strong>🚨 Scénario :</strong> "Monitoring cloud native et conteneurisé"
      </div>
    </div>

    <!-- Zabbix -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag monitoring">MONITORING</span>
        <span class="tag">⏱️ 20 minutes</span>
      </div>
      <pre><code># Installation avec Docker
version: '3.5'
services:
  zabbix-server:
    image: zabbix/zabbix-server-mysql:latest
    ports: ["10051:10051"]
    environment:
      DB_SERVER_HOST: zabbix-mysql
      MYSQL_USER: zabbix
      MYSQL_PASSWORD: zabbix-password

  zabbix-web:
    image: zabbix/zabbix-web-nginx-mysql:latest
    ports: ["80:8080", "443:8443"]
    environment:
      DB_SERVER_HOST: zabbix-mysql
      MYSQL_USER: zabbix
      MYSQL_PASSWORD: zabbix-password

  zabbix-mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_USER: zabbix
      MYSQL_PASSWORD: zabbix-password</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Supervision d'infrastructure traditionnelle<br>
        <strong>⚠️ Ressources :</strong> Peut être gourmand en base de données<br>
        <strong>✅ Avantages :</strong> Scalable, templates, découverte automatique<br>
        <strong>🚨 Scénario :</strong> "Monitoring d'un parc de serveurs et équipements réseau"
      </div>
    </div>

    <!-- Téléphonie & VoIP -->
    <h3 id="lab-telephonie"><i class="fas fa-phone"></i> 5. Téléphonie & VoIP</h3>

    <!-- 3CX -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag telephonie">TÉLÉPHONIE</span>
        <span class="tag">⏱️ 30 minutes</span>
      </div>
      <pre><code># Installation 3CX
wget http://downloads.3cx.com/downloads/misc/debian10/3cxpbx.deb
dpkg -i 3cxpbx.deb

# Configuration réseau
# Accès web : https://ip-serveur:5001

# Diagnostic SIP
tcpdump -i any -n port 5060
tail -f /var/lib/3cxpbx/Data/Logs/*.log

# Commandes système
systemctl status nginx
systemctl status 3CXPhoneSystemMC01
systemctl status 3CXHttpServer</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Mise en place d'un PBX IP pour communications unifiées<br>
        <strong>⚠️ Sécurité :</strong> Configurer correctement le firewall<br>
        <strong>✅ Avantages :</strong> Interface web, intégrations, coût<br>
        <strong>🚨 Scénario :</strong> "Installation d'une centrale téléphonique IP"
      </div>
    </div>

    <!-- Sécurité & Analyse -->
    <h3 id="lab-securite"><i class="fas fa-shield-alt"></i> 6. Sécurité & Analyse</h3>

    <!-- Suricata -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 15 minutes</span>
      </div>
      <pre><code># Installation et démarrage
apt install suricata
suricata-update
suricata -c /etc/suricata/suricata.yaml -i eth0

# Configuration de base
# /etc/suricata/suricata.yaml
vars:
  address-groups:
    HOME_NET: "[192.168.0.0/16,10.0.0.0/8]"
    EXTERNAL_NET: "any"

# Surveillance alertes
tail -f /var/log/suricata/fast.log
jq '.' /var/log/suricata/eve.json | head -20

# Mise à jour règles
suricata-update
systemctl restart suricata</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Détection d'intrusions réseau (IDS/IPS)<br>
        <strong>⚠️ Performance :</strong> Peut impacter les performances réseau<br>
        <strong>✅ Avantages :</strong> Performances, règles communautaires<br>
        <strong>🚨 Scénario :</strong> "Surveillance du trafic réseau pour détection d'intrusions"
      </div>
    </div>

    <!-- Wazuh -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag securite">SÉCURITÉ</span>
        <span class="tag">⏱️ 25 minutes</span>
      </div>
      <pre><code># Installation All-in-One
curl -sO https://packages.wazuh.com/4.5/wazuh-install.sh
sudo bash wazuh-install.sh --all-in-one

# Installation manuelle
# Serveur :
curl -s https://packages.wazuh.com/key/GPG-KEY-WAZUH | apt-key add -
echo "deb https://packages.wazuh.com/4.x/apt/ stable main" | tee /etc/apt/sources.list.d/wazuh.list
apt update
apt install wazuh-manager

# Agent Linux :
curl -s https://packages.wazuh.com/key/GPG-KEY-WAZUH | apt-key add -
echo "deb https://packages.wazuh.com/4.x/apt/ stable main" | tee /etc/apt/sources.list.d/wazuh.list
apt update
apt install wazuh-agent</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> SIEM open-source et HIDS (Host-based IDS)<br>
        <strong>⚠️ Ressources :</strong> Nécessite Elasticsearch pour les logs<br>
        <strong>✅ Avantages :</strong> CIS, PCI-DSS, intégration Elasticsearch<br>
        <strong>🚨 Scénario :</strong> "Centralisation des logs de sécurité et conformité"
      </div>
    </div>

    <!-- Gestion de Parc & Services -->
    <h3 id="lab-gestion-parc"><i class="fas fa-tools"></i> 7. Gestion de Parc & Services</h3>

    <!-- GLPI -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag gestion">GESTION</span>
        <span class="tag">⏱️ 20 minutes</span>
      </div>
      <pre><code># Installation GLPI
apt install glpi
mysql -u root -p -e "CREATE DATABASE glpi;"
mysql -u root -p -e "GRANT ALL ON glpi.* TO 'glpi'@'localhost';"

# Installation manuelle
wget https://github.com/glpi-project/glpi/releases/download/10.0.0/glpi-10.0.0.tgz
tar -xzf glpi-10.0.0.tgz
mv glpi /var/www/html/
chown -R www-data:www-data /var/www/html/glpi

# Agent FusionInventory
apt install fusioninventory-agent
fusioninventory-agent --server http://glpi-server/glpi/plugins/fusioninventory/</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Gestion de parc informatique et ticketing<br>
        <strong>⚠️ Base :</strong> Configurer correctement la base de données<br>
        <strong>✅ Avantages :</strong> FusionInventory, gratuité<br>
        <strong>🚨 Scénario :</strong> "Inventaire automatique du parc informatique"
      </div>
    </div>

    <!-- Scripts de déploiement automatique -->
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-moyen">RISQUE MOYEN</span>
        <span class="tag automation">AUTOMATISATION</span>
        <span class="tag gestion">GESTION</span>
        <span class="tag">⏱️ 10 minutes</span>
      </div>
      <pre><code>#!/bin/bash
# Script de déploiement automatique des outils du labo

LAB_TOOLS=("docker" "grafana" "prometheus" "zabbix")

deploy_tool() {
    case $1 in
        "docker")
            curl -fsSL https://get.docker.com -o get-docker.sh
            sh get-docker.sh
            usermod -aG docker $USER
            ;;
        "grafana")
            docker run -d -p 3000:3000 --name grafana grafana/grafana
            ;;
        "prometheus")
            docker run -d -p 9090:9090 --name prometheus prom/prometheus
            ;;
        "zabbix")
            docker-compose -f zabbix-docker-compose.yml up -d
            ;;
    esac
}

for tool in "${LAB_TOOLS[@]}"; do
    echo "Déploiement de $tool..."
    deploy_tool $tool
done

echo "Déploiement terminé !"</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Automatisation de l'installation des outils<br>
        <strong>⚠️ Test :</strong> Toujours tester en environnement de test d'abord<br>
        <strong>✅ Avantages :</strong> Gain de temps, reproductibilité<br>
        <strong>🚨 Scénario :</strong> "Déploiement rapide d'un nouvel environnement de labo"
      </div>
    </div>

    <!-- Workflow d'installation labo -->
    <div class="workflow">
      <h3>🔧 Workflow de Mise en Place du Laboratoire</h3>
      <ol>
        <li onclick="scrollToCommand('lab-emulation')">1. Installer l'émulation réseau (EVE-NG/GNS3)</li>
        <li onclick="scrollToCommand('lab-hyperviseurs')">2. Configurer l'hyperviseur (Proxmox/ESXi)</li>
        <li onclick="scrollToCommand('lab-monitoring')">3. Déployer le monitoring (Grafana/Prometheus)</li>
        <li onclick="scrollToCommand('lab-securite')">4. Installer les outils de sécurité (Suricata/Wazuh)</li>
        <li onclick="scrollToCommand('lab-gestion-parc')">5. Mettre en place la gestion (GLPI)</li>
      </ol>
    </div> 
    

    <!-- ============================ -->
    <!-- SECTION AICHAT - TOUTES LES COMMANDES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="aichat"><i class="fas fa-robot aichat-icon"></i> AICHAT - Interface en Ligne de Commande</h2>

    <!-- Commandes de base AICHAT -->
    <h3 id="aichat-basic"><i class="fas fa-terminal"></i> Commandes de base</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag aichat">AICHAT</span>
        <span class="tag">⏱️ 10 secondes</span>
      </div>
      <pre><code># Question simple à un modèle
aichat -m openai:deepseek "Explique brièvement la différence entre TCP et UDP."

# Sans streaming pour un affichage instantané
aichat -m openai:deepseek -S "Explique brièvement la différence entre TCP et UDP."

# Utiliser un fichier comme contexte
aichat -f mon_document.pdf -m openai:deepseek "Résume ce document."

# Démarrer le serveur local
aichat --serve 0.0.0.0:8080

# Question simple à un modèle
aichat -m openai:deepseek "Explique brièvement la différence entre TCP et UDP."

# Même chose, sans streaming pour un affichage instantané
aichat -m openai:deepseek -S "Explique brièvement la différence entre TCP et UDP."

# Lister les modèles disponibles
aichat --list-models

# Synchroniser les modèles depuis le dépôt officiel
aichat --sync-models

# Utiliser un fichier comme contexte
aichat -f mon_document.pdf -m openai:deepseek "Résume ce document."

# Démarrer le serveur local
aichat --serve 0.0.0.0:8080</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Interaction avec modèles IA en ligne de commande<br>
        <strong>⚠️ Contexte :</strong> Les fichiers de contexte améliorent les réponses<br>
        <strong>✅ Rapidité :</strong> Alternative rapide aux interfaces web<br>
        <strong>🚨 Scénario :</strong> "Recherche d'information technique rapide"
      </div>
    </div>

    <!-- Options principales AICHAT -->
    <h3 id="aichat-options"><i class="fas fa-cogs"></i> Options principales</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag configuration">CONFIGURATION</span>
        <span class="tag aichat">AICHAT</span>
        <span class="tag">⏱️ 1 minute</span>
      </div>
      <pre><code># Gestion des modèles
aichat --list-models                    # Lister les modèles disponibles
aichat --sync-models                    # Synchroniser les modèles

# Gestion des sessions
aichat --list-sessions                  # Lister toutes les sessions
aichat -s, --session [SESSION]          # Démarrer ou rejoindre une session

# Rôles et agents
aichat --list-roles                     # Lister tous les rôles
aichat --list-agents                    # Lister tous les agents

# Fonctionnalités avancées
aichat -e, --execute                    # Exécuter des commandes naturelles
aichat -c, --code                       # Afficher uniquement le code généré
aichat --rag <RAG>                      # Démarrer un RAG

# Options principales complètes
| Option                    | Description                                                          |
| ------------------------- | -------------------------------------------------------------------- |
| `-m, --model <MODEL>`     | Sélectionner un modèle. Exemple : `openai:deepseek`                  |
| `--prompt <PROMPT>`       | Utiliser un **prompt système** spécifique                            |
| `-r, --role <ROLE>`       | Sélectionner un rôle préconfiguré                                    |
| `-s, --session [SESSION]` | Démarrer ou rejoindre une session                                    |
| `--empty-session`         | Forcer une session vide                                              |
| `--save-session`          | Sauvegarder la conversation dans la session                          |
| `-a, --agent <AGENT>`     | Démarrer un agent                                                    |
| `--rag <RAG>`             | Démarrer un RAG (Retrieval-Augmented Generation)                     |
| `-e, --execute`           | Exécuter des commandes naturelles                                    |
| `-c, --code`              | Afficher uniquement le code généré                                   |
| `-f, --file <FILE>`       | Inclure fichiers, dossiers ou URLs                                   |
| `-S, --no-stream`         | **Désactiver l'affichage progressif** (plus rapide dans le terminal) |
| `--dry-run`               | Afficher la requête sans l'envoyer                                   |
| `--info`                  | Afficher les informations du modèle ou session                       |
| `--sync-models`           | Synchroniser les modèles avec le dépôt officiel                      |
| `--list-models`           | Lister tous les modèles disponibles                                  |
| `--list-roles`            | Lister tous les rôles                                                |
| `--list-sessions`         | Lister toutes les sessions                                           |
| `--list-agents`           | Lister tous les agents                                               |
| `--list-rags`             | Lister tous les RAGs                                                 |
| `--list-macros`           | Lister tous les macros                                               |
| `--serve [<ADDRESS>]`     | Démarrer le serveur API/WebApp                                       |
| `-h, --help`              | Afficher l'aide                                                      |
| `-V, --version`           | Afficher la version                                                  |</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Configuration avancée d'AICHAT<br>
        <strong>⚠️ Modèles :</strong> Choisir le modèle adapté à la tâche<br>
        <strong>✅ Flexibilité :</strong> Large gamme d'options et fonctionnalités<br>
        <strong>🚨 Scénario :</strong> "Configuration d'un workflow IA personnalisé"
      </div>
    </div>

    <!-- ============================ -->
    <!-- SECTION SITES INTERNET - TOUTES LES RÉFÉRENCES ENRICHIES -->
    <!-- ============================ -->

    <h2 id="sites-internet"><i class="fas fa-external-link-alt sites-icon"></i> Sites de Référence et Cheat Sheets</h2>

    <div class="note">
        <p><strong>📚 Ressources en ligne pour approfondir vos connaissances</strong></p>
    </div>

    <!-- Commandes et Cheat Sheets -->
    <h3 id="sites-cheatsheets"><i class="fas fa-terminal"></i> Commandes et Cheat Sheets</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Sites de référence pour commandes et cheat sheets
- https://linuxize.com/# : Linux Sysadmin and DevOps blog about articles,tutorials, server operations and security.
- https://cheat.sh/ : Cheat sheets pour toutes les commandes (curl cht.sh/commande)
- https://tldr.sh/ : Simplified man pages avec des exemples concrets
- https://ss64.com/ : Référence complète des commandes Windows/Linux
- https://explainshell.com/ : Explication détaillée des options de commandes shell
- https://phoenixnap.com/kb : Base de connaissances avec tutoriels et commandes
- https://devhints.io/ : Cheat sheets pour développeurs et administrateurs
- https://github.com/chubin/cheat.sh : Repository officiel avec toutes les cheat sheets
- https://www.commandlinefu.com/ : Commandes shell partagées par la communauté</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Recherche rapide de commandes et syntaxe<br>
        <strong>⚠️ Vérification :</strong> Toujours tester les commandes inconnues<br>
        <strong>✅ Apprentissage :</strong> Excellentes ressources pour apprendre<br>
        <strong>🚨 Scénario :</strong> "Oubli de la syntaxe d'une commande complexe"
      </div>
    </div>

    <!-- Linux et Open Source -->
    <h3 id="sites-linux"><i class="fab fa-linux"></i> Linux et Open Source</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Sites de référence Linux
- https://linux.die.net/ : Linux Man Pages Online - Documentation complète des commandes Linux
- https://tldp.org/ : The Linux Documentation Project - Guides et HOWTOs Linux
- https://www.cyberciti.biz/ : nixCraft - Tutoriels et astuces Linux/Unix
- https://www.debian.org/doc/ : Debian Documentation - Documentation officielle Debian
- https://wiki.archlinux.org/ : ArchWiki - Documentation Arch Linux très complète
- https://help.ubuntu.com/ : Documentation officielle Ubuntu
- https://access.redhat.com/documentation/ : Documentation Red Hat Enterprise Linux
- https://docs.fedoraproject.org/ : Documentation Fedora</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Documentation et apprentissage Linux<br>
        <strong>⚠️ Distribution :</strong> Certains sites sont spécifiques à une distribution<br>
        <strong>✅ Exhaustivité :</strong> Documentation très complète disponible<br>
        <strong>🚨 Scénario :</strong> "Recherche de documentation technique Linux"
      </div>
    </div>

    <!-- Windows et Microsoft -->
    <h3 id="sites-windows"><i class="fab fa-windows"></i> Windows et Microsoft</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Sites de référence Windows
- https://docs.microsoft.com/en-us/powershell/ : PowerShell Documentation - Documentation officielle PowerShell
- https://learn.microsoft.com/en-us/windows-server/ : Windows Server Docs - Documentation Windows Server
- https://docs.microsoft.com/en-us/sysinternals/ : Sysinternals - Outils et documentation système
- https://techcommunity.microsoft.com/ : Microsoft Tech Community
- https://docs.microsoft.com/en-us/windows/ : Documentation Windows client
- https://social.technet.microsoft.com/ : TechNet Forums
- https://gallery.technet.microsoft.com/ : Script Center</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Documentation Microsoft et Windows<br>
        <strong>⚠️ Évolution :</strong> La documentation Microsoft évolue rapidement<br>
        <strong>✅ Officielle :</strong> Sources directes de Microsoft<br>
        <strong>🚨 Scénario :</strong> "Résolution de problèmes Windows Server"
      </div>
    </div>

    <!-- Réseau et Cisco -->
    <h3 id="sites-reseau"><i class="fas fa-network-wired"></i> Réseau et Cisco</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Sites de référence Réseau
- https://www.cisco.com/c/en/us/support/index.html : Cisco Documentation - Documentation officielle Cisco
- https://www.routeralley.com/guides.html : RouterAlley - Guides réseaux et certifications
- https://www.packettracernetwork.com/ : PacketLife Cheat Sheets - Cheat sheets réseaux
- https://networklessons.com/ : Network Lessons - Cours réseaux en ligne
- https://www.firewall.cx/ : Firewall.cx - Réseau et sécurité
- https://www.juniper.net/documentation/ : Documentation Juniper
- https://www.arubanetworks.com/techdocs/ : Documentation Aruba Networks</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Apprentissage et référence réseaux<br>
        <strong>⚠️ Fabricant :</strong> Documentation spécifique par fabricant<br>
        <strong>✅ Certification :</strong> Ressources pour préparer les certifications<br>
        <strong>🚨 Scénario :</strong> "Préparation à la certification CCNA"
      </div>
    </div>

    <!-- Bases de Données -->
    <h3 id="sites-databases"><i class="fas fa-database"></i> Bases de Données</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Sites de référence Bases de Données
- https://dev.mysql.com/doc/ : MySQL Documentation - Documentation officielle MySQL
- https://www.postgresql.org/docs/ : PostgreSQL Docs - Documentation PostgreSQL
- https://docs.mongodb.com/ : MongoDB Documentation
- https://docs.oracle.com/en/database/ : Documentation Oracle Database
- https://mariadb.com/kb/ : MariaDB Knowledge Base
- https://redis.io/documentation : Documentation Redis
- https://www.sqlite.org/docs.html : Documentation SQLite</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Documentation des SGBD<br>
        <strong>⚠️ Version :</strong> Vérifier la version de la documentation<br>
        <strong>✅ Performance :</strong> Optimisation et tuning des bases<br>
        <strong>🚨 Scénario :</strong> "Optimisation des performances d'une base MySQL"
      </div>
    </div>

    <!-- Containers et Virtualisation -->
    <h3 id="sites-containers"><i class="fab fa-docker"></i> Containers et Virtualisation</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Sites de référence Containers
- https://docs.docker.com/reference/ : Docker Documentation - Référence Docker
- https://kubernetes.io/docs/home/ : Kubernetes Documentation - Docs officielles K8s
- https://docs.vmware.com/en/VMware-vSphere/index.html : vSphere Documentation - Documentation VMware
- https://pve.proxmox.com/wiki/ : Proxmox VE Wiki
- https://docs.ansible.com/ : Documentation Ansible
- https://www.vagrantup.com/docs : Documentation Vagrant
- https://www.packer.io/docs : Documentation Packer</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Documentation conteneurs et virtualisation<br>
        <strong>⚠️ Écosystème :</strong> Technologies en évolution rapide<br>
        <strong>✅ Best Practices :</strong> Guides de bonnes pratiques inclus<br>
        <strong>🚨 Scénario :</strong> "Déploiement d'une application avec Kubernetes"
      </div>
    </div>

    <!-- Sécurité -->
    <h3 id="sites-securite"><i class="fas fa-shield-alt"></i> Sécurité</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Sites de référence Sécurité
- https://owasp.org/www-project-cheat-sheets/ : OWASP Cheat Sheets - Sécurité applicative
- https://cheatsheetseries.owasp.org/ : OWASP Cheat Sheet Series - Sécurité web
- https://www.sans.org/blog/the-ultimate-list-of-sans-cheat-sheets/ : SANS Cheat Sheets - Sécurité informatique
- https://www.ncsc.gov.uk/guidance : NCSC Guidance - Centre national de cybersécurité UK
- https://csrc.nist.gov/publications : NIST Publications
- https://www.cisecurity.org/cis-benchmarks/ : CIS Benchmarks
- https://www.securityfocus.com/ : SecurityFocus</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Références en sécurité informatique<br>
        <strong>⚠️ Sensible :</strong> Certaines informations peuvent être sensibles<br>
        <strong>✅ Standards :</strong> Références de standards industry<br>
        <strong>🚨 Scénario :</strong> "Mise en conformité avec les standards de sécurité"
      </div>
    </div>

    <!-- Outils en Ligne -->
    <h3 id="sites-outils"><i class="fas fa-tools"></i> Outils en Ligne</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Outils en ligne utiles
- https://www.regex101.com/ : Regex101 - Testeur d'expressions régulières
- https://jsonformatter.org/ : JSON Formatter - Validation et formatage JSON
- https://www.base64decode.org/ : Base64 Decode - Encodeur/décodeur Base64
- https://crontab.guru/ : Crontab Guru - Éditeur visuel de crontab
- https://www.url-encode-decode.com/ : URL Encode/Decode
- https://www.sqlformat.org/ : SQL Formatter - Formatage SQL
- https://www.diffchecker.com/ : Diff Checker - Comparaison de texte
- https://www.online-convert.com/ : Online Convert - Conversion de fichiers</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Outils rapides pour tâches courantes<br>
        <strong>⚠️ Confidentialité :</strong> Éviter les données sensibles<br>
        <strong>✅ Productivité :</strong> Gain de temps pour des tâches simples<br>
        <strong>🚨 Scénario :</strong> "Test rapide d'une expression régulière"
      </div>
    </div>

    <!-- Forums et Communautés -->
    <h3 id="sites-forums"><i class="fas fa-users"></i> Forums et Communautés</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Forums et communautés techniques
- https://stackoverflow.com/ : Stack Overflow - Questions/réponses programmation
- https://serverfault.com/ : Server Fault - Administration système
- https://superuser.com/ : Super User - Questions utilisateur avancé
- https://www.reddit.com/r/sysadmin/ : Reddit Sysadmin
- https://www.reddit.com/r/networking/ : Reddit Networking
- https://community.spiceworks.com/ : Spiceworks Community
- https://discourse.ubuntu.com/ : Ubuntu Discourse
- https://forums.centos.org/ : CentOS Forums</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Recherche de solutions à des problèmes spécifiques<br>
        <strong>⚠️ Qualité :</strong> Vérifier la qualité des réponses<br>
        <strong>✅ Communauté :</strong> Large base de connaissances collective<br>
        <strong>🚨 Scénario :</strong> "Problème technique sans solution documentée"
      </div>
    </div>

    <!-- Tutoriels et Formations -->
    <h3 id="sites-tutoriels"><i class="fas fa-graduation-cap"></i> Tutoriels et Formations</h3>
    <div class="command-card">
      <div class="command-meta">
        <span class="tag risque-faible">RISQUE FAIBLE</span>
        <span class="tag reference">RÉFÉRENCE</span>
        <span class="tag sites">SITES</span>
        <span class="tag">⏱️ Navigation</span>
      </div>
      <pre><code># Sites de tutoriels et formations
- https://www.digitalocean.com/community/tutorials : DigitalOcean Tutorials
- https://linuxconfig.org/ : LinuxConfig - Tutoriels Linux
- https://www.howtoforge.com/ : HowtoForge - Guides Linux
- https://www.tecmint.com/ : Tecmint - Linux Howtos
- https://www.2daygeek.com/ : 2DayGeek - Articles techniques
- https://www.cyberciti.biz/ : nixCraft (déjà listé mais important)
- https://www.guru99.com/ : Guru99 - Tutoriels IT
- https://www.tutorialspoint.com/index.htm : TutorialsPoint</code></pre>
      
      <div class="context-box">
        <strong>🎯 Quand utiliser :</strong> Apprentissage de nouvelles technologies<br>
        <strong>⚠️ Actualité :</strong> Vérifier la date des tutoriels<br>
        <strong>✅ Pédagogique :</strong> Approche étape par étape<br>
        <strong>🚨 Scénario :</strong> "Apprentissage d'une nouvelle technologie"
      </div>
    </div>

    <div class="warning">
        <p><strong>💡 Conseil :</strong> Ces sites externes s'ouvriront dans un nouvel onglet. N'hésitez pas à les bookmarker pour un accès rapide !</p>
    </div>

 

  </div>

<script>
    // =============================================
    // FONCTIONS DE BASE
    // =============================================

    // Fonction pour copier le code
    document.querySelectorAll('pre').forEach(pre => {
        const btn = document.createElement('button');
        btn.className = 'copy-btn';
        btn.innerHTML = '<i class="far fa-copy"></i>';
        btn.onclick = () => {
            const code = pre.querySelector('code').innerText;
            navigator.clipboard.writeText(code).then(() => {
                btn.innerHTML = '<i class="fas fa-check"></i>';
                setTimeout(() => btn.innerHTML = '<i class="far fa-copy"></i>', 2000);
            });
        };
        pre.appendChild(btn);
    });

    // Fonction pour basculer le thème
    function toggleTheme() {
        const current = document.documentElement.getAttribute('data-theme');
        const newTheme = current === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        const icon = document.querySelector('.theme-toggle i');
        icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        
        // Sauvegarder la préférence
        localStorage.setItem('theme', newTheme);
    }

    // =============================================
    // FONCTIONS DE FILTRAGE ET RECHERCHE
    // =============================================

    let currentMode = 'apprentissage';

    function toggleMode() {
        currentMode = currentMode === 'apprentissage' ? 'urgence' : 'apprentissage';
        const modeToggle = document.querySelector('.mode-toggle');
        modeToggle.innerHTML = currentMode === 'urgence' ? 
            '<i class="fas fa-graduation-cap"></i> Mode Apprentissage' : 
            '<i class="fas fa-rocket"></i> Mode Urgence';
        
        document.body.classList.toggle('mode-urgence', currentMode === 'urgence');
        document.querySelectorAll('.context-box').forEach(box => {
            box.style.display = currentMode === 'urgence' ? 'none' : 'block';
        });
        
        // Message de confirmation
        const message = currentMode === 'urgence' 
            ? '🔧 MODE URGENCE - Affichage des commandes uniquement' 
            : '📚 MODE APPRENTISSAGE - Affichage complet avec explications';
        showNotification(message);
    }

    // Fonction pour afficher des notifications
    function showNotification(message) {
        // Créer une notification temporaire
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: white;
            padding: 12px 20px;
            border-radius: 5px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            font-weight: bold;
        `;
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }

    // Scénarios courants
    function filterScenario(scenario) {
        const scenarios = {
            'reseau-down': ['ip a', 'ip route', 'ping', 'traceroute', 'ss -tulpn', 'nc -vz', 'interface', 'connexion'],
            'ssh-blocked': ['systemctl status sshd', 'netstat -tulpn', 'iptables -L', 'telnet', 'port 22', 'ssh', 'accès'],
            'disk-full': ['df -h', 'du -sh', 'find /var/log', 'espace disque', 'nettoyage', 'clean', 'disk'],
            'service-crash': ['systemctl --failed', 'journalctl -xe', 'ps aux', 'service', 'restart', 'status'],
            'dns-issue': ['nslookup', 'dig', 'cat /etc/resolv.conf', 'systemd-resolve', 'dns', 'resolution', 'domain'],
            'firewall-block': ['iptables -L', 'ufw status', 'firewall-cmd', 'port', 'block', 'autoriser', 'règle'],
            'performance-slow': ['top', 'htop', 'iostat', 'vmstat', 'performance', 'mémoire', 'cpu', 'load'],
            'security-breach': ['last', 'who', 'ps aux', 'netstat -tulpn', 'sécurité', 'intrusion', 'audit']
        };

        const commands = scenarios[scenario];
        if (commands) {
            document.getElementById('searchInput').value = commands.join(' ');
            filterContent();
            showNotification(`🔍 Filtrage scénario: ${scenario.replace('-', ' ')}`);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }

    // Filtres par risque
    function filterByRisk(risk) {
        const riskTerms = {
            'faible': ['risque-faible', 'diagnostic', 'vérification', 'surveillance', 'monitoring'],
            'moyen': ['risque-moyen', 'configuration', 'maintenance', 'modification', 'setup'],
            'eleve': ['risque-élevé', 'formatage', 'suppression', 'rm -rf', 'critical', 'danger']
        };
        
        document.getElementById('searchInput').value = riskTerms[risk].join(' ');
        filterContent();
        showNotification(`🎯 Filtre risque: ${risk}`);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Filtres par type
    function filterByType(type) {
        const typeTerms = {
            'diagnostic': ['diagnostic', 'vérifier', 'tester', 'status', 'surveillance', 'check'],
            'reparation': ['restart', 'redémarrer', 'réparer', 'corriger', 'fix', 'restaurer', 'repair']
        };
        
        document.getElementById('searchInput').value = typeTerms[type].join(' ');
        filterContent();
        showNotification(`🔧 Filtre type: ${type}`);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Afficher toutes les commandes
    function showAllCommands() {
        document.getElementById('searchInput').value = '';
        filterContent();
        showNotification('📋 Affichage de toutes les commandes');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Filtres par catégorie
    function toggleFilter(filterType) {
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.classList.add('active');
        
        if (filterType === 'all') {
            showAllCommands();
        } else {
            document.getElementById('searchInput').value = filterType;
            filterContent();
            showNotification(`🏷️ Filtre: ${filterType}`);
        }
        
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Navigation vers une commande spécifique
    function scrollToCommand(commandId) {
        const element = document.getElementById(commandId);
        if (element) {
            element.scrollIntoView({ behavior: 'smooth' });
            
            // Highlight temporaire
            const originalBackground = element.style.backgroundColor;
            element.style.backgroundColor = '#fff3cd';
            element.style.transition = 'background-color 0.3s ease';
            
            setTimeout(() => { 
                element.style.backgroundColor = originalBackground; 
            }, 2000);
        } else {
            // Fallback : recherche dans le contenu
            document.getElementById('searchInput').value = commandId;
            filterContent();
            showNotification(`🔍 Recherche: ${commandId}`);
        }
    }

    // =============================================
    // FONCTION DE RECHERCHE PRINCIPALE
    // =============================================

    function filterContent() {
        const input = document.getElementById('searchInput').value.toLowerCase().trim();
        
        // Si recherche vide, tout afficher
        if (!input) {
            document.querySelectorAll('.section-hidden').forEach(el => {
                el.classList.remove('section-hidden');
            });
            document.querySelectorAll('.search-highlight').forEach(el => {
                el.outerHTML = el.innerHTML;
            });
            return;
        }

        let found = false;
        let resultsCount = 0;
        
        // Recherche dans les titres (h2, h3)
        document.querySelectorAll('h2, h3').forEach(title => {
            const titleText = title.textContent.toLowerCase();
            if (titleText.includes(input)) {
                found = true;
                resultsCount++;
                title.classList.remove('section-hidden');
                
                // Afficher tout le contenu jusqu'au prochain titre de même niveau ou supérieur
                let nextEl = title.nextElementSibling;
                while (nextEl && !(nextEl.tagName === title.tagName || 
                                  (title.tagName === 'H3' && nextEl.tagName === 'H2'))) {
                    nextEl.classList.remove('section-hidden');
                    nextEl = nextEl.nextElementSibling;
                }
            } else {
                title.classList.add('section-hidden');
            }
        });
        
        // Recherche dans le contenu (pre et context-box)
        document.querySelectorAll('pre, .context-box').forEach(element => {
            const elementText = element.textContent.toLowerCase();
            if (elementText.includes(input)) {
                found = true;
                resultsCount++;
                element.classList.remove('section-hidden');
                
                // Mettre en surbrillance le texte trouvé
                if (element.querySelector('code')) {
                    const code = element.querySelector('code');
                    const html = code.innerHTML;
                    const highlighted = html.replace(
                        new RegExp(input.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi'),
                        match => `<span class="search-highlight">${match}</span>`
                    );
                    code.innerHTML = highlighted;
                }
                
                // Afficher le titre parent
                let currentEl = element.previousElementSibling;
                while (currentEl && !['H2', 'H3'].includes(currentEl.tagName)) {
                    currentEl = currentEl.previousElementSibling;
                }
                if (currentEl) {
                    currentEl.classList.remove('section-hidden');
                }
            } else {
                element.classList.add('section-hidden');
                // Retirer les anciens surlignages
                if (element.querySelector('code')) {
                    const code = element.querySelector('code');
                    code.innerHTML = code.textContent;
                }
            }
        });

        // Feedback des résultats
        if (found) {
            showNotification(`✅ ${resultsCount} résultat(s) trouvé(s) pour: "${input}"`);
        } else {
            showNotification(`❌ Aucun résultat trouvé pour: "${input}"`);
            // Réafficher tout si aucun résultat
            setTimeout(showAllCommands, 2000);
        }
    }

    // =============================================
    // ÉCOUTEURS D'ÉVÉNEMENTS
    // =============================================

    // Recherche avec debounce
    document.getElementById('searchInput').addEventListener('keyup', debounce(filterContent, 300));
    
    // Recherche avec Enter
    document.getElementById('searchInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            filterContent();
        }
    });

    // Fonction debounce pour optimiser la recherche
    function debounce(func, wait) {
        let timeout;
        return function() {
            const context = this, args = arguments;
            clearTimeout(timeout);
            timeout = setTimeout(() => {
                func.apply(context, args);
            }, wait);
        };
    }

    // =============================================
    // INITIALISATION AU CHARGEMENT
    // =============================================
    
    document.addEventListener('DOMContentLoaded', function() {
        // Initialiser le thème
        const savedTheme = localStorage.getItem('theme') || 
                          (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', savedTheme);
        document.querySelector('.theme-toggle i').className = savedTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        
        // Initialiser le mode
        currentMode = 'apprentissage';
        
        // Afficher un message de bienvenue
        setTimeout(() => {
            showNotification('🚀 Base de connaissances chargée - Prêt à utiliser !');
        }, 1000);
        
        // Raccourci clavier pour la recherche (Ctrl/Cmd + K)
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
                document.getElementById('searchInput').select();
            }
        });
    });

    // =============================================
    // FONCTIONS UTILITAIRES SUPPLÉMENTAIRES
    // =============================================

    // Exporter les commandes (fonctionnalité avancée)
    function exportCommands() {
        const commands = [];
        document.querySelectorAll('pre code').forEach(code => {
            commands.push(code.textContent);
        });
        
        const blob = new Blob([commands.join('\n\n')], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'commandes-backup.txt';
        a.click();
        URL.revokeObjectURL(url);
        
        showNotification('💾 Commandes exportées avec succès !');
    }

    // Compter le nombre total de commandes
    function countCommands() {
        const count = document.querySelectorAll('pre').length;
        showNotification(`📊 Base de connaissances: ${count} commandes disponibles`);
        return count;
    }

    // Mode aléatoire - découvrir une commande au hasard
    function randomCommand() {
        const commands = document.querySelectorAll('h3');
        if (commands.length > 0) {
            const randomIndex = Math.floor(Math.random() * commands.length);
            const randomCommand = commands[randomIndex];
            scrollToCommand(randomCommand.id);
            showNotification('🎲 Commande aléatoire découverte !');
        }
    }
</script>
</body>
</html>

